{"version":3,"file":null,"sources":["../src/empty-tags.js","../src/vhtml.js"],"sourcesContent":["export default [\n\t'area',\n\t'base',\n\t'br',\n\t'col',\n\t'command',\n\t'embed',\n\t'hr',\n\t'img',\n\t'input',\n\t'keygen',\n\t'link',\n\t'meta',\n\t'param',\n\t'source',\n\t'track',\n\t'wbr'\n];","import emptyTags from './empty-tags';\n\n// escape an attribute\nlet esc = str => String(str).replace(/[&<>\"']/g, s=>`&${map[s]};`);\nlet map = {'&':'amp','<':'lt','>':'gt','\"':'quot',\"'\":'apos'};\nlet setInnerHTMLAttr = 'dangerouslySetInnerHTML';\nlet DOMAttributeNames = {\n\tclassName: 'class',\n\thtmlFor: 'for'\n};\n\nlet sanitized = {};\n\n/** Hyperscript reviver that constructs a sanitized HTML string. */\nexport default function h(name, attrs) {\n\tlet stack=[], s = '';\n\tattrs = attrs || {};\n\tfor (let i=arguments.length; i-- > 2; ) {\n\t\tstack.push(arguments[i]);\n\t}\n\n\t// Sortof component support!\n\tif (typeof name==='function') {\n\t\tattrs.children = stack.reverse();\n\t\treturn name(attrs);\n\t\t// return name(attrs, stack.reverse());\n\t}\n\n\tif (name) {\n\t\ts += '<' + name;\n\t\tif (attrs) for (let i in attrs) {\n\t\t\tif (attrs[i]!==false && attrs[i]!=null && i !== setInnerHTMLAttr) {\n\t\t\t\ts += ` ${DOMAttributeNames[i] ? DOMAttributeNames[i] : esc(i)}=\"${esc(attrs[i])}\"`;\n\t\t\t}\n\t\t}\n\t\ts += '>';\n\t}\n\n\tif (emptyTags.indexOf(name) === -1) {\n\t\tif (attrs[setInnerHTMLAttr]) {\n\t\t\ts += attrs[setInnerHTMLAttr].__html;\n\t\t}\n\t\telse while (stack.length) {\n\t\t\tlet child = stack.pop();\n\t\t\tif (child) {\n\t\t\t\tif (child.pop) {\n\t\t\t\t\tfor (let i=child.length; i--; ) stack.push(child[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ts += sanitized[child]===true ? child : esc(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\ts += name ? `</${name}>` : '';\n\t}\n\n\tsanitized[s] = true;\n\treturn s;\n}\n"],"names":["esc","String","str","replace","map","s","setInnerHTMLAttr","DOMAttributeNames","sanitized","h","name","attrs","stack","i","arguments","length","push","children","reverse","emptyTags","indexOf","__html","child","pop"],"mappings":";;;;;;AAAA,gBAAe,CACd,MADc,EAEd,MAFc,EAGd,IAHc,EAId,KAJc,EAKd,SALc,EAMd,OANc,EAOd,IAPc,EAQd,KARc,EASd,OATc,EAUd,QAVc,EAWd,MAXc,EAYd,MAZc,EAad,OAbc,EAcd,QAdc,EAed,OAfc,EAgBd,KAhBc,CAAf;;ACGA,IAAIA,MAAM,SAANA,GAAM;QAAOC,OAAOC,GAAP,EAAYC,OAAZ,CAAoB,UAApB,EAAgC;eAAOC,IAAIC,CAAJ,CAAP;EAAhC,CAAP;CAAV;AACA,IAAID,MAAM,EAAC,KAAI,KAAL,EAAW,KAAI,IAAf,EAAoB,KAAI,IAAxB,EAA6B,KAAI,MAAjC,EAAwC,KAAI,MAA5C,EAAV;AACA,IAAIE,mBAAmB,yBAAvB;AACA,IAAIC,oBAAoB;YACZ,OADY;UAEd;CAFV;;AAKA,IAAIC,YAAY,EAAhB;;AAGA,SAAwBC,CAAT,CAAWC,IAAX,EAAiBC,KAAjB,EAAwB;KAClCC,QAAM,EAAV;KAAcP,IAAI,EAAlB;SACQM,SAAS,EAAjB;MACK,IAAIE,IAAEC,UAAUC,MAArB,EAA6BF,MAAM,CAAnC,GAAwC;QACjCG,IAAN,CAAWF,UAAUD,CAAV,CAAX;;;KAIG,OAAOH,IAAP,KAAc,UAAlB,EAA8B;QACvBO,QAAN,GAAiBL,MAAMM,OAAN,EAAjB;SACOR,KAAKC,KAAL,CAAP;;;KAIGD,IAAJ,EAAU;OACJ,MAAMA,IAAX;MACIC,KAAJ,EAAW,KAAK,IAAIE,EAAT,IAAcF,KAAd,EAAqB;OAC3BA,MAAME,EAAN,MAAW,KAAX,IAAoBF,MAAME,EAAN,KAAU,IAA9B,IAAsCA,OAAMP,gBAAhD,EAAkE;gBACxDC,kBAAkBM,EAAlB,IAAuBN,kBAAkBM,EAAlB,CAAvB,GAA8Cb,IAAIa,EAAJ,CAAvD,WAAkEb,IAAIW,MAAME,EAAN,CAAJ,CAAlE;;;OAGG,GAAL;;;KAGGM,UAAUC,OAAV,CAAkBV,IAAlB,MAA4B,CAAC,CAAjC,EAAoC;MAC/BC,MAAML,gBAAN,CAAJ,EAA6B;QACvBK,MAAML,gBAAN,EAAwBe,MAA7B;GADD,MAGK,OAAOT,MAAMG,MAAb,EAAqB;OACrBO,QAAQV,MAAMW,GAAN,EAAZ;OACID,KAAJ,EAAW;QACNA,MAAMC,GAAV,EAAe;UACT,IAAIV,MAAES,MAAMP,MAAjB,EAAyBF,KAAzB;YAAsCG,IAAN,CAAWM,MAAMT,GAAN,CAAX;;KADjC,MAGK;UACCL,UAAUc,KAAV,MAAmB,IAAnB,GAA0BA,KAA1B,GAAkCtB,IAAIsB,KAAJ,CAAvC;;;;;OAKEZ,cAAYA,IAAZ,SAAsB,EAA3B;;;WAGSL,CAAV,IAAe,IAAf;QACOA,CAAP;;;;;"}