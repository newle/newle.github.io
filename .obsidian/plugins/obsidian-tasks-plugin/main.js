/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source visit the plugins github repository
*/

/*
License obsidian-tasks:
MIT License

Copyright (c) 2021 Martin Schenck

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
License rrule (included library):
rrule.js: Library for working with recurrence rules for calendar dates.
=======================================================================

Copyright 2010, Jakub Roztocil <jakub@roztocil.name> and Lars Schöning

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    1. Redistributions of source code must retain the above copyright notice,
       this list of conditions and the following disclaimer.

    2. Redistributions in binary form must reproduce the above copyright
       notice, this list of conditions and the following disclaimer in the
       documentation and/or other materials provided with the distribution.

    3. Neither the name of The author nor the names of its contributors may
       be used to endorse or promote products derived from this software
       without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE AUTHOR AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE AUTHOR AND CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.



./rrule.js and ./test/tests.js is based on python-dateutil. LICENCE:

python-dateutil - Extensions to the standard Python datetime module.
====================================================================

Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
Copyright (c) 2012 - Tomi Pieviläinen <tomi.pievilainen@iki.fi>

All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice,
      this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice,
      this list of conditions and the following disclaimer in the documentation
      and/or other materials provided with the distribution.
    * Neither the name of the copyright holder nor the names of its
      contributors may be used to endorse or promote products derived from
      this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/

/*
License chrono-node (included library):
The MIT License

Copyright (c) 2014, Wanasit Tanakitrungruang

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
*/

"use strict";var I_=Object.create;var Zn=Object.defineProperty,F_=Object.defineProperties,U_=Object.getOwnPropertyDescriptor,q_=Object.getOwnPropertyDescriptors,L_=Object.getOwnPropertyNames,sf=Object.getOwnPropertySymbols,W_=Object.getPrototypeOf,of=Object.prototype.hasOwnProperty,Y_=Object.prototype.propertyIsEnumerable;var af=(r,e,t)=>e in r?Zn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Me=(r,e)=>{for(var t in e||(e={}))of.call(e,t)&&af(r,t,e[t]);if(sf)for(var t of sf(e))Y_.call(e,t)&&af(r,t,e[t]);return r},ct=(r,e)=>F_(r,q_(e));var p=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),$_=(r,e)=>{for(var t in e)Zn(r,t,{get:e[t],enumerable:!0})},uf=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of L_(e))!of.call(r,i)&&i!==t&&Zn(r,i,{get:()=>e[i],enumerable:!(n=U_(e,i))||n.enumerable});return r};var Os=(r,e,t)=>(t=r!=null?I_(W_(r)):{},uf(e||!r||!r.__esModule?Zn(t,"default",{value:r,enumerable:!0}):t,r)),j_=r=>uf(Zn({},"__esModule",{value:!0}),r);var B=(r,e,t)=>new Promise((n,i)=>{var s=u=>{try{o(t.next(u))}catch(l){i(l)}},a=u=>{try{o(t.throw(u))}catch(l){i(l)}},o=u=>u.done?n(u.value):Promise.resolve(u.value).then(s,a);o((t=t.apply(r,e)).next())});var Cf=p((Ik,Cs)=>{var ff,pf,hf,mf,yf,gf,_f,Tf,bf,Ss,ho,vf,Ef,wf,ln,Rf,Mf,Df,Of,Pf,kf,Af,Sf,Nf,Ns;(function(r){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){r(t(e,t(n)))}):typeof Cs=="object"&&typeof Cs.exports=="object"?r(t(e,t(Cs.exports))):r(t(e));function t(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(s,a){return n[s]=i?i(s,a):a}}})(function(r){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])};ff=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function s(){this.constructor=n}n.prototype=i===null?Object.create(i):(s.prototype=i.prototype,new s)},pf=Object.assign||function(n){for(var i,s=1,a=arguments.length;s<a;s++){i=arguments[s];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},hf=function(n,i){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&i.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(n);o<a.length;o++)i.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(n,a[o])&&(s[a[o]]=n[a[o]]);return s},mf=function(n,i,s,a){var o=arguments.length,u=o<3?i:a===null?a=Object.getOwnPropertyDescriptor(i,s):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,s,a);else for(var c=n.length-1;c>=0;c--)(l=n[c])&&(u=(o<3?l(u):o>3?l(i,s,u):l(i,s))||u);return o>3&&u&&Object.defineProperty(i,s,u),u},yf=function(n,i){return function(s,a){i(s,a,n)}},gf=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},_f=function(n,i,s,a){function o(u){return u instanceof s?u:new s(function(l){l(u)})}return new(s||(s=Promise))(function(u,l){function c(h){try{f(a.next(h))}catch(_){l(_)}}function d(h){try{f(a.throw(h))}catch(_){l(_)}}function f(h){h.done?u(h.value):o(h.value).then(c,d)}f((a=a.apply(n,i||[])).next())})},Tf=function(n,i){var s={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,l;return l={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function c(f){return function(h){return d([f,h])}}function d(f){if(a)throw new TypeError("Generator is already executing.");for(;s;)try{if(a=1,o&&(u=f[0]&2?o.return:f[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,f[1])).done)return u;switch(o=0,u&&(f=[f[0]&2,u.value]),f[0]){case 0:case 1:u=f;break;case 4:return s.label++,{value:f[1],done:!1};case 5:s.label++,o=f[1],f=[0];continue;case 7:f=s.ops.pop(),s.trys.pop();continue;default:if(u=s.trys,!(u=u.length>0&&u[u.length-1])&&(f[0]===6||f[0]===2)){s=0;continue}if(f[0]===3&&(!u||f[1]>u[0]&&f[1]<u[3])){s.label=f[1];break}if(f[0]===6&&s.label<u[1]){s.label=u[1],u=f;break}if(u&&s.label<u[2]){s.label=u[2],s.ops.push(f);break}u[2]&&s.ops.pop(),s.trys.pop();continue}f=i.call(n,s)}catch(h){f=[6,h],o=0}finally{a=u=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}},bf=function(n,i){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&Ns(i,n,s)},Ns=Object.create?function(n,i,s,a){a===void 0&&(a=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(n,a,o)}:function(n,i,s,a){a===void 0&&(a=s),n[a]=i[s]},Ss=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,s=i&&n[i],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ho=function(n,i){var s=typeof Symbol=="function"&&n[Symbol.iterator];if(!s)return n;var a=s.call(n),o,u=[],l;try{for(;(i===void 0||i-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(c){l={error:c}}finally{try{o&&!o.done&&(s=a.return)&&s.call(a)}finally{if(l)throw l.error}}return u},vf=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(ho(arguments[i]));return n},Ef=function(){for(var n=0,i=0,s=arguments.length;i<s;i++)n+=arguments[i].length;for(var a=Array(n),o=0,i=0;i<s;i++)for(var u=arguments[i],l=0,c=u.length;l<c;l++,o++)a[o]=u[l];return a},wf=function(n,i,s){if(s||arguments.length===2)for(var a=0,o=i.length,u;a<o;a++)(u||!(a in i))&&(u||(u=Array.prototype.slice.call(i,0,a)),u[a]=i[a]);return n.concat(u||Array.prototype.slice.call(i))},ln=function(n){return this instanceof ln?(this.v=n,this):new ln(n)},Rf=function(n,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,i||[]),o,u=[];return o={},l("next"),l("throw"),l("return"),o[Symbol.asyncIterator]=function(){return this},o;function l(m){a[m]&&(o[m]=function(g){return new Promise(function(R,w){u.push([m,g,R,w])>1||c(m,g)})})}function c(m,g){try{d(a[m](g))}catch(R){_(u[0][3],R)}}function d(m){m.value instanceof ln?Promise.resolve(m.value.v).then(f,h):_(u[0][2],m)}function f(m){c("next",m)}function h(m){c("throw",m)}function _(m,g){m(g),u.shift(),u.length&&c(u[0][0],u[0][1])}},Mf=function(n){var i,s;return i={},a("next"),a("throw",function(o){throw o}),a("return"),i[Symbol.iterator]=function(){return this},i;function a(o,u){i[o]=n[o]?function(l){return(s=!s)?{value:ln(n[o](l)),done:o==="return"}:u?u(l):l}:u}},Df=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],s;return i?i.call(n):(n=typeof Ss=="function"?Ss(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(l){return new Promise(function(c,d){l=n[u](l),o(c,d,l.done,l.value)})}}function o(u,l,c,d){Promise.resolve(d).then(function(f){u({value:f,done:c})},l)}},Of=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var t=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};Pf=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var s in n)s!=="default"&&Object.prototype.hasOwnProperty.call(n,s)&&Ns(i,n,s);return t(i,n),i},kf=function(n){return n&&n.__esModule?n:{default:n}},Af=function(n,i,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!a:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(n):a?a.value:i.get(n)},Sf=function(n,i,s,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!o:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(n,s):o?o.value=s:i.set(n,s),s},Nf=function(n,i){if(i===null||typeof i!="object"&&typeof i!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?i===n:n.has(i)},r("__extends",ff),r("__assign",pf),r("__rest",hf),r("__decorate",mf),r("__param",yf),r("__metadata",gf),r("__awaiter",_f),r("__generator",Tf),r("__exportStar",bf),r("__createBinding",Ns),r("__values",Ss),r("__read",ho),r("__spread",vf),r("__spreadArrays",Ef),r("__spreadArray",wf),r("__await",ln),r("__asyncGenerator",Rf),r("__asyncDelegator",Mf),r("__asyncValues",Df),r("__makeTemplateObject",Of),r("__importStar",Pf),r("__importDefault",kf),r("__classPrivateFieldGet",Af),r("__classPrivateFieldSet",Sf),r("__classPrivateFieldIn",Nf)})});var re=p(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.matchAnyPattern=Tr.extractTerms=Tr.repeatedTimeunitPattern=void 0;function bT(r,e){let t=e.replace(/\((?!\?)/g,"(?:");return`${r}${t}\\s{0,5}(?:,?\\s{0,5}${t}){0,10}`}Tr.repeatedTimeunitPattern=bT;function pp(r){let e;return r instanceof Array?e=[...r]:r instanceof Map?e=Array.from(r.keys()):e=Object.keys(r),e}Tr.extractTerms=pp;function vT(r){return`(?:${pp(r).sort((t,n)=>n.length-t.length).join("|").replace(/\./g,"\\.")})`}Tr.matchAnyPattern=vT});var X=p((bo,vo)=>{(function(r,e){typeof bo=="object"&&typeof vo!="undefined"?vo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs=e()})(bo,function(){"use strict";var r=1e3,e=6e4,t=36e5,n="millisecond",i="second",s="minute",a="hour",o="day",u="week",l="month",c="quarter",d="year",f="date",h="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},R=function(A,E,b){var N=String(A);return!N||N.length>=E?A:""+Array(E+1-N.length).join(b)+A},w={s:R,z:function(A){var E=-A.utcOffset(),b=Math.abs(E),N=Math.floor(b/60),y=b%60;return(E<=0?"+":"-")+R(N,2,"0")+":"+R(y,2,"0")},m:function A(E,b){if(E.date()<b.date())return-A(b,E);var N=12*(b.year()-E.year())+(b.month()-E.month()),y=E.clone().add(N,l),C=b-y<0,S=E.clone().add(N+(C?-1:1),l);return+(-(N+(b-y)/(C?y-S:S-y))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:l,y:d,w:u,d:o,D:f,h:a,m:s,s:i,ms:n,Q:c}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},k="en",z={};z[k]=g;var fe=function(A){return A instanceof lt},he=function(A,E,b){var N;if(!A)return k;if(typeof A=="string")z[A]&&(N=A),E&&(z[A]=E,N=A);else{var y=A.name;z[y]=A,N=y}return!b&&N&&(k=N),N||!b&&k},ne=function(A,E){if(fe(A))return A.clone();var b=typeof E=="object"?E:{};return b.date=A,b.args=arguments,new lt(b)},Y=w;Y.l=he,Y.i=fe,Y.w=function(A,E){return ne(A,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var lt=function(){function A(b){this.$L=he(b.locale,null,!0),this.parse(b)}var E=A.prototype;return E.parse=function(b){this.$d=function(N){var y=N.date,C=N.utc;if(y===null)return new Date(NaN);if(Y.u(y))return new Date;if(y instanceof Date)return new Date(y);if(typeof y=="string"&&!/Z$/i.test(y)){var S=y.match(_);if(S){var I=S[2]-1||0,ee=(S[7]||"0").substring(0,3);return C?new Date(Date.UTC(S[1],I,S[3]||1,S[4]||0,S[5]||0,S[6]||0,ee)):new Date(S[1],I,S[3]||1,S[4]||0,S[5]||0,S[6]||0,ee)}}return new Date(y)}(b),this.$x=b.x||{},this.init()},E.init=function(){var b=this.$d;this.$y=b.getFullYear(),this.$M=b.getMonth(),this.$D=b.getDate(),this.$W=b.getDay(),this.$H=b.getHours(),this.$m=b.getMinutes(),this.$s=b.getSeconds(),this.$ms=b.getMilliseconds()},E.$utils=function(){return Y},E.isValid=function(){return this.$d.toString()!==h},E.isSame=function(b,N){var y=ne(b);return this.startOf(N)<=y&&y<=this.endOf(N)},E.isAfter=function(b,N){return ne(b)<this.startOf(N)},E.isBefore=function(b,N){return this.endOf(N)<ne(b)},E.$g=function(b,N,y){return Y.u(b)?this[N]:this.set(y,b)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(b,N){var y=this,C=!!Y.u(N)||N,S=Y.p(b),I=function(zt,Ie){var tt=Y.w(y.$u?Date.UTC(y.$y,Ie,zt):new Date(y.$y,Ie,zt),y);return C?tt:tt.endOf(o)},ee=function(zt,Ie){return Y.w(y.toDate()[zt].apply(y.toDate("s"),(C?[0,0,0,0]:[23,59,59,999]).slice(Ie)),y)},V=this.$W,se=this.$M,ae=this.$D,xe="set"+(this.$u?"UTC":"");switch(S){case d:return C?I(1,0):I(31,11);case l:return C?I(1,se):I(0,se+1);case u:var He=this.$locale().weekStart||0,et=(V<He?V+7:V)-He;return I(C?ae-et:ae+(6-et),se);case o:case f:return ee(xe+"Hours",0);case a:return ee(xe+"Minutes",1);case s:return ee(xe+"Seconds",2);case i:return ee(xe+"Milliseconds",3);default:return this.clone()}},E.endOf=function(b){return this.startOf(b,!1)},E.$set=function(b,N){var y,C=Y.p(b),S="set"+(this.$u?"UTC":""),I=(y={},y[o]=S+"Date",y[f]=S+"Date",y[l]=S+"Month",y[d]=S+"FullYear",y[a]=S+"Hours",y[s]=S+"Minutes",y[i]=S+"Seconds",y[n]=S+"Milliseconds",y)[C],ee=C===o?this.$D+(N-this.$W):N;if(C===l||C===d){var V=this.clone().set(f,1);V.$d[I](ee),V.init(),this.$d=V.set(f,Math.min(this.$D,V.daysInMonth())).$d}else I&&this.$d[I](ee);return this.init(),this},E.set=function(b,N){return this.clone().$set(b,N)},E.get=function(b){return this[Y.p(b)]()},E.add=function(b,N){var y,C=this;b=Number(b);var S=Y.p(N),I=function(se){var ae=ne(C);return Y.w(ae.date(ae.date()+Math.round(se*b)),C)};if(S===l)return this.set(l,this.$M+b);if(S===d)return this.set(d,this.$y+b);if(S===o)return I(1);if(S===u)return I(7);var ee=(y={},y[s]=e,y[a]=t,y[i]=r,y)[S]||1,V=this.$d.getTime()+b*ee;return Y.w(V,this)},E.subtract=function(b,N){return this.add(-1*b,N)},E.format=function(b){var N=this,y=this.$locale();if(!this.isValid())return y.invalidDate||h;var C=b||"YYYY-MM-DDTHH:mm:ssZ",S=Y.z(this),I=this.$H,ee=this.$m,V=this.$M,se=y.weekdays,ae=y.months,xe=function(Ie,tt,nn,Kt){return Ie&&(Ie[tt]||Ie(N,C))||nn[tt].substr(0,Kt)},He=function(Ie){return Y.s(I%12||12,Ie,"0")},et=y.meridiem||function(Ie,tt,nn){var Kt=Ie<12?"AM":"PM";return nn?Kt.toLowerCase():Kt},zt={YY:String(this.$y).slice(-2),YYYY:this.$y,M:V+1,MM:Y.s(V+1,2,"0"),MMM:xe(y.monthsShort,V,ae,3),MMMM:xe(ae,V),D:this.$D,DD:Y.s(this.$D,2,"0"),d:String(this.$W),dd:xe(y.weekdaysMin,this.$W,se,2),ddd:xe(y.weekdaysShort,this.$W,se,3),dddd:se[this.$W],H:String(I),HH:Y.s(I,2,"0"),h:He(1),hh:He(2),a:et(I,ee,!0),A:et(I,ee,!1),m:String(ee),mm:Y.s(ee,2,"0"),s:String(this.$s),ss:Y.s(this.$s,2,"0"),SSS:Y.s(this.$ms,3,"0"),Z:S};return C.replace(m,function(Ie,tt){return tt||zt[Ie]||S.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(b,N,y){var C,S=Y.p(N),I=ne(b),ee=(I.utcOffset()-this.utcOffset())*e,V=this-I,se=Y.m(this,I);return se=(C={},C[d]=se/12,C[l]=se,C[c]=se/3,C[u]=(V-ee)/6048e5,C[o]=(V-ee)/864e5,C[a]=V/t,C[s]=V/e,C[i]=V/r,C)[S]||V,y?se:Y.a(se)},E.daysInMonth=function(){return this.endOf(l).$D},E.$locale=function(){return z[this.$L]},E.locale=function(b,N){if(!b)return this.$L;var y=this.clone(),C=he(b,N,!0);return C&&(y.$L=C),y},E.clone=function(){return Y.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},A}(),Je=lt.prototype;return ne.prototype=Je,[["$ms",n],["$s",i],["$m",s],["$H",a],["$W",o],["$M",l],["$y",d],["$D",f]].forEach(function(A){Je[A[1]]=function(E){return this.$g(E,A[0],A[1])}}),ne.extend=function(A,E){return A.$i||(A(E,lt,ne),A.$i=!0),ne},ne.locale=he,ne.isDayjs=fe,ne.unix=function(A){return ne(1e3*A)},ne.en=z[k],ne.Ls=z,ne.p={},ne})});var Ue=p(br=>{"use strict";var ET=br&&br.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(br,"__esModule",{value:!0});br.findYearClosestToRef=br.findMostLikelyADYear=void 0;var wT=ET(X());function RT(r){return r<100&&(r>50?r=r+1900:r=r+2e3),r}br.findMostLikelyADYear=RT;function MT(r,e,t){let n=wT.default(r),i=n;i=i.month(t-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),a=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(a.diff(n))<Math.abs(i.diff(n))&&(i=a),i.year()}br.findYearClosestToRef=MT});var qe=p(L=>{"use strict";Object.defineProperty(L,"__esModule",{value:!0});L.parseTimeUnits=L.TIME_UNITS_PATTERN=L.parseYear=L.YEAR_PATTERN=L.parseOrdinalNumberPattern=L.ORDINAL_NUMBER_PATTERN=L.parseNumberPattern=L.NUMBER_PATTERN=L.TIME_UNIT_DICTIONARY=L.ORDINAL_WORD_DICTIONARY=L.INTEGER_WORD_DICTIONARY=L.MONTH_DICTIONARY=L.FULL_MONTH_NAME_DICTIONARY=L.WEEKDAY_DICTIONARY=void 0;var Fs=re(),DT=Ue();L.WEEKDAY_DICTIONARY={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6};L.FULL_MONTH_NAME_DICTIONARY={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12};L.MONTH_DICTIONARY=Object.assign(Object.assign({},L.FULL_MONTH_NAME_DICTIONARY),{jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12});L.INTEGER_WORD_DICTIONARY={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12};L.ORDINAL_WORD_DICTIONARY={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31};L.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconds:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year"};L.NUMBER_PATTERN=`(?:${Fs.matchAnyPattern(L.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function mp(r){let e=r.toLowerCase();return L.INTEGER_WORD_DICTIONARY[e]!==void 0?L.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}L.parseNumberPattern=mp;L.ORDINAL_NUMBER_PATTERN=`(?:${Fs.matchAnyPattern(L.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function OT(r){let e=r.toLowerCase();return L.ORDINAL_WORD_DICTIONARY[e]!==void 0?L.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}L.parseOrdinalNumberPattern=OT;L.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function PT(r){if(/BE/i.test(r))return r=r.replace(/BE/i,""),parseInt(r)-543;if(/BCE?/i.test(r))return r=r.replace(/BCE?/i,""),-parseInt(r);if(/(AD|CE)/i.test(r))return r=r.replace(/(AD|CE)/i,""),parseInt(r);let e=parseInt(r);return DT.findMostLikelyADYear(e)}L.parseYear=PT;var yp=`(${L.NUMBER_PATTERN})\\s{0,3}(${Fs.matchAnyPattern(L.TIME_UNIT_DICTIONARY)})`,hp=new RegExp(yp,"i");L.TIME_UNITS_PATTERN=Fs.repeatedTimeunitPattern("(?:(?:about|around)\\s{0,3})?",yp);function kT(r){let e={},t=r,n=hp.exec(t);for(;n;)AT(e,n),t=t.substring(n[0].length).trim(),n=hp.exec(t);return e}L.parseTimeUnits=kT;function AT(r,e){let t=mp(e[1]),n=L.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var gp=p((Eo,wo)=>{(function(r,e){typeof Eo=="object"&&typeof wo!="undefined"?wo.exports=e():typeof define=="function"&&define.amd?define(e):(r=typeof globalThis!="undefined"?globalThis:r||self).dayjs_plugin_quarterOfYear=e()})(Eo,function(){"use strict";var r="month",e="quarter";return function(t,n){var i=n.prototype;i.quarter=function(o){return this.$utils().u(o)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(o-1))};var s=i.add;i.add=function(o,u){return o=Number(o),this.$utils().p(u)===e?this.add(3*o,r):s.bind(this)(o,u)};var a=i.startOf;i.startOf=function(o,u){var l=this.$utils(),c=!!l.u(u)||u;if(l.p(o)===e){var d=this.quarter()-1;return c?this.month(3*d).startOf(r).startOf("day"):this.month(3*d+2).endOf(r).endOf("day")}return a.bind(this)(o,u)}}})});var pt=p(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.implySimilarTime=Lt.assignSimilarTime=Lt.assignSimilarDate=Lt.assignTheNextDay=void 0;var _p=we();function ST(r,e){e=e.add(1,"day"),Tp(r,e),bp(r,e)}Lt.assignTheNextDay=ST;function Tp(r,e){r.assign("day",e.date()),r.assign("month",e.month()+1),r.assign("year",e.year())}Lt.assignSimilarDate=Tp;function NT(r,e){r.assign("hour",e.hour()),r.assign("minute",e.minute()),r.assign("second",e.second()),r.assign("millisecond",e.millisecond()),r.get("hour")<12?r.assign("meridiem",_p.Meridiem.AM):r.assign("meridiem",_p.Meridiem.PM)}Lt.assignSimilarTime=NT;function bp(r,e){r.imply("hour",e.hour()),r.imply("minute",e.minute()),r.imply("second",e.second()),r.imply("millisecond",e.millisecond())}Lt.implySimilarTime=bp});var vp=p(Ir=>{"use strict";Object.defineProperty(Ir,"__esModule",{value:!0});Ir.toTimezoneOffset=Ir.TIMEZONE_ABBR_MAP=void 0;Ir.TIMEZONE_ABBR_MAP={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function CT(r){var e;return r==null?null:typeof r=="number"?r:(e=Ir.TIMEZONE_ABBR_MAP[r])!==null&&e!==void 0?e:null}Ir.toTimezoneOffset=CT});var me=p(Wt=>{"use strict";var Ep=Wt&&Wt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wt,"__esModule",{value:!0});Wt.ParsingResult=Wt.ParsingComponents=Wt.ReferenceWithTimezone=void 0;var xT=Ep(gp()),Us=Ep(X()),Ro=pt(),IT=vp();Us.default.extend(xT.default);var Mo=class{constructor(e){var t;e=e!=null?e:new Date,e instanceof Date?this.instant=e:(this.instant=(t=e.instant)!==null&&t!==void 0?t:new Date,this.timezoneOffset=IT.toTimezoneOffset(e.timezone))}};Wt.ReferenceWithTimezone=Mo;var Fr=class{constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(let i in t)this.knownValues[i]=t[i];let n=Us.default(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues?this:(this.impliedValues[e]=t,this)}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new Fr(this.reference);e.knownValues={},e.impliedValues={};for(let t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(let t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyDayMonthComponent(){return this.isCertain("day")&&this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return Us.default(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment();return new Date(e.getTime()+this.getSystemTimezoneAdjustmentMinute(e)*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}getSystemTimezoneAdjustmentMinute(e){var t,n;(!e||e.getTime()<0)&&(e=new Date);let i=-e.getTimezoneOffset(),s=(n=(t=this.get("timezoneOffset"))!==null&&t!==void 0?t:this.reference.timezoneOffset)!==null&&n!==void 0?n:i;return i-s}static createRelativeFromReference(e,t){let n=Us.default(e.instant);for(let s in t)n=n.add(t[s],s);let i=new Fr(e);return t.hour||t.minute||t.second?(Ro.assignSimilarTime(i,n),Ro.assignSimilarDate(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Ro.implySimilarTime(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),t.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(t.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),t.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),t.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}};Wt.ParsingComponents=Fr;var si=class{constructor(e,t,n,i,s){this.reference=e,this.refDate=e.instant,this.index=t,this.text=n,this.start=i||new Fr(e),this.end=s}clone(){let e=new si(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};Wt.ParsingResult=si});var M=p(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.AbstractParserWithWordBoundaryChecking=void 0;var Do=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let t=this.innerPattern(e);return t==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${t.source}`,t.flags),this.cachedInnerPattern=t,this.cachedPattern)}extract(e,t){var n;let i=(n=t[1])!==null&&n!==void 0?n:"";t.index=t.index+i.length,t[0]=t[0].substring(i.length);for(let s=2;s<t.length;s++)t[s-1]=t[s];return this.innerExtract(e,t)}};qs.AbstractParserWithWordBoundaryChecking=Do});var wp=p(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});var Po=qe(),FT=me(),UT=M(),qT=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),LT=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Po.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),Oo=class extends UT.AbstractParserWithWordBoundaryChecking{innerPattern(e){return e.option.forwardDate?LT:qT}innerExtract(e,t){let n=Po.parseTimeUnits(t[1]);return FT.ParsingComponents.createRelativeFromReference(e.reference,n)}};ko.default=Oo});var kp=p(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});var WT=Ue(),Op=qe(),Pp=qe(),Ls=qe(),YT=re(),$T=M(),jT=new RegExp(`(?:on\\s{0,3})?(${Ls.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Ls.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${YT.matchAnyPattern(Op.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s{0,3})(${Pp.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Rp=1,Mp=2,BT=3,Dp=4,Ao=class extends $T.AbstractParserWithWordBoundaryChecking{innerPattern(){return jT}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Op.MONTH_DICTIONARY[t[BT].toLowerCase()],s=Ls.parseOrdinalNumberPattern(t[Rp]);if(s>31)return t.index=t.index+t[Rp].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Dp]){let a=Pp.parseYear(t[Dp]);n.start.assign("year",a)}else{let a=WT.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Mp]){let a=Ls.parseOrdinalNumberPattern(t[Mp]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};So.default=Ao});var xp=p(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});var GT=Ue(),Np=qe(),Ws=qe(),Cp=qe(),HT=re(),zT=M(),KT=new RegExp(`(${HT.matchAnyPattern(Np.MONTH_DICTIONARY)})(?:-|/|\\s*,?\\s*)(${Ws.ORDINAL_NUMBER_PATTERN})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Ws.ORDINAL_NUMBER_PATTERN})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Cp.YEAR_PATTERN}))?(?=\\W|$)(?!\\:\\d)`,"i"),VT=1,XT=2,Ap=3,Sp=4,No=class extends zT.AbstractParserWithWordBoundaryChecking{innerPattern(){return KT}innerExtract(e,t){let n=Np.MONTH_DICTIONARY[t[VT].toLowerCase()],i=Ws.parseOrdinalNumberPattern(t[XT]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(t[Sp]){let u=Cp.parseYear(t[Sp]);s.assign("year",u)}else{let u=GT.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[Ap])return s;let a=Ws.parseOrdinalNumberPattern(t[Ap]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Co.default=No});var Up=p(Fo=>{"use strict";Object.defineProperty(Fo,"__esModule",{value:!0});var xo=qe(),ZT=Ue(),QT=re(),Fp=qe(),JT=M(),eb=new RegExp(`((?:in)\\s*)?(${QT.matchAnyPattern(xo.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Fp.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),tb=1,rb=2,Ip=3,Io=class extends JT.AbstractParserWithWordBoundaryChecking{innerPattern(){return eb}innerExtract(e,t){let n=t[rb].toLowerCase();if(t[0].length<=3&&!xo.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index+(t[tb]||"").length,t.index+t[0].length);i.start.imply("day",1);let s=xo.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Ip]){let a=Fp.parseYear(t[Ip]);i.start.assign("year",a)}else{let a=ZT.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Fo.default=Io});var Wp=p(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});var Lp=qe(),nb=re(),ib=M(),sb=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${nb.matchAnyPattern(Lp.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),ab=1,ob=2,qp=3,ub=4,Uo=class extends ib.AbstractParserWithWordBoundaryChecking{innerPattern(){return sb}innerExtract(e,t){let n=t[qp]?parseInt(t[qp]):Lp.MONTH_DICTIONARY[t[ob].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[ab]);return{day:parseInt(t[ub]),month:n,year:i}}};qo.default=Uo});var Yp=p(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});var lb=M(),cb=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),db=1,fb=2,Lo=class extends lb.AbstractParserWithWordBoundaryChecking{innerPattern(){return cb}innerExtract(e,t){let n=parseInt(t[fb]),i=parseInt(t[db]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Wo.default=Lo});var Ur=p(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.AbstractTimeExpressionParser=void 0;var Ge=we();function pb(r,e,t,n){return new RegExp(`${r}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,n)}function hb(r,e){return new RegExp(`^(${r})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var $p=2,pn=3,Ys=4,$s=5,ai=6,Yo=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){let n=this.extractPrimaryTimeComponents(e,t);if(!n)return t.index+=t[0].length,null;let i=t.index+t[1].length,s=t[0].substring(t[1].length),a=e.createParsingResult(i,s,n);t.index+=t[0].length;let o=e.text.substring(t.index),l=this.getFollowingTimePatternThroughCache().exec(o);return s.match(/^\d{3,4}/)&&l&&l[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!l||l[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(a):(a.end=this.extractFollowingTimeComponents(e,l,a),a.end&&(a.text+=l[0]),this.checkAndReturnWithFollowingPattern(a))}extractPrimaryTimeComponents(e,t,n=!1){let i=e.createParsingComponents(),s=0,a=null,o=parseInt(t[$p]);if(o>100){if(this.strictMode||t[pn]!=null)return null;s=o%100,o=Math.floor(o/100)}if(o>24)return null;if(t[pn]!=null){if(t[pn].length==1&&!t[ai])return null;s=parseInt(t[pn])}if(s>=60)return null;if(o>12&&(a=Ge.Meridiem.PM),t[ai]!=null){if(o>12)return null;let u=t[ai][0].toLowerCase();u=="a"&&(a=Ge.Meridiem.AM,o==12&&(o=0)),u=="p"&&(a=Ge.Meridiem.PM,o!=12&&(o+=12))}if(i.assign("hour",o),i.assign("minute",s),a!==null?i.assign("meridiem",a):o<12?i.imply("meridiem",Ge.Meridiem.AM):i.imply("meridiem",Ge.Meridiem.PM),t[$s]!=null){let u=parseInt(t[$s].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ys]!=null){let u=parseInt(t[Ys]);if(u>=60)return null;i.assign("second",u)}return i}extractFollowingTimeComponents(e,t,n){let i=e.createParsingComponents();if(t[$s]!=null){let u=parseInt(t[$s].substring(0,3));if(u>=1e3)return null;i.assign("millisecond",u)}if(t[Ys]!=null){let u=parseInt(t[Ys]);if(u>=60)return null;i.assign("second",u)}let s=parseInt(t[$p]),a=0,o=-1;if(t[pn]!=null?a=parseInt(t[pn]):s>100&&(a=s%100,s=Math.floor(s/100)),a>=60||s>24)return null;if(s>=12&&(o=Ge.Meridiem.PM),t[ai]!=null){if(s>12)return null;let u=t[ai][0].toLowerCase();u=="a"&&(o=Ge.Meridiem.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),u=="p"&&(o=Ge.Meridiem.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(o==Ge.Meridiem.AM?(n.start.imply("meridiem",Ge.Meridiem.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",Ge.Meridiem.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",a),o>=0?i.assign("meridiem",o):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",Ge.Meridiem.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",Ge.Meridiem.PM)):s>12?i.imply("meridiem",Ge.Meridiem.PM):s<=12&&i.imply("meridiem",Ge.Meridiem.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){let n=t[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;let n=t[1],i=t[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),a=parseInt(n);if(s>24||a>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=pb(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=hb(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t,this.cachedFollowingTimePatten)}};js.AbstractTimeExpressionParser=Yo});var jp=p(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});var Bs=we(),mb=Ur(),$o=class extends mb.AbstractTimeExpressionParser{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Bs.Meridiem.PM)):i<6&&n.assign("meridiem",Bs.Meridiem.AM)}if(t[0].endsWith("afternoon")){n.assign("meridiem",Bs.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("morning")&&(n.assign("meridiem",Bs.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};jo.default=$o});var ht=p(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.addImpliedTimeUnits=hn.reverseTimeUnits=void 0;function yb(r){let e={};for(let t in r)e[t]=-r[t];return e}hn.reverseTimeUnits=yb;function gb(r,e){let t=r.clone(),n=r.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(t.imply("day",n.date()),t.imply("month",n.month()+1),t.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(t.imply("second",n.second()),t.imply("minute",n.minute()),t.imply("hour",n.hour())),t}hn.addImpliedTimeUnits=gb});var Bp=p(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});var Go=qe(),_b=me(),Tb=M(),bb=ht(),vb=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}(?:ago|before|earlier)(?=(?:\\W|$))`,"i"),Eb=new RegExp(`(${Go.TIME_UNITS_PATTERN})\\s{0,5}ago(?=(?:\\W|$))`,"i"),Bo=class extends Tb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Eb:vb}innerExtract(e,t){let n=Go.parseTimeUnits(t[1]),i=bb.reverseTimeUnits(n);return _b.ParsingComponents.createRelativeFromReference(e.reference,i)}};Ho.default=Bo});var Gp=p(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});var Ko=qe(),wb=me(),Rb=M(),Mb=new RegExp(`(${Ko.TIME_UNITS_PATTERN})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),Db=new RegExp("("+Ko.TIME_UNITS_PATTERN+")(later|from now)(?=(?:\\W|$))","i"),Ob=1,zo=class extends Rb.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?Db:Mb}innerExtract(e,t){let n=Ko.parseTimeUnits(t[Ob]);return wb.ParsingComponents.createRelativeFromReference(e.reference,n)}};Vo.default=zo});var yn=p(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});mn.MergingRefiner=mn.Filter=void 0;var Xo=class{refine(e,t){return t.filter(n=>this.isValid(e,n))}};mn.Filter=Xo;var Zo=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0],s=null;for(let a=1;a<t.length;a++){s=t[a];let o=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(o,i,s,e))n.push(i),i=s;else{let u=i,l=s,c=this.mergeResults(o,u,l,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${u} and ${l} into ${c}`)}),i=c}}return i!=null&&n.push(i),n}};mn.MergingRefiner=Zo});var Yt=p(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});var Pb=yn(),Qo=class extends Pb.MergingRefiner{shouldMergeResults(e,t,n){return!t.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){if(!t.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{t.start.isCertain(s)||t.start.assign(s,n.start.get(s))}),t.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.assign(s,t.start.get(s))})),t.start.date().getTime()>n.start.date().getTime()){let s=t.start.dayjs(),a=n.start.dayjs();t.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(a)?(s=s.add(-7,"days"),t.start.imply("day",s.date()),t.start.imply("month",s.month()+1),t.start.imply("year",s.year())):n.start.isOnlyWeekdayComponent()&&a.add(7,"days").isAfter(s)?(a=a.add(7,"days"),n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())):[n,t]=[t,n]}let i=t.clone();return i.start=t.start,i.end=n.start,i.index=Math.min(t.index,n.index),t.index<n.index?i.text=t.text+e+n.text:i.text=n.text+e+t.text,i}};Jo.default=Qo});var Hp=p(oi=>{"use strict";var kb=oi&&oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(oi,"__esModule",{value:!0});var Ab=kb(Yt()),eu=class extends Ab.default{patternBetween(){return/^\s*(to|-)\s*$/i}};oi.default=eu});var zp=p(gn=>{"use strict";Object.defineProperty(gn,"__esModule",{value:!0});gn.mergeDateTimeComponent=gn.mergeDateTimeResult=void 0;var Sb=we();function Nb(r,e){let t=r.clone(),n=r.start,i=e.start;if(t.start=tu(n,i),r.end!=null||e.end!=null){let s=r.end==null?r.start:r.end,a=e.end==null?e.start:e.end,o=tu(s,a);r.end==null&&o.date().getTime()<t.start.date().getTime()&&(o.isCertain("day")?o.assign("day",o.get("day")+1):o.imply("day",o.get("day")+1)),t.end=o}return t}gn.mergeDateTimeResult=Nb;function tu(r,e){let t=r.clone();return e.isCertain("hour")?(t.assign("hour",e.get("hour")),t.assign("minute",e.get("minute")),e.isCertain("second")?(t.assign("second",e.get("second")),e.isCertain("millisecond")?t.assign("millisecond",e.get("millisecond")):t.imply("millisecond",e.get("millisecond"))):(t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond")))):(t.imply("hour",e.get("hour")),t.imply("minute",e.get("minute")),t.imply("second",e.get("second")),t.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&t.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?t.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&t.get("meridiem")==null&&t.imply("meridiem",e.get("meridiem")),t.get("meridiem")==Sb.Meridiem.PM&&t.get("hour")<12&&(e.isCertain("hour")?t.assign("hour",t.get("hour")+12):t.imply("hour",t.get("hour")+12)),t}gn.mergeDateTimeComponent=tu});var Zt=p(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});var Cb=yn(),Kp=zp(),ru=class extends Cb.MergingRefiner{shouldMergeResults(e,t,n){return(t.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&t.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,t,n){let i=t.start.isOnlyDate()?Kp.mergeDateTimeResult(t,n):Kp.mergeDateTimeResult(n,t);return i.index=t.index,i.text=t.text+e+n.text,i}};nu.default=ru});var Vp=p(ui=>{"use strict";var xb=ui&&ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ui,"__esModule",{value:!0});var Ib=xb(Zt()),iu=class extends Ib.default{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};ui.default=iu});var Xp=p(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});var Fb=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),Ub={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:60,CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:-300,FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:240,MST:-420,MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:-480,PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360},su=class{constructor(e){this.timezone=Object.assign(Object.assign({},Ub),e)}refine(e,t){var n;let i=(n=e.option.timezones)!==null&&n!==void 0?n:{};return t.forEach(s=>{var a,o;let u=e.text.substring(s.index+s.text.length),l=Fb.exec(u);if(!l)return;let c=l[1].toUpperCase(),d=(o=(a=i[c])!==null&&a!==void 0?a:this.timezone[c])!==null&&o!==void 0?o:null;if(d===null)return;e.debug(()=>{console.log(`Extracting timezone: '${c}' into: ${d} for: ${s.start}`)});let f=s.start.get("timezoneOffset");f!==null&&d!=f&&(s.start.isCertain("timezoneOffset")||c!=l[1])||s.start.isOnlyDate()&&c!=l[1]||(s.text+=l[0],s.start.isCertain("timezoneOffset")||s.start.assign("timezoneOffset",d),s.end!=null&&!s.end.isCertain("timezoneOffset")&&s.end.assign("timezoneOffset",d))}),t}};au.default=su});var Gs=p(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});var qb=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),Lb=1,Wb=2,Yb=3,ou=class{refine(e,t){return t.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=qb.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let a=parseInt(s[Wb]),o=parseInt(s[Yb]||"0"),u=a*60+o;u>14*60||(s[Lb]==="-"&&(u=-u),n.end!=null&&n.end.assign("timezoneOffset",u),n.start.assign("timezoneOffset",u),n.text+=s[0])}),t}};uu.default=ou});var Zp=p(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});var lu=class{refine(e,t){if(t.length<2)return t;let n=[],i=t[0];for(let s=1;s<t.length;s++){let a=t[s];a.index<i.index+i.text.length?a.text.length>i.text.length&&(i=a):(n.push(i),i=a)}return i!=null&&n.push(i),n}};cu.default=lu});var Qp=p(li=>{"use strict";var $b=li&&li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(li,"__esModule",{value:!0});var jb=$b(X()),du=class{refine(e,t){return e.option.forwardDate&&t.forEach(function(n){let i=jb.default(e.refDate);if(n.start.isOnlyDayMonthComponent()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}));n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)})))}),t}};li.default=du});var Jp=p(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});var Bb=yn(),fu=class extends Bb.Filter{constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,t):!0:(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return t.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1):t.start.isOnlyTime()&&(!t.start.isCertain("hour")||!t.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${t} (${t.end})`)}),!1):!0}};pu.default=fu});var yu=p(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});var Gb=M(),Hb=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),zb=1,Kb=2,Vb=3,eh=4,Xb=5,th=6,rh=7,nh=8,ih=9,hu=class extends Gb.AbstractParserWithWordBoundaryChecking{innerPattern(){return Hb}innerExtract(e,t){let n={};if(n.year=parseInt(t[zb]),n.month=parseInt(t[Kb]),n.day=parseInt(t[Vb]),t[eh]!=null)if(n.hour=parseInt(t[eh]),n.minute=parseInt(t[Xb]),t[th]!=null&&(n.second=parseInt(t[th])),t[rh]!=null&&(n.millisecond=parseInt(t[rh])),t[nh]==null)n.timezoneOffset=0;else{let i=parseInt(t[nh]),s=0;t[ih]!=null&&(s=parseInt(t[ih]));let a=i*60;a<0?a-=s:a+=s,n.timezoneOffset=a}return n}};mu.default=hu});var sh=p(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});var Zb=yn(),gu=class extends Zb.MergingRefiner{mergeResults(e,t,n){let i=n.clone();return i.index=t.index,i.text=t.text+e+i.text,i.start.assign("weekday",t.start.get("weekday")),i.end&&i.end.assign("weekday",t.start.get("weekday")),i}shouldMergeResults(e,t,n){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};_u.default=gu});var Qt=p(_n=>{"use strict";var qr=_n&&_n.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_n,"__esModule",{value:!0});_n.includeCommonConfiguration=void 0;var Qb=qr(Xp()),Jb=qr(Gs()),ah=qr(Zp()),ev=qr(Qp()),tv=qr(Jp()),rv=qr(yu()),nv=qr(sh());function iv(r,e=!1){return r.parsers.unshift(new rv.default),r.refiners.unshift(new nv.default),r.refiners.unshift(new Qb.default),r.refiners.unshift(new Jb.default),r.refiners.unshift(new ah.default),r.refiners.push(new ah.default),r.refiners.push(new ev.default),r.refiners.push(new tv.default(e)),r}_n.includeCommonConfiguration=iv});var er=p(te=>{"use strict";var sv=te&&te.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(te,"__esModule",{value:!0});te.noon=te.morning=te.midnight=te.yesterdayEvening=te.evening=te.lastNight=te.tonight=te.theDayAfter=te.tomorrow=te.theDayBefore=te.yesterday=te.today=te.now=void 0;var $t=me(),Tn=sv(X()),Jt=pt(),ci=we();function av(r){let e=Tn.default(r.instant),t=new $t.ParsingComponents(r,{});return Jt.assignSimilarDate(t,e),Jt.assignSimilarTime(t,e),r.timezoneOffset!==null&&t.assign("timezoneOffset",e.utcOffset()),t}te.now=av;function ov(r){let e=Tn.default(r.instant),t=new $t.ParsingComponents(r,{});return Jt.assignSimilarDate(t,e),Jt.implySimilarTime(t,e),t}te.today=ov;function uv(r){return oh(r,1)}te.yesterday=uv;function oh(r,e){return Tu(r,-e)}te.theDayBefore=oh;function lv(r){return Tu(r,1)}te.tomorrow=lv;function Tu(r,e){let t=Tn.default(r.instant),n=new $t.ParsingComponents(r,{});return t=t.add(e,"day"),Jt.assignSimilarDate(n,t),Jt.implySimilarTime(n,t),n}te.theDayAfter=Tu;function cv(r,e=22){let t=Tn.default(r.instant),n=new $t.ParsingComponents(r,{});return n.imply("hour",e),n.imply("meridiem",ci.Meridiem.PM),Jt.assignSimilarDate(n,t),n}te.tonight=cv;function dv(r,e=0){let t=Tn.default(r.instant),n=new $t.ParsingComponents(r,{});return t.hour()<6&&(t=t.add(-1,"day")),Jt.assignSimilarDate(n,t),n.imply("hour",e),n}te.lastNight=dv;function fv(r,e=20){let t=new $t.ParsingComponents(r,{});return t.imply("meridiem",ci.Meridiem.PM),t.imply("hour",e),t}te.evening=fv;function pv(r,e=20){let t=Tn.default(r.instant),n=new $t.ParsingComponents(r,{});return t=t.add(-1,"day"),Jt.assignSimilarDate(n,t),n.imply("hour",e),n.imply("meridiem",ci.Meridiem.PM),n}te.yesterdayEvening=pv;function hv(r){let e=new $t.ParsingComponents(r,{});return e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e}te.midnight=hv;function mv(r,e=6){let t=new $t.ParsingComponents(r,{});return t.imply("meridiem",ci.Meridiem.AM),t.imply("hour",e),t}te.morning=mv;function yv(r){let e=new $t.ParsingComponents(r,{});return e.imply("meridiem",ci.Meridiem.AM),e.imply("hour",12),e}te.noon=yv});var uh=p(Rt=>{"use strict";var gv=Rt&&Rt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),_v=Rt&&Rt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Tv=Rt&&Rt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&gv(e,r,t);return _v(e,r),e},bv=Rt&&Rt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Rt,"__esModule",{value:!0});var vv=bv(X()),Ev=M(),wv=pt(),di=Tv(er()),Rv=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,bu=class extends Ev.AbstractParserWithWordBoundaryChecking{innerPattern(e){return Rv}innerExtract(e,t){let n=vv.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return di.now(e.reference);case"today":return di.today(e.reference);case"yesterday":return di.yesterday(e.reference);case"tomorrow":case"tmr":case"tmrw":return di.tomorrow(e.reference);case"tonight":return di.tonight(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),wv.assignSimilarDate(s,n),s.imply("hour",0));break}return s}};Rt.default=bu});var lh=p(fi=>{"use strict";var Mv=fi&&fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(fi,"__esModule",{value:!0});var Hs=we(),Dv=M(),Ov=Mv(X()),Pv=pt(),kv=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|noon)(?=\W|$)/i,vu=class extends Dv.AbstractParserWithWordBoundaryChecking{innerPattern(){return kv}innerExtract(e,t){let n=Ov.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"afternoon":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",15);break;case"evening":case"night":i.imply("meridiem",Hs.Meridiem.PM),i.imply("hour",20);break;case"midnight":Pv.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"morning":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",6);break;case"noon":i.imply("meridiem",Hs.Meridiem.AM),i.imply("hour",12);break}return i}};fi.default=vu});var Lr=p(vr=>{"use strict";var Av=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});vr.toDayJSClosestWeekday=vr.toDayJSWeekday=void 0;var ch=Av(X());function Sv(r,e,t){if(!t)return dh(r,e);let n=ch.default(r);switch(t){case"this":n=n.day(e);break;case"next":n=n.day(e+7);break;case"last":n=n.day(e-7);break}return n}vr.toDayJSWeekday=Sv;function dh(r,e){let t=ch.default(r),n=t.day();return Math.abs(e-7-n)<Math.abs(e-n)?t=t.day(e-7):Math.abs(e+7-n)<Math.abs(e-n)?t=t.day(e+7):t=t.day(e),t}vr.toDayJSClosestWeekday=dh});var ph=p(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});var fh=qe(),Nv=re(),Cv=M(),xv=Lr(),Iv=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Nv.matchAnyPattern(fh.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),Fv=1,Uv=2,qv=3,Eu=class extends Cv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Iv}innerExtract(e,t){let n=t[Uv].toLowerCase(),i=fh.WEEKDAY_DICTIONARY[n],s=t[Fv],a=t[qv],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="last"||o=="past"?u="last":o=="next"?u="next":o=="this"&&(u="this");let l=xv.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};wu.default=Eu});var yh=p(pi=>{"use strict";var Lv=pi&&pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(pi,"__esModule",{value:!0});var mh=qe(),hh=me(),Wv=Lv(X()),Yv=M(),$v=re(),jv=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${$v.matchAnyPattern(mh.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),Bv=1,Gv=2,Ru=class extends Yv.AbstractParserWithWordBoundaryChecking{innerPattern(){return jv}innerExtract(e,t){let n=t[Bv].toLowerCase(),i=t[Gv].toLowerCase(),s=mh.TIME_UNIT_DICTIONARY[i];if(n=="next"||n.startsWith("after")){let u={};return u[s]=1,hh.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="last"||n=="past"){let u={};return u[s]=-1,hh.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=Wv.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};pi.default=Ru});var Mt=p(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.ParsingContext=En.Chrono=void 0;var bn=me(),Hv=Mu(),vn=class{constructor(e){e=e||Hv.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new vn({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,n){let i=this.parse(e,t,n);return i.length>0?i[0].start.date():null}parse(e,t,n){let i=new zs(e,t,n),s=[];return this.parsers.forEach(a=>{let o=vn.executeParser(i,a);s=s.concat(o)}),s.sort((a,o)=>a.index-o.index),this.refiners.forEach(function(a){s=a.refine(i,s)}),s}static executeParser(e,t){let n=[],i=t.pattern(e),s=e.text,a=e.text,o=i.exec(a);for(;o;){let u=o.index+s.length-a.length;o.index=u;let l=t.extract(e,o);if(!l){a=s.substring(o.index+1),o=i.exec(a);continue}let c=null;l instanceof bn.ParsingResult?c=l:l instanceof bn.ParsingComponents?(c=e.createParsingResult(o.index,o[0]),c.start=l):c=e.createParsingResult(o.index,o[0],l),e.debug(()=>console.log(`${t.constructor.name} extracted result ${c}`)),n.push(c),a=s.substring(u+c.text.length),o=i.exec(a)}return n}};En.Chrono=vn;var zs=class{constructor(e,t,n){this.text=e,this.reference=new bn.ReferenceWithTimezone(t),this.option=n!=null?n:{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof bn.ParsingComponents?e:new bn.ParsingComponents(this.reference,e)}createParsingResult(e,t,n,i){let s=typeof t=="string"?t:this.text.substring(e,t),a=n?this.createParsingComponents(n):null,o=i?this.createParsingComponents(i):null;return new bn.ParsingResult(this.reference,e,s,a,o)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};En.ParsingContext=zs});var Wr=p(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});var gh=Ue(),zv=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),Ks=1,_h=5,Th=2,bh=3,Du=4,Ou=class{constructor(e){this.groupNumberMonth=e?bh:Th,this.groupNumberDay=e?Th:bh}pattern(){return zv}extract(e,t){if(t[Ks]=="/"||t[_h]=="/"){t.index+=t[0].length;return}let n=t.index+t[Ks].length,i=t[0].substr(t[Ks].length,t[0].length-t[Ks].length-t[_h].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!t[Du]&&t[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),a=parseInt(t[this.groupNumberMonth]),o=parseInt(t[this.groupNumberDay]);if((a<1||a>12)&&a>12)if(o>=1&&o<=12&&a<=31)[o,a]=[a,o];else return null;if(o<1||o>31)return null;if(s.start.assign("day",o),s.start.assign("month",a),t[Du]){let u=parseInt(t[Du]),l=gh.findMostLikelyADYear(u);s.start.assign("year",l)}else{let u=gh.findYearClosestToRef(e.refDate,o,a);s.start.imply("year",u)}return s}};Pu.default=Ou});var Eh=p(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});var vh=qe(),Kv=me(),Vv=M(),Xv=ht(),Zv=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${vh.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),ku=class extends Vv.AbstractParserWithWordBoundaryChecking{innerPattern(){return Zv}innerExtract(e,t){let n=t[1].toLowerCase(),i=vh.parseTimeUnits(t[2]);switch(n){case"last":case"past":case"-":i=Xv.reverseTimeUnits(i);break}return Kv.ParsingComponents.createRelativeFromReference(e.reference,i)}};Au.default=ku});var Rh=p(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});var Qv=yn(),Su=me(),Jv=qe(),e1=ht();function wh(r){return r.text.match(/\s+(before|from)$/i)!=null}function t1(r){return r.text.match(/\s+(after|since)$/i)!=null}var Nu=class extends Qv.MergingRefiner{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,n){return!e.match(this.patternBetween())||!wh(t)&&!t1(t)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,t,n){let i=Jv.parseTimeUnits(t.text);wh(t)&&(i=e1.reverseTimeUnits(i));let s=Su.ParsingComponents.createRelativeFromReference(new Su.ReferenceWithTimezone(n.start.date()),i);return new Su.ParsingResult(n.reference,t.index,`${t.text}${e}${n.text}`,s)}};Cu.default=Nu});var Mu=p(be=>{"use strict";var De=be&&be.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(be,"__esModule",{value:!0});be.createConfiguration=be.createCasualConfiguration=be.parseDate=be.parse=be.GB=be.strict=be.casual=void 0;var r1=De(wp()),n1=De(kp()),i1=De(xp()),s1=De(Up()),a1=De(Wp()),o1=De(Yp()),u1=De(jp()),l1=De(Bp()),c1=De(Gp()),d1=De(Hp()),f1=De(Vp()),p1=Qt(),h1=De(uh()),m1=De(lh()),y1=De(ph()),g1=De(yh()),xu=Mt(),_1=De(Wr()),T1=De(Eh()),b1=De(Rh());be.casual=new xu.Chrono(Mh(!1));be.strict=new xu.Chrono(Vs(!0,!1));be.GB=new xu.Chrono(Vs(!1,!0));function v1(r,e,t){return be.casual.parse(r,e,t)}be.parse=v1;function E1(r,e,t){return be.casual.parseDate(r,e,t)}be.parseDate=E1;function Mh(r=!1){let e=Vs(!1,r);return e.parsers.unshift(new h1.default),e.parsers.unshift(new m1.default),e.parsers.unshift(new s1.default),e.parsers.unshift(new g1.default),e.parsers.unshift(new T1.default),e}be.createCasualConfiguration=Mh;function Vs(r=!0,e=!1){return p1.includeCommonConfiguration({parsers:[new _1.default(e),new r1.default,new n1.default,new i1.default,new y1.default,new a1.default,new o1.default,new u1.default(r),new l1.default(r),new c1.default(r)],refiners:[new b1.default,new f1.default,new d1.default]},r)}be.createConfiguration=Vs});var Dh=p(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});var w1=Ur(),Iu=class extends w1.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:um|von)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|bis)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Fu.default=Iu});var hi=p(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});ie.parseTimeUnits=ie.TIME_UNITS_PATTERN=ie.parseYear=ie.YEAR_PATTERN=ie.parseNumberPattern=ie.NUMBER_PATTERN=ie.TIME_UNIT_DICTIONARY=ie.INTEGER_WORD_DICTIONARY=ie.MONTH_DICTIONARY=ie.WEEKDAY_DICTIONARY=void 0;var Uu=re(),R1=Ue();ie.WEEKDAY_DICTIONARY={sonntag:0,so:0,montag:1,mo:1,dienstag:2,di:2,mittwoch:3,mi:3,donnerstag:4,do:4,freitag:5,fr:5,samstag:6,sa:6};ie.MONTH_DICTIONARY={januar:1,j\u00E4nner:1,janner:1,jan:1,"jan.":1,februar:2,feber:2,feb:2,"feb.":2,m\u00E4rz:3,maerz:3,m\u00E4r:3,"m\xE4r.":3,mrz:3,"mrz.":3,april:4,apr:4,"apr.":4,mai:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,august:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,dezember:12,dez:12,"dez.":12};ie.INTEGER_WORD_DICTIONARY={eins:1,eine:1,einem:1,einen:1,einer:1,zwei:2,drei:3,vier:4,f\u00FCnf:5,fuenf:5,sechs:6,sieben:7,acht:8,neun:9,zehn:10,elf:11,zw\u00F6lf:12,zwoelf:12};ie.TIME_UNIT_DICTIONARY={sek:"second",sekunde:"second",sekunden:"second",min:"minute",minute:"minute",minuten:"minute",h:"hour",std:"hour",stunde:"hour",stunden:"hour",tag:"d",tage:"d",tagen:"d",woche:"week",wochen:"week",monat:"month",monate:"month",monaten:"month",monats:"month",quartal:"quarter",quartals:"quarter",quartale:"quarter",quartalen:"quarter",a:"year",j:"year",jr:"year",jahr:"year",jahre:"year",jahren:"year",jahres:"year"};ie.NUMBER_PATTERN=`(?:${Uu.matchAnyPattern(ie.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s*an?)?|an?\\b(?:\\s*few)?|few|several|a?\\s*couple\\s*(?:of)?)`;function Ph(r){let e=r.toLowerCase();return ie.INTEGER_WORD_DICTIONARY[e]!==void 0?ie.INTEGER_WORD_DICTIONARY[e]:e==="a"||e==="an"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}ie.parseNumberPattern=Ph;ie.YEAR_PATTERN="(?:[0-9]{1,4}(?:\\s*[vn]\\.?\\s*(?:C(?:hr)?|(?:u\\.?|d\\.?(?:\\s*g\\.?)?)?\\s*Z)\\.?|\\s*(?:u\\.?|d\\.?(?:\\s*g\\.)?)\\s*Z\\.?)?)";function M1(r){if(/v/i.test(r))return-parseInt(r.replace(/[^0-9]+/gi,""));if(/n/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));if(/z/i.test(r))return parseInt(r.replace(/[^0-9]+/gi,""));let e=parseInt(r);return R1.findMostLikelyADYear(e)}ie.parseYear=M1;var kh=`(${ie.NUMBER_PATTERN})\\s{0,5}(${Uu.matchAnyPattern(ie.TIME_UNIT_DICTIONARY)})\\s{0,5}`,Oh=new RegExp(kh,"i");ie.TIME_UNITS_PATTERN=Uu.repeatedTimeunitPattern("",kh);function D1(r){let e={},t=r,n=Oh.exec(t);for(;n;)O1(e,n),t=t.substring(n[0].length),n=Oh.exec(t);return e}ie.parseTimeUnits=D1;function O1(r,e){let t=Ph(e[1]),n=ie.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Sh=p(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});var Ah=hi(),P1=re(),k1=M(),A1=Lr(),S1=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:a[mn]\\s*?)?(?:(diese[mn]|letzte[mn]|n(?:\xE4|ae)chste[mn])\\s*)?(${P1.matchAnyPattern(Ah.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(diese|letzte|n(?:\xE4|ae)chste)\\s*woche)?(?=\\W|$)`,"i"),N1=1,C1=3,x1=2,qu=class extends k1.AbstractParserWithWordBoundaryChecking{innerPattern(){return S1}innerExtract(e,t){let n=t[x1].toLowerCase(),i=Ah.WEEKDAY_DICTIONARY[n],s=t[N1],a=t[C1],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o.match(/letzte/)?u="last":o.match(/chste/)?u="next":o.match(/diese/)&&(u="this");let l=A1.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Lu.default=qu});var Ih=p(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});var Er=we(),I1=new RegExp("(^|\\s|T)(?:(?:um|von)\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),F1=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|bis(?:\\s+um)?|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s)?)?(?:\\s*Uhr)?(?:\\s*(morgens|vormittags|nachmittags|abends|nachts|am\\s+(?:Morgen|Vormittag|Nachmittag|Abend)|in\\s+der\\s+Nacht))?(?=\\W|$)","i"),U1=2,Nh=3,Ch=4,xh=5,wn=class{pattern(e){return I1}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=wn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=F1.exec(i);return s&&(n.end=wn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[U1]),t[Nh]!=null&&(i=parseInt(t[Nh])),i>=60||n>24)return null;if(n>=12&&(s=Er.Meridiem.PM),t[xh]!=null){if(n>12)return null;let a=t[xh].toLowerCase();a.match(/morgen|vormittag/)&&(s=Er.Meridiem.AM,n==12&&(n=0)),a.match(/nachmittag|abend/)&&(s=Er.Meridiem.PM,n!=12&&(n+=12)),a.match(/nacht/)&&(n==12?(s=Er.Meridiem.AM,n=0):n<6?s=Er.Meridiem.AM:(s=Er.Meridiem.PM,n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Er.Meridiem.AM):e.imply("meridiem",Er.Meridiem.PM),t[Ch]!=null){let a=parseInt(t[Ch]);if(a>=60)return null;e.assign("second",a)}return e}};Wu.default=wn});var Fh=p(mi=>{"use strict";var q1=mi&&mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mi,"__esModule",{value:!0});var L1=q1(Yt()),Yu=class extends L1.default{patternBetween(){return/^\s*(bis(?:\s*(?:am|zum))?|-)\s*$/i}};mi.default=Yu});var Uh=p(yi=>{"use strict";var W1=yi&&yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(yi,"__esModule",{value:!0});var Y1=W1(Zt()),$u=class extends Y1.default{patternBetween(){return new RegExp("^\\s*(T|um|am|,|-)?\\s*$")}};yi.default=$u});var ju=p(_i=>{"use strict";var $1=_i&&_i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_i,"__esModule",{value:!0});var j1=$1(X()),Yr=we(),B1=M(),G1=pt(),H1=ht(),gi=class extends B1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(diesen)?\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht)(?=\W|$)/i}innerExtract(e,t){let n=j1.default(e.refDate),i=t[2].toLowerCase(),s=e.createParsingComponents();return G1.implySimilarTime(s,n),gi.extractTimeComponents(s,i)}static extractTimeComponents(e,t){switch(t){case"morgen":e.imply("hour",6),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"vormittag":e.imply("hour",9),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"mittag":case"mittags":e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break;case"nachmittag":e.imply("hour",15),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"abend":e.imply("hour",18),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"nacht":e.imply("hour",22),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.PM);break;case"mitternacht":e.get("hour")>1&&(e=H1.addImpliedTimeUnits(e,{day:1})),e.imply("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("meridiem",Yr.Meridiem.AM);break}return e}};_i.default=gi});var Wh=p(Dt=>{"use strict";var z1=Dt&&Dt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),K1=Dt&&Dt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),V1=Dt&&Dt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&z1(e,r,t);return K1(e,r),e},Lh=Dt&&Dt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Dt,"__esModule",{value:!0});var X1=Lh(X()),Z1=M(),$r=pt(),Q1=Lh(ju()),qh=V1(er()),J1=new RegExp("(jetzt|heute|morgen|\xFCbermorgen|uebermorgen|gestern|vorgestern|letzte\\s*nacht)(?:\\s*(morgen|vormittag|mittags?|nachmittag|abend|nacht|mitternacht))?(?=\\W|$)","i"),eE=1,tE=2,Bu=class extends Z1.AbstractParserWithWordBoundaryChecking{innerPattern(e){return J1}innerExtract(e,t){let n=X1.default(e.refDate),i=(t[eE]||"").toLowerCase(),s=(t[tE]||"").toLowerCase(),a=e.createParsingComponents();switch(i){case"jetzt":a=qh.now(e.reference);break;case"heute":a=qh.today(e.reference);break;case"morgen":$r.assignTheNextDay(a,n);break;case"\xFCbermorgen":case"uebermorgen":n=n.add(1,"day"),$r.assignTheNextDay(a,n);break;case"gestern":n=n.add(-1,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;case"vorgestern":n=n.add(-2,"day"),$r.assignSimilarDate(a,n),$r.implySimilarTime(a,n);break;default:i.match(/letzte\s*nacht/)&&(n.hour()>6&&(n=n.add(-1,"day")),$r.assignSimilarDate(a,n),a.imply("hour",0));break}return s&&(a=Q1.default.extractTimeComponents(a,s)),a}};Dt.default=Bu});var Hh=p(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});var rE=Ue(),Bh=hi(),Gh=hi(),nE=re(),iE=M(),sE=new RegExp(`(?:am\\s*?)?(?:den\\s*?)?([0-9]{1,2})\\.(?:\\s*(?:bis(?:\\s*(?:am|zum))?|\\-|\\\u2013|\\s)\\s*([0-9]{1,2})\\.?)?\\s*(${nE.matchAnyPattern(Bh.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${Gh.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),Yh=1,$h=2,aE=3,jh=4,Gu=class extends iE.AbstractParserWithWordBoundaryChecking{innerPattern(){return sE}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Bh.MONTH_DICTIONARY[t[aE].toLowerCase()],s=parseInt(t[Yh]);if(s>31)return t.index=t.index+t[Yh].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[jh]){let a=Gh.parseYear(t[jh]);n.start.assign("year",a)}else{let a=rE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[$h]){let a=parseInt(t[$h]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Hu.default=Gu});var zh=p(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});var Xs=hi(),oE=me(),uE=M(),lE=ht(),cE=re(),zu=class extends uE.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:\\s*((?:n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?|vor|in)\\s*)?(${Xs.NUMBER_PATTERN})?(?:\\s*(n\xE4chste|kommende|folgende|letzte|vergangene|vorige|vor(?:her|an)gegangene)(?:s|n|m|r)?)?\\s*(${cE.matchAnyPattern(Xs.TIME_UNIT_DICTIONARY)})`,"i")}innerExtract(e,t){let n=t[2]?Xs.parseNumberPattern(t[2]):1,i=Xs.TIME_UNIT_DICTIONARY[t[4].toLowerCase()],s={};s[i]=n;let a=t[1]||t[3]||"";if(a=a.toLowerCase(),!!a)return(/vor/.test(a)||/letzte/.test(a)||/vergangen/.test(a))&&(s=lE.reverseTimeUnits(s)),oE.ParsingComponents.createRelativeFromReference(e.reference,s)}};Ku.default=zu});var Xh=p(Oe=>{"use strict";var Ot=Oe&&Oe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oe,"__esModule",{value:!0});Oe.createConfiguration=Oe.createCasualConfiguration=Oe.parseDate=Oe.parse=Oe.strict=Oe.casual=void 0;var dE=Qt(),Kh=Mt(),fE=Ot(Wr()),pE=Ot(yu()),hE=Ot(Dh()),mE=Ot(Sh()),yE=Ot(Ih()),gE=Ot(Fh()),_E=Ot(Uh()),TE=Ot(Wh()),bE=Ot(ju()),vE=Ot(Hh()),EE=Ot(zh());Oe.casual=new Kh.Chrono(Vh());Oe.strict=new Kh.Chrono(Vu(!0));function wE(r,e,t){return Oe.casual.parse(r,e,t)}Oe.parse=wE;function RE(r,e,t){return Oe.casual.parseDate(r,e,t)}Oe.parseDate=RE;function Vh(r=!0){let e=Vu(!1,r);return e.parsers.unshift(new bE.default),e.parsers.unshift(new TE.default),e.parsers.unshift(new EE.default),e}Oe.createCasualConfiguration=Vh;function Vu(r=!0,e=!0){return dE.includeCommonConfiguration({parsers:[new pE.default,new fE.default(e),new hE.default,new yE.default,new vE.default,new mE.default],refiners:[new gE.default,new _E.default]},r)}Oe.createConfiguration=Vu});var Qh=p(Pt=>{"use strict";var ME=Pt&&Pt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),DE=Pt&&Pt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),OE=Pt&&Pt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&ME(e,r,t);return DE(e,r),e},PE=Pt&&Pt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pt,"__esModule",{value:!0});var kE=PE(X()),AE=we(),SE=M(),Zh=pt(),Zs=OE(er()),Xu=class extends SE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(maintenant|aujourd'hui|demain|hier|cette\s*nuit|la\s*veille)(?=\W|$)/i}innerExtract(e,t){let n=kE.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"maintenant":return Zs.now(e.reference);case"aujourd'hui":return Zs.today(e.reference);case"hier":return Zs.yesterday(e.reference);case"demain":return Zs.tomorrow(e.reference);default:i.match(/cette\s*nuit/)?(Zh.assignSimilarDate(s,n),s.imply("hour",22),s.imply("meridiem",AE.Meridiem.PM)):i.match(/la\s*veille/)&&(n=n.add(-1,"day"),Zh.assignSimilarDate(s,n),s.imply("hour",0))}return s}};Pt.default=Xu});var Jh=p(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});var Ti=we(),NE=M(),Zu=class extends NE.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(cet?)?\s*(matin|soir|après-midi|aprem|a midi|à minuit)(?=\W|$)/i}innerExtract(e,t){let n=t[2].toLowerCase(),i=e.createParsingComponents();switch(n){case"apr\xE8s-midi":case"aprem":i.imply("hour",14),i.imply("minute",0),i.imply("meridiem",Ti.Meridiem.PM);break;case"soir":i.imply("hour",18),i.imply("minute",0),i.imply("meridiem",Ti.Meridiem.PM);break;case"matin":i.imply("hour",8),i.imply("minute",0),i.imply("meridiem",Ti.Meridiem.AM);break;case"a midi":i.imply("hour",12),i.imply("minute",0),i.imply("meridiem",Ti.Meridiem.AM);break;case"\xE0 minuit":i.imply("hour",0),i.imply("meridiem",Ti.Meridiem.AM);break}return i}};Qu.default=Zu});var em=p(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var CE=Ur(),Ju=class extends CE.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:[\xE0a])\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};el.default=Ju});var tm=p(bi=>{"use strict";var xE=bi&&bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(bi,"__esModule",{value:!0});var IE=xE(Zt()),tl=class extends IE.default{patternBetween(){return new RegExp("^\\s*(T|\xE0|a|vers|de|,|-)?\\s*$")}};bi.default=tl});var rm=p(vi=>{"use strict";var FE=vi&&vi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vi,"__esModule",{value:!0});var UE=FE(Yt()),rl=class extends UE.default{patternBetween(){return/^\s*(à|a|-)\s*$/i}};vi.default=rl});var wr=p(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.parseTimeUnits=Z.TIME_UNITS_PATTERN=Z.parseYear=Z.YEAR_PATTERN=Z.parseOrdinalNumberPattern=Z.ORDINAL_NUMBER_PATTERN=Z.parseNumberPattern=Z.NUMBER_PATTERN=Z.TIME_UNIT_DICTIONARY=Z.INTEGER_WORD_DICTIONARY=Z.MONTH_DICTIONARY=Z.WEEKDAY_DICTIONARY=void 0;var nl=re();Z.WEEKDAY_DICTIONARY={dimanche:0,dim:0,lundi:1,lun:1,mardi:2,mar:2,mercredi:3,mer:3,jeudi:4,jeu:4,vendredi:5,ven:5,samedi:6,sam:6};Z.MONTH_DICTIONARY={janvier:1,jan:1,"jan.":1,f\u00E9vrier:2,f\u00E9v:2,"f\xE9v.":2,fevrier:2,fev:2,"fev.":2,mars:3,mar:3,"mar.":3,avril:4,avr:4,"avr.":4,mai:5,juin:6,jun:6,juillet:7,juil:7,jul:7,"jul.":7,ao\u00FBt:8,aout:8,septembre:9,sep:9,"sep.":9,sept:9,"sept.":9,octobre:10,oct:10,"oct.":10,novembre:11,nov:11,"nov.":11,d\u00E9cembre:12,decembre:12,dec:12,"dec.":12};Z.INTEGER_WORD_DICTIONARY={un:1,deux:2,trois:3,quatre:4,cinq:5,six:6,sept:7,huit:8,neuf:9,dix:10,onze:11,douze:12,treize:13};Z.TIME_UNIT_DICTIONARY={sec:"second",seconde:"second",secondes:"second",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",heure:"hour",heures:"hour",jour:"d",jours:"d",semaine:"week",semaines:"week",mois:"month",trimestre:"quarter",trimestres:"quarter",ans:"year",ann\u00E9e:"year",ann\u00E9es:"year"};Z.NUMBER_PATTERN=`(?:${nl.matchAnyPattern(Z.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|une?\\b|quelques?|demi-?)`;function im(r){let e=r.toLowerCase();return Z.INTEGER_WORD_DICTIONARY[e]!==void 0?Z.INTEGER_WORD_DICTIONARY[e]:e==="une"||e==="un"?1:e.match(/quelques?/)?3:e.match(/demi-?/)?.5:parseFloat(e)}Z.parseNumberPattern=im;Z.ORDINAL_NUMBER_PATTERN="(?:[0-9]{1,2}(?:er)?)";function qE(r){let e=r.toLowerCase();return e=e.replace(/(?:er)$/i,""),parseInt(e)}Z.parseOrdinalNumberPattern=qE;Z.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:AC|AD|p\\.\\s*C(?:hr?)?\\.\\s*n\\.)|[1-2][0-9]{3}|[5-9][0-9])";function LE(r){if(/AC/i.test(r))return r=r.replace(/BC/i,""),-parseInt(r);if(/AD/i.test(r)||/C/i.test(r))return r=r.replace(/[^\d]+/i,""),parseInt(r);let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}Z.parseYear=LE;var sm=`(${Z.NUMBER_PATTERN})\\s{0,5}(${nl.matchAnyPattern(Z.TIME_UNIT_DICTIONARY)})\\s{0,5}`,nm=new RegExp(sm,"i");Z.TIME_UNITS_PATTERN=nl.repeatedTimeunitPattern("",sm);function WE(r){let e={},t=r,n=nm.exec(t);for(;n;)YE(e,n),t=t.substring(n[0].length),n=nm.exec(t);return e}Z.parseTimeUnits=WE;function YE(r,e){let t=im(e[1]),n=Z.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var om=p(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});var am=wr(),$E=re(),jE=M(),BE=Lr(),GE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(?:ce)\\s*)?(${$E.matchAnyPattern(am.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(dernier|prochain)\\s*)?(?=\\W|\\d|$)`,"i"),HE=1,zE=2,il=class extends jE.AbstractParserWithWordBoundaryChecking{innerPattern(){return GE}innerExtract(e,t){let n=t[HE].toLowerCase(),i=am.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[zE];s=s||"",s=s.toLowerCase();let a=null;s=="dernier"?a="last":s=="prochain"&&(a="next");let o=BE.toDayJSWeekday(e.refDate,i,a);return e.createParsingComponents().assign("weekday",i).imply("day",o.date()).imply("month",o.month()+1).imply("year",o.year())}};sl.default=il});var dm=p(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});var Ei=we(),KE=new RegExp("(^|\\s|T)(?:(?:[\xE0a])\\s*)?(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),VE=new RegExp("^\\s*(\\-|\\\u2013|\\~|\\\u301C|[\xE0a]|\\?)\\s*(\\d{1,2})(?:h|:)?(?:(\\d{1,2})(?:m|:)?)?(?:(\\d{1,2})(?:s|:)?)?(?:\\s*(A\\.M\\.|P\\.M\\.|AM?|PM?))?(?=\\W|$)","i"),XE=2,um=3,lm=4,cm=5,Rn=class{pattern(e){return KE}extract(e,t){let n=e.createParsingResult(t.index+t[1].length,t[0].substring(t[1].length));if(n.text.match(/^\d{4}$/)||(n.start=Rn.extractTimeComponent(n.start.clone(),t),!n.start))return t.index+=t[0].length,null;let i=e.text.substring(t.index+t[0].length),s=VE.exec(i);return s&&(n.end=Rn.extractTimeComponent(n.start.clone(),s),n.end&&(n.text+=s[0])),n}static extractTimeComponent(e,t){let n=0,i=0,s=null;if(n=parseInt(t[XE]),t[um]!=null&&(i=parseInt(t[um])),i>=60||n>24)return null;if(n>=12&&(s=Ei.Meridiem.PM),t[cm]!=null){if(n>12)return null;let a=t[cm][0].toLowerCase();a=="a"&&(s=Ei.Meridiem.AM,n==12&&(n=0)),a=="p"&&(s=Ei.Meridiem.PM,n!=12&&(n+=12))}if(e.assign("hour",n),e.assign("minute",i),s!==null?e.assign("meridiem",s):n<12?e.imply("meridiem",Ei.Meridiem.AM):e.imply("meridiem",Ei.Meridiem.PM),t[lm]!=null){let a=parseInt(t[lm]);if(a>=60)return null;e.assign("second",a)}return e}};al.default=Rn});var gm=p(ul=>{"use strict";Object.defineProperty(ul,"__esModule",{value:!0});var ZE=Ue(),mm=wr(),ym=wr(),Qs=wr(),QE=re(),JE=M(),e0=new RegExp(`(?:on\\s*?)?(${Qs.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:au|\\-|\\\u2013|jusqu'au?|\\s)\\s*(${Qs.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:de)?\\s*)(${QE.matchAnyPattern(mm.MONTH_DICTIONARY)})(?:(?:-|/|,?\\s*)(${ym.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),fm=1,pm=2,t0=3,hm=4,ol=class extends JE.AbstractParserWithWordBoundaryChecking{innerPattern(){return e0}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=mm.MONTH_DICTIONARY[t[t0].toLowerCase()],s=Qs.parseOrdinalNumberPattern(t[fm]);if(s>31)return t.index=t.index+t[fm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[hm]){let a=ym.parseYear(t[hm]);n.start.assign("year",a)}else{let a=ZE.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[pm]){let a=Qs.parseOrdinalNumberPattern(t[pm]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};ul.default=ol});var Tm=p(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var _m=wr(),r0=me(),n0=M(),i0=ht(),ll=class extends n0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`il y a\\s*(${_m.TIME_UNITS_PATTERN})(?=(?:\\W|$))`,"i")}innerExtract(e,t){let n=_m.parseTimeUnits(t[1]),i=i0.reverseTimeUnits(n);return r0.ParsingComponents.createRelativeFromReference(e.reference,i)}};cl.default=ll});var vm=p(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});var bm=wr(),s0=me(),a0=M(),dl=class extends a0.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp(`(?:dans|en|pour|pendant|de)\\s*(${bm.TIME_UNITS_PATTERN})(?=\\W|$)`,"i")}innerExtract(e,t){let n=bm.parseTimeUnits(t[1]);return s0.ParsingComponents.createRelativeFromReference(e.reference,n)}};fl.default=dl});var Em=p(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});var Js=wr(),o0=me(),u0=M(),l0=ht(),c0=re(),pl=class extends u0.AbstractParserWithWordBoundaryChecking{constructor(){super()}innerPattern(){return new RegExp(`(?:les?|la|l'|du|des?)\\s*(${Js.NUMBER_PATTERN})?(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?\\s*(${c0.matchAnyPattern(Js.TIME_UNIT_DICTIONARY)})(?:\\s*(prochaine?s?|derni[e\xE8]re?s?|pass[\xE9e]e?s?|pr[\xE9e]c[\xE9e]dents?|suivante?s?))?`,"i")}innerExtract(e,t){let n=t[1]?Js.parseNumberPattern(t[1]):1,i=Js.TIME_UNIT_DICTIONARY[t[3].toLowerCase()],s={};s[i]=n;let a=t[2]||t[4]||"";if(a=a.toLowerCase(),!!a)return(/derni[eè]re?s?/.test(a)||/pass[ée]e?s?/.test(a)||/pr[ée]c[ée]dents?/.test(a))&&(s=l0.reverseTimeUnits(s)),o0.ParsingComponents.createRelativeFromReference(e.reference,s)}};hl.default=pl});var Mm=p(Pe=>{"use strict";var mt=Pe&&Pe.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pe,"__esModule",{value:!0});Pe.createConfiguration=Pe.createCasualConfiguration=Pe.parseDate=Pe.parse=Pe.strict=Pe.casual=void 0;var d0=Qt(),wm=Mt(),f0=mt(Qh()),p0=mt(Jh()),h0=mt(Wr()),m0=mt(em()),y0=mt(tm()),g0=mt(rm()),_0=mt(om()),T0=mt(dm()),b0=mt(gm()),v0=mt(Tm()),E0=mt(vm()),w0=mt(Em());Pe.casual=new wm.Chrono(Rm());Pe.strict=new wm.Chrono(ml(!0));function R0(r,e,t){return Pe.casual.parse(r,e,t)}Pe.parse=R0;function M0(r,e,t){return Pe.casual.parseDate(r,e,t)}Pe.parseDate=M0;function Rm(r=!0){let e=ml(!1,r);return e.parsers.unshift(new f0.default),e.parsers.unshift(new p0.default),e.parsers.unshift(new w0.default),e}Pe.createCasualConfiguration=Rm;function ml(r=!0,e=!0){return d0.includeCommonConfiguration({parsers:[new h0.default(e),new b0.default,new m0.default,new T0.default,new v0.default,new E0.default,new _0.default],refiners:[new y0.default,new g0.default]},r)}Pe.createConfiguration=ml});var Dm=p(ea=>{"use strict";Object.defineProperty(ea,"__esModule",{value:!0});ea.toHankaku=void 0;function D0(r){return String(r).replace(/\u2019/g,"'").replace(/\u201D/g,'"').replace(/\u3000/g," ").replace(/\uFFE5/g,"\xA5").replace(/[\uFF01\uFF03-\uFF06\uFF08\uFF09\uFF0C-\uFF19\uFF1C-\uFF1F\uFF21-\uFF3B\uFF3D\uFF3F\uFF41-\uFF5B\uFF5D\uFF5E]/g,O0)}ea.toHankaku=D0;function O0(r){return String.fromCharCode(r.charCodeAt(0)-65248)}});var Pm=p(wi=>{"use strict";var P0=wi&&wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wi,"__esModule",{value:!0});var yl=Dm(),k0=Ue(),A0=P0(X()),S0=/(?:(?:([同今本])|((昭和|平成|令和)?([0-9０-９]{1,4}|元)))年\s*)?([0-9０-９]{1,2})月\s*([0-9０-９]{1,2})日/i,Om=1,N0=2,gl=3,C0=4,x0=5,I0=6,_l=class{pattern(){return S0}extract(e,t){let n=parseInt(yl.toHankaku(t[x0])),i=parseInt(yl.toHankaku(t[I0])),s=e.createParsingComponents({day:i,month:n});if(t[Om]&&t[Om].match("\u540C|\u4ECA|\u672C")){let a=A0.default(e.refDate);s.assign("year",a.year())}if(t[N0]){let a=t[C0],o=a=="\u5143"?1:parseInt(yl.toHankaku(a));t[gl]=="\u4EE4\u548C"?o+=2018:t[gl]=="\u5E73\u6210"?o+=1988:t[gl]=="\u662D\u548C"&&(o+=1925),s.assign("year",o)}else{let a=k0.findYearClosestToRef(e.refDate,i,n);s.imply("year",a)}return s}};wi.default=_l});var km=p(Ri=>{"use strict";var F0=Ri&&Ri.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ri,"__esModule",{value:!0});var U0=F0(Yt()),Tl=class extends U0.default{patternBetween(){return/^\s*(から|ー|-)\s*$/i}};Ri.default=Tl});var Sm=p(kt=>{"use strict";var q0=kt&&kt.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),L0=kt&&kt.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),W0=kt&&kt.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&q0(e,r,t);return L0(e,r),e},Y0=kt&&kt.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(kt,"__esModule",{value:!0});var $0=Y0(X()),Am=we(),bl=W0(er()),j0=/今日|当日|昨日|明日|今夜|今夕|今晩|今朝/i,vl=class{pattern(){return j0}extract(e,t){let n=t[0],i=$0.default(e.refDate),s=e.createParsingComponents();switch(n){case"\u6628\u65E5":return bl.yesterday(e.reference);case"\u660E\u65E5":return bl.tomorrow(e.reference);case"\u4ECA\u65E5":case"\u5F53\u65E5":return bl.today(e.reference)}return n=="\u4ECA\u591C"||n=="\u4ECA\u5915"||n=="\u4ECA\u6669"?(s.imply("hour",22),s.assign("meridiem",Am.Meridiem.PM)):n.match("\u4ECA\u671D")&&(s.imply("hour",6),s.assign("meridiem",Am.Meridiem.AM)),s.assign("day",i.date()),s.assign("month",i.month()+1),s.assign("year",i.year()),s}};kt.default=vl});var xm=p(ke=>{"use strict";var El=ke&&ke.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ke,"__esModule",{value:!0});ke.createConfiguration=ke.createCasualConfiguration=ke.parseDate=ke.parse=ke.strict=ke.casual=void 0;var B0=El(Pm()),G0=El(km()),H0=El(Sm()),Nm=Mt();ke.casual=new Nm.Chrono(Cm());ke.strict=new Nm.Chrono(wl());function z0(r,e,t){return ke.casual.parse(r,e,t)}ke.parse=z0;function K0(r,e,t){return ke.casual.parseDate(r,e,t)}ke.parseDate=K0;function Cm(){let r=wl();return r.parsers.unshift(new H0.default),r}ke.createCasualConfiguration=Cm;function wl(){return{parsers:[new B0.default],refiners:[new G0.default]}}ke.createConfiguration=wl});var ta=p(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.parseYear=jt.YEAR_PATTERN=jt.MONTH_DICTIONARY=jt.WEEKDAY_DICTIONARY=void 0;jt.WEEKDAY_DICTIONARY={domingo:0,dom:0,segunda:1,"segunda-feira":1,seg:1,ter\u00E7a:2,"ter\xE7a-feira":2,ter:2,quarta:3,"quarta-feira":3,qua:3,quinta:4,"quinta-feira":4,qui:4,sexta:5,"sexta-feira":5,sex:5,s\u00E1bado:6,sabado:6,sab:6};jt.MONTH_DICTIONARY={janeiro:1,jan:1,"jan.":1,fevereiro:2,fev:2,"fev.":2,mar\u00E7o:3,mar:3,"mar.":3,abril:4,abr:4,"abr.":4,maio:5,mai:5,"mai.":5,junho:6,jun:6,"jun.":6,julho:7,jul:7,"jul.":7,agosto:8,ago:8,"ago.":8,setembro:9,set:9,"set.":9,outubro:10,out:10,"out.":10,novembro:11,nov:11,"nov.":11,dezembro:12,dez:12,"dez.":12};jt.YEAR_PATTERN="[0-9]{1,4}(?![^\\s]\\d)(?:\\s*[a|d]\\.?\\s*c\\.?|\\s*a\\.?\\s*d\\.?)?";function V0(r){if(r.match(/^[0-9]{1,4}$/)){let e=parseInt(r);return e<100&&(e>50?e=e+1900:e=e+2e3),e}return r.match(/a\.?\s*c\.?/i)?(r=r.replace(/a\.?\s*c\.?/i,""),-parseInt(r)):parseInt(r)}jt.parseYear=V0});var Fm=p(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});var Im=ta(),X0=re(),Z0=M(),Q0=Lr(),J0=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:(este|esta|passado|pr[o\xF3]ximo)\\s*)?(${X0.matchAnyPattern(Im.WEEKDAY_DICTIONARY)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(este|esta|passado|pr[\xF3o]ximo)\\s*semana)?(?=\\W|\\d|$)`,"i"),ew=1,tw=2,rw=3,Rl=class extends Z0.AbstractParserWithWordBoundaryChecking{innerPattern(){return J0}innerExtract(e,t){let n=t[tw].toLowerCase(),i=Im.WEEKDAY_DICTIONARY[n];if(i===void 0)return null;let s=t[ew],a=t[rw],o=s||a||"";o=o.toLowerCase();let u=null;o=="passado"?u="this":o=="pr\xF3ximo"||o=="proximo"?u="next":o=="este"&&(u="this");let l=Q0.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};Ml.default=Rl});var Um=p(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});var nw=Ur(),Dl=class extends nw.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:ao?|\xE0s?|das|da|de|do)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|a(?:o)?|\\?)\\s*"}};Ol.default=Dl});var qm=p(Mi=>{"use strict";var iw=Mi&&Mi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Mi,"__esModule",{value:!0});var sw=iw(Zt()),Pl=class extends sw.default{patternBetween(){return new RegExp("^\\s*(?:,|\xE0)?\\s*$")}};Mi.default=Pl});var Lm=p(Di=>{"use strict";var aw=Di&&Di.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Di,"__esModule",{value:!0});var ow=aw(Yt()),kl=class extends ow.default{patternBetween(){return/^\s*(?:-)\s*$/i}};Di.default=kl});var Gm=p(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});var uw=Ue(),jm=ta(),Bm=ta(),lw=re(),cw=M(),dw=new RegExp(`([0-9]{1,2})(?:\xBA|\xAA|\xB0)?(?:\\s*(?:desde|de|\\-|\\\u2013|ao?|\\s)\\s*([0-9]{1,2})(?:\xBA|\xAA|\xB0)?)?\\s*(?:de)?\\s*(?:-|/|\\s*(?:de|,)?\\s*)(${lw.matchAnyPattern(jm.MONTH_DICTIONARY)})(?:\\s*(?:de|,)?\\s*(${Bm.YEAR_PATTERN}))?(?=\\W|$)`,"i"),Wm=1,Ym=2,fw=3,$m=4,Al=class extends cw.AbstractParserWithWordBoundaryChecking{innerPattern(){return dw}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=jm.MONTH_DICTIONARY[t[fw].toLowerCase()],s=parseInt(t[Wm]);if(s>31)return t.index=t.index+t[Wm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[$m]){let a=Bm.parseYear(t[$m]);n.start.assign("year",a)}else{let a=uw.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[Ym]){let a=parseInt(t[Ym]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};Sl.default=Al});var Hm=p(tr=>{"use strict";var pw=tr&&tr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),hw=tr&&tr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),mw=tr&&tr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pw(e,r,t);return hw(e,r),e};Object.defineProperty(tr,"__esModule",{value:!0});var yw=M(),ra=mw(er()),Nl=class extends yw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(agora|hoje|amanha|amanhã|ontem)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"agora":return ra.now(e.reference);case"hoje":return ra.today(e.reference);case"amanha":case"amanh\xE3":return ra.tomorrow(e.reference);case"ontem":return ra.yesterday(e.reference)}return i}};tr.default=Nl});var zm=p(Oi=>{"use strict";var gw=Oi&&Oi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Oi,"__esModule",{value:!0});var na=we(),_w=M(),Tw=pt(),bw=gw(X()),Cl=class extends _w.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(?:esta\s*)?(manha|manhã|tarde|meia-noite|meio-dia|noite)(?=\W|$)/i}innerExtract(e,t){let n=bw.default(e.refDate),i=e.createParsingComponents();switch(t[1].toLowerCase()){case"tarde":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",15);break;case"noite":i.imply("meridiem",na.Meridiem.PM),i.imply("hour",22);break;case"manha":case"manh\xE3":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",6);break;case"meia-noite":Tw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"meio-dia":i.imply("meridiem",na.Meridiem.AM),i.imply("hour",12);break}return i}};Oi.default=Cl});var Xm=p(Ae=>{"use strict";var Rr=Ae&&Ae.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.createConfiguration=Ae.createCasualConfiguration=Ae.parseDate=Ae.parse=Ae.strict=Ae.casual=void 0;var vw=Qt(),Km=Mt(),Ew=Rr(Wr()),ww=Rr(Fm()),Rw=Rr(Um()),Mw=Rr(qm()),Dw=Rr(Lm()),Ow=Rr(Gm()),Pw=Rr(Hm()),kw=Rr(zm());Ae.casual=new Km.Chrono(Vm());Ae.strict=new Km.Chrono(xl(!0));function Aw(r,e,t){return Ae.casual.parse(r,e,t)}Ae.parse=Aw;function Sw(r,e,t){return Ae.casual.parseDate(r,e,t)}Ae.parseDate=Sw;function Vm(r=!0){let e=xl(!1,r);return e.parsers.push(new Pw.default),e.parsers.push(new kw.default),e}Ae.createCasualConfiguration=Vm;function xl(r=!0,e=!0){return vw.includeCommonConfiguration({parsers:[new Ew.default(e),new ww.default,new Rw.default,new Ow.default],refiners:[new Mw.default,new Dw.default]},r)}Ae.createConfiguration=xl});var Zm=p(Pi=>{"use strict";var Nw=Pi&&Pi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Pi,"__esModule",{value:!0});var Cw=Nw(Yt()),Il=class extends Cw.default{patternBetween(){return/^\s*(tot|-)\s*$/i}};Pi.default=Il});var Qm=p(ki=>{"use strict";var xw=ki&&ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ki,"__esModule",{value:!0});var Iw=xw(Zt()),Fl=class extends Iw.default{patternBetween(){return new RegExp("^\\s*(om|na|voor|in de|,|-)?\\s*$")}};ki.default=Fl});var Jm=p(rr=>{"use strict";var Fw=rr&&rr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),Uw=rr&&rr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qw=rr&&rr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&Fw(e,r,t);return Uw(e,r),e};Object.defineProperty(rr,"__esModule",{value:!0});var Lw=M(),ia=qw(er()),Ul=class extends Lw.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(nu|vandaag|morgen|morgend|gisteren)(?=\W|$)/i}innerExtract(e,t){let n=t[0].toLowerCase(),i=e.createParsingComponents();switch(n){case"nu":return ia.now(e.reference);case"vandaag":return ia.today(e.reference);case"morgen":case"morgend":return ia.tomorrow(e.reference);case"gisteren":return ia.yesterday(e.reference)}return i}};rr.default=Ul});var ey=p(Ai=>{"use strict";var Ww=Ai&&Ai.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ai,"__esModule",{value:!0});var sa=we(),Yw=M(),$w=Ww(X()),jw=pt(),Bw=1,Gw=2,ql=class extends Yw.AbstractParserWithWordBoundaryChecking{innerPattern(){return/(deze)?\s*(namiddag|avond|middernacht|ochtend|middag|'s middags|'s avonds|'s ochtends)(?=\W|$)/i}innerExtract(e,t){let n=$w.default(e.refDate),i=e.createParsingComponents();switch(t[Bw]==="deze"&&(i.assign("day",e.refDate.getDate()),i.assign("month",e.refDate.getMonth()+1),i.assign("year",e.refDate.getFullYear())),t[Gw].toLowerCase()){case"namiddag":case"'s namiddags":i.imply("meridiem",sa.Meridiem.PM),i.imply("hour",15);break;case"avond":case"'s avonds'":i.imply("meridiem",sa.Meridiem.PM),i.imply("hour",20);break;case"middernacht":jw.assignTheNextDay(i,n),i.imply("hour",0),i.imply("minute",0),i.imply("second",0);break;case"ochtend":case"'s ochtends":i.imply("meridiem",sa.Meridiem.AM),i.imply("hour",6);break;case"middag":case"'s middags":i.imply("meridiem",sa.Meridiem.AM),i.imply("hour",12);break}return i}};Ai.default=ql});var it=p(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});j.parseTimeUnits=j.TIME_UNITS_PATTERN=j.parseYear=j.YEAR_PATTERN=j.parseOrdinalNumberPattern=j.ORDINAL_NUMBER_PATTERN=j.parseNumberPattern=j.NUMBER_PATTERN=j.TIME_UNIT_DICTIONARY=j.ORDINAL_WORD_DICTIONARY=j.INTEGER_WORD_DICTIONARY=j.MONTH_DICTIONARY=j.WEEKDAY_DICTIONARY=void 0;var aa=re(),Hw=Ue();j.WEEKDAY_DICTIONARY={zondag:0,zon:0,"zon.":0,zo:0,"zo.":0,maandag:1,ma:1,"ma.":1,dinsdag:2,din:2,"din.":2,di:2,"di.":2,woensdag:3,woe:3,"woe.":3,wo:3,"wo.":3,donderdag:4,dond:4,"dond.":4,do:4,"do.":4,vrijdag:5,vrij:5,"vrij.":5,vr:5,"vr.":5,zaterdag:6,zat:6,"zat.":6,za:6,"za.":6};j.MONTH_DICTIONARY={januari:1,jan:1,"jan.":1,februari:2,feb:2,"feb.":2,maart:3,mar:3,"mar.":3,april:4,apr:4,"apr.":4,mei:5,juni:6,jun:6,"jun.":6,juli:7,jul:7,"jul.":7,augustus:8,aug:8,"aug.":8,september:9,sep:9,"sep.":9,sept:9,"sept.":9,oktober:10,okt:10,"okt.":10,november:11,nov:11,"nov.":11,december:12,dec:12,"dec.":12};j.INTEGER_WORD_DICTIONARY={een:1,twee:2,drie:3,vier:4,vijf:5,zes:6,zeven:7,acht:8,negen:9,tien:10,elf:11,twaalf:12};j.ORDINAL_WORD_DICTIONARY={eerste:1,tweede:2,derde:3,vierde:4,vijfde:5,zesde:6,zevende:7,achtste:8,negende:9,tiende:10,elfde:11,twaalfde:12,dertiende:13,veertiende:14,vijftiende:15,zestiende:16,zeventiende:17,achttiende:18,negentiende:19,twintigste:20,eenentwintigste:21,twee\u00EBntwintigste:22,drieentwintigste:23,vierentwintigste:24,vijfentwintigste:25,zesentwintigste:26,zevenentwintigste:27,achtentwintig:28,negenentwintig:29,dertigste:30,eenendertigste:31};j.TIME_UNIT_DICTIONARY={sec:"second",second:"second",seconden:"second",min:"minute",mins:"minute",minute:"minute",minuut:"minute",minuten:"minute",minuutje:"minute",h:"hour",hr:"hour",hrs:"hour",uur:"hour",u:"hour",uren:"hour",dag:"d",dagen:"d",week:"week",weken:"week",maand:"month",maanden:"month",jaar:"year",jr:"year",jaren:"year"};j.NUMBER_PATTERN=`(?:${aa.matchAnyPattern(j.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+[\\.,][0-9]+|halve?|half|paar)`;function ry(r){let e=r.toLowerCase();return j.INTEGER_WORD_DICTIONARY[e]!==void 0?j.INTEGER_WORD_DICTIONARY[e]:e==="paar"?2:e==="half"||e.match(/halve?/)?.5:parseFloat(e.replace(",","."))}j.parseNumberPattern=ry;j.ORDINAL_NUMBER_PATTERN=`(?:${aa.matchAnyPattern(j.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:ste|de)?)`;function zw(r){let e=r.toLowerCase();return j.ORDINAL_WORD_DICTIONARY[e]!==void 0?j.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:ste|de)$/i,""),parseInt(e))}j.parseOrdinalNumberPattern=zw;j.YEAR_PATTERN="(?:[1-9][0-9]{0,3}\\s*(?:voor Christus|na Christus)|[1-2][0-9]{3}|[5-9][0-9])";function Kw(r){if(/voor Christus/i.test(r))return r=r.replace(/voor Christus/i,""),-parseInt(r);if(/na Christus/i.test(r))return r=r.replace(/na Christus/i,""),parseInt(r);let e=parseInt(r);return Hw.findMostLikelyADYear(e)}j.parseYear=Kw;var ny=`(${j.NUMBER_PATTERN})\\s{0,5}(${aa.matchAnyPattern(j.TIME_UNIT_DICTIONARY)})\\s{0,5}`,ty=new RegExp(ny,"i");j.TIME_UNITS_PATTERN=aa.repeatedTimeunitPattern("(?:(?:binnen|in)\\s*)?",ny);function Vw(r){let e={},t=r,n=ty.exec(t);for(;n;)Xw(e,n),t=t.substring(n[0].length),n=ty.exec(t);return e}j.parseTimeUnits=Vw;function Xw(r,e){let t=ry(e[1]),n=j.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var sy=p(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});var iy=it(),Zw=me(),Qw=M(),Ll=class extends Qw.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(?:binnen|in|binnen de|voor)\\s*("+iy.TIME_UNITS_PATTERN+")(?=\\W|$)","i")}innerExtract(e,t){let n=iy.parseTimeUnits(t[1]);return Zw.ParsingComponents.createRelativeFromReference(e.reference,n)}};Wl.default=Ll});var oy=p($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});var ay=it(),Jw=re(),eR=M(),tR=Lr(),rR=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:op\\s*?)?(?:(deze|vorige|volgende)\\s*(?:week\\s*)?)?(${Jw.matchAnyPattern(ay.WEEKDAY_DICTIONARY)})(?=\\W|$)`,"i"),nR=1,iR=2,sR=3,Yl=class extends eR.AbstractParserWithWordBoundaryChecking{innerPattern(){return rR}innerExtract(e,t){let n=t[iR].toLowerCase(),i=ay.WEEKDAY_DICTIONARY[n],s=t[nR],a=t[sR],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="vorige"?u="last":o=="volgende"?u="next":o=="deze"&&(u="this");let l=tR.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};$l.default=Yl});var py=p(Bl=>{"use strict";Object.defineProperty(Bl,"__esModule",{value:!0});var aR=Ue(),dy=it(),oa=it(),fy=it(),oR=re(),uR=M(),lR=new RegExp(`(?:on\\s*?)?(${oa.ORDINAL_NUMBER_PATTERN})(?:\\s*(?:tot|\\-|\\\u2013|until|through|till|\\s)\\s*(${oa.ORDINAL_NUMBER_PATTERN}))?(?:-|/|\\s*(?:of)?\\s*)(`+oR.matchAnyPattern(dy.MONTH_DICTIONARY)+`)(?:(?:-|/|,?\\s*)(${fy.YEAR_PATTERN}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),cR=3,uy=1,ly=2,cy=4,jl=class extends uR.AbstractParserWithWordBoundaryChecking{innerPattern(){return lR}innerExtract(e,t){let n=dy.MONTH_DICTIONARY[t[cR].toLowerCase()],i=oa.parseOrdinalNumberPattern(t[uy]);if(i>31)return t.index=t.index+t[uy].length,null;let s=e.createParsingComponents({day:i,month:n});if(t[cy]){let u=fy.parseYear(t[cy]);s.assign("year",u)}else{let u=aR.findYearClosestToRef(e.refDate,i,n);s.imply("year",u)}if(!t[ly])return s;let a=oa.parseOrdinalNumberPattern(t[ly]),o=e.createParsingResult(t.index,t[0]);return o.start=s,o.end=s.clone(),o.end.assign("day",a),o}};Bl.default=jl});var gy=p(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});var my=it(),dR=Ue(),fR=re(),yy=it(),pR=M(),hR=new RegExp(`(${fR.matchAnyPattern(my.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${yy.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),mR=1,hy=2,Gl=class extends pR.AbstractParserWithWordBoundaryChecking{innerPattern(){return hR}innerExtract(e,t){let n=e.createParsingComponents();n.imply("day",1);let i=t[mR],s=my.MONTH_DICTIONARY[i.toLowerCase()];if(n.assign("month",s),t[hy]){let a=yy.parseYear(t[hy]);n.assign("year",a)}else{let a=dR.findYearClosestToRef(e.refDate,1,s);n.imply("year",a)}return n}};Hl.default=Gl});var _y=p(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});var yR=M(),gR=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),_R=1,TR=2,zl=class extends yR.AbstractParserWithWordBoundaryChecking{innerPattern(){return gR}innerExtract(e,t){let n=parseInt(t[TR]),i=parseInt(t[_R]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};Kl.default=zl});var Ty=p(Xl=>{"use strict";Object.defineProperty(Xl,"__esModule",{value:!0});var bR=Ur(),Vl=class extends bR.AbstractTimeExpressionParser{primaryPrefix(){return"(?:(?:om)\\s*)?"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|om|\\?)\\s*"}primarySuffix(){return"(?:\\s*(?:uur))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){return t[0].match(/^\s*\d{4}\s*$/)?null:super.extractPrimaryTimeComponents(e,t)}};Xl.default=Vl});var Ey=p(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});var vy=it(),vR=re(),ER=M(),wR=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${vR.matchAnyPattern(vy.MONTH_DICTIONARY)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),RR=1,MR=2,by=3,DR=4,Zl=class extends ER.AbstractParserWithWordBoundaryChecking{innerPattern(){return wR}innerExtract(e,t){let n=t[by]?parseInt(t[by]):vy.MONTH_DICTIONARY[t[MR].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(t[RR]);return{day:parseInt(t[DR]),month:n,year:i}}};Ql.default=Zl});var wy=p(Si=>{"use strict";var OR=Si&&Si.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Si,"__esModule",{value:!0});var PR=M(),ua=we(),Jl=pt(),kR=OR(X()),AR=1,SR=2,ec=class extends PR.AbstractParserWithWordBoundaryChecking{innerPattern(e){return/(gisteren|morgen|van)(ochtend|middag|namiddag|avond|nacht)(?=\W|$)/i}innerExtract(e,t){let n=t[AR].toLowerCase(),i=t[SR].toLowerCase(),s=e.createParsingComponents(),a=kR.default(e.refDate);switch(n){case"gisteren":Jl.assignSimilarDate(s,a.add(-1,"day"));break;case"van":Jl.assignSimilarDate(s,a);break;case"morgen":Jl.assignTheNextDay(s,a);break}switch(i){case"ochtend":s.imply("meridiem",ua.Meridiem.AM),s.imply("hour",6);break;case"middag":s.imply("meridiem",ua.Meridiem.AM),s.imply("hour",12);break;case"namiddag":s.imply("meridiem",ua.Meridiem.PM),s.imply("hour",15);break;case"avond":s.imply("meridiem",ua.Meridiem.PM),s.imply("hour",20);break}return s}};Si.default=ec});var My=p(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});var Ry=it(),NR=me(),CR=M(),xR=ht(),IR=new RegExp(`(deze|vorige|afgelopen|komende|over|\\+|-)\\s*(${Ry.TIME_UNITS_PATTERN})(?=\\W|$)`,"i"),tc=class extends CR.AbstractParserWithWordBoundaryChecking{innerPattern(){return IR}innerExtract(e,t){let n=t[1].toLowerCase(),i=Ry.parseTimeUnits(t[2]);switch(n){case"vorige":case"afgelopen":case"-":i=xR.reverseTimeUnits(i);break}return NR.ParsingComponents.createRelativeFromReference(e.reference,i)}};rc.default=tc});var Py=p(Ni=>{"use strict";var FR=Ni&&Ni.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ni,"__esModule",{value:!0});var Oy=it(),Dy=me(),UR=FR(X()),qR=M(),LR=re(),WR=new RegExp(`(dit|deze|komende|volgend|volgende|afgelopen|vorige)\\s*(${LR.matchAnyPattern(Oy.TIME_UNIT_DICTIONARY)})(?=\\s*)(?=\\W|$)`,"i"),YR=1,$R=2,nc=class extends qR.AbstractParserWithWordBoundaryChecking{innerPattern(){return WR}innerExtract(e,t){let n=t[YR].toLowerCase(),i=t[$R].toLowerCase(),s=Oy.TIME_UNIT_DICTIONARY[i];if(n=="volgend"||n=="volgende"||n=="komende"){let u={};return u[s]=1,Dy.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="afgelopen"||n=="vorige"){let u={};return u[s]=-1,Dy.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=UR.default(e.reference.instant);return i.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):i.match(/maand/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):i.match(/jaar/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};Ni.default=nc});var ky=p(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});var sc=it(),jR=me(),BR=M(),GR=ht(),HR=new RegExp("("+sc.TIME_UNITS_PATTERN+")(?:geleden|voor|eerder)(?=(?:\\W|$))","i"),zR=new RegExp("("+sc.TIME_UNITS_PATTERN+")geleden(?=(?:\\W|$))","i"),ic=class extends BR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?zR:HR}innerExtract(e,t){let n=sc.parseTimeUnits(t[1]),i=GR.reverseTimeUnits(n);return jR.ParsingComponents.createRelativeFromReference(e.reference,i)}};ac.default=ic});var Ay=p(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});var uc=it(),KR=me(),VR=M(),XR=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|na|vanaf nu|voortaan|vooruit|uit)(?=(?:\\W|$))","i"),ZR=new RegExp("("+uc.TIME_UNITS_PATTERN+")(later|vanaf nu)(?=(?:\\W|$))","i"),QR=1,oc=class extends VR.AbstractParserWithWordBoundaryChecking{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ZR:XR}innerExtract(e,t){let n=uc.parseTimeUnits(t[QR]);return KR.ParsingComponents.createRelativeFromReference(e.reference,n)}};lc.default=oc});var xy=p(Se=>{"use strict";var Le=Se&&Se.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Se,"__esModule",{value:!0});Se.createConfiguration=Se.createCasualConfiguration=Se.parseDate=Se.parse=Se.strict=Se.casual=void 0;var JR=Qt(),Sy=Mt(),eM=Le(Zm()),tM=Le(Qm()),rM=Le(Jm()),nM=Le(ey()),iM=Le(Wr()),sM=Le(sy()),aM=Le(oy()),oM=Le(py()),Ny=Le(gy()),uM=Le(_y()),lM=Le(Ty()),cM=Le(Ey()),dM=Le(wy()),fM=Le(My()),pM=Le(Py()),hM=Le(ky()),mM=Le(Ay());Se.casual=new Sy.Chrono(Cy());Se.strict=new Sy.Chrono(cc(!0));function yM(r,e,t){return Se.casual.parse(r,e,t)}Se.parse=yM;function gM(r,e,t){return Se.casual.parseDate(r,e,t)}Se.parseDate=gM;function Cy(r=!0){let e=cc(!1,r);return e.parsers.unshift(new rM.default),e.parsers.unshift(new nM.default),e.parsers.unshift(new dM.default),e.parsers.unshift(new Ny.default),e.parsers.unshift(new pM.default),e.parsers.unshift(new fM.default),e}Se.createCasualConfiguration=Cy;function cc(r=!0,e=!0){return JR.includeCommonConfiguration({parsers:[new iM.default(e),new sM.default,new oM.default,new Ny.default,new aM.default,new cM.default,new uM.default,new lM.default(r),new hM.default(r),new mM.default(r)],refiners:[new tM.default,new eM.default]},r)}Se.createConfiguration=cc});var qy=p(Ci=>{"use strict";var _M=Ci&&Ci.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ci,"__esModule",{value:!0});var TM=_M(X()),bM=M(),vM=1,Iy=2,EM=3,Fy=4,Uy=5,wM=6,dc=class extends bM.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u800C\u5BB6|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=TM.default(e.refDate),a=s;if(t[vM])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Iy]){let o=t[Iy],u=t[EM];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day")),u=="\u65E9"||u=="\u671D"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Fy]){let u=t[Fy][0];u=="\u65E9"||u=="\u671D"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"||u=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Uy]){let o=t[Uy];o=="\u660E"||o=="\u807D"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u5F8C"?a=a.add(2,"day"):o=="\u5927\u5F8C"&&(a=a.add(3,"day"));let u=t[wM];if(u){let l=u[0];l=="\u65E9"||l=="\u671D"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"||l=="\u664F"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Ci.default=dc});var Mn=p(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.zhStringToYear=Ke.zhStringToNumber=Ke.WEEKDAY_OFFSET=Ke.NUMBER=void 0;Ke.NUMBER={\u96F6:0,\u4E00:1,\u4E8C:2,\u5169:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10,\u5EFF:20,\u5345:30};Ke.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function RM(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ke.NUMBER[n]:e*Ke.NUMBER[n]:e+=Ke.NUMBER[n]}return e}Ke.zhStringToNumber=RM;function MM(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ke.NUMBER[n]}return parseInt(e)}Ke.zhStringToYear=MM});var Wy=p(xi=>{"use strict";var DM=xi&&xi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(xi,"__esModule",{value:!0});var OM=DM(X()),PM=M(),jr=Mn(),fc=1,Ly=2,pc=3,hc=class extends PM.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(jr.NUMBER).join("")+"]{4}|["+Object.keys(jr.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(jr.NUMBER).join("")+"]{1,2})?(?:\\s*)(?:\u65E5|\u865F)?")}innerExtract(e,t){let n=OM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[Ly]);if(isNaN(s)&&(s=jr.zhStringToNumber(t[Ly])),i.start.assign("month",s),t[pc]){let a=parseInt(t[pc]);isNaN(a)&&(a=jr.zhStringToNumber(t[pc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[fc]){let a=parseInt(t[fc]);isNaN(a)&&(a=jr.zhStringToYear(t[fc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};xi.default=hc});var $y=p(Ii=>{"use strict";var kM=Ii&&Ii.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ii,"__esModule",{value:!0});var AM=kM(X()),SM=M(),Yy=Mn(),NM=new RegExp("(\\d+|["+Object.keys(Yy.NUMBER).join("")+"]+|\u534A|\u5E7E)(?:\\s*)(?:\u500B)?(\u79D2(?:\u9418)?|\u5206\u9418|\u5C0F\u6642|\u9418|\u65E5|\u5929|\u661F\u671F|\u79AE\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u904E)?\u5F8C|(?:\u4E4B)?\u5167)","i"),mc=1,CM=2,yc=class extends SM.AbstractParserWithWordBoundaryChecking{innerPattern(){return NM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[mc]);if(isNaN(i)&&(i=Yy.zhStringToNumber(t[mc])),isNaN(i)){let u=t[mc];if(u==="\u5E7E")i=3;else if(u==="\u534A")i=.5;else return null}let s=AM.default(e.refDate),o=t[CM][0];return o.match(/[日天星禮月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u79AE"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u9418")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};Ii.default=yc});var By=p(Fi=>{"use strict";var xM=Fi&&Fi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Fi,"__esModule",{value:!0});var IM=xM(X()),FM=M(),jy=Mn(),UM=new RegExp("(?<prefix>\u4E0A|\u4ECA|\u4E0B|\u9019|\u5462)(?:\u500B)?(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(jy.WEEKDAY_OFFSET).join("|")+")"),gc=class extends FM.AbstractParserWithWordBoundaryChecking{innerPattern(){return UM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=jy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":(o=="\u4ECA"||o=="\u9019"||o=="\u5462")&&(a="this");let u=IM.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Fi.default=gc});var Gy=p(Ui=>{"use strict";var qM=Ui&&Ui.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ui,"__esModule",{value:!0});var LM=qM(X()),WM=M(),gt=Mn(),YM=new RegExp("(?:\u7531|\u5F9E|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),$M=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u5F8C|\u5927\u5F8C|\u807D|\u6628|\u5C0B|\u7434)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348|\u665D)|\u671D(?:\u65E9)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348|\u665D)|\u664F(?:\u665D)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)(?:\\s*)(?:\u9EDE|\u6642|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(gt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),la=1,ca=2,da=3,fa=4,pa=5,ha=6,yt=7,Dn=8,ma=9,_c=class extends WM.AbstractParserWithWordBoundaryChecking{innerPattern(){return YM}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=LM.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[la]){var a=t[la];a=="\u660E"||a=="\u807D"?n.hour()>1&&s.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?s.add(-1,"day"):a=="\u524D"?s.add(-2,"day"):a=="\u5927\u524D"?s.add(-3,"day"):a=="\u5F8C"?s.add(2,"day"):a=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[fa]){var o=t[fa];o=="\u660E"||o=="\u807D"?s.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?s.add(-1,"day"):o=="\u524D"?s.add(-2,"day"):o=="\u5927\u524D"?s.add(-3,"day"):o=="\u5F8C"?s.add(2,"day"):o=="\u5927\u5F8C"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let u=0,l=0,c=-1;if(t[Dn]){var d=parseInt(t[Dn]);if(isNaN(d)&&(d=gt.zhStringToNumber(t[Dn])),d>=60)return null;i.start.assign("second",d)}if(u=parseInt(t[ha]),isNaN(u)&&(u=gt.zhStringToNumber(t[ha])),t[yt]?t[yt]=="\u534A"?l=30:t[yt]=="\u6B63"||t[yt]=="\u6574"?l=0:(l=parseInt(t[yt]),isNaN(l)&&(l=gt.zhStringToNumber(t[yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ma]){if(u>12)return null;var f=t[ma][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12))}else if(t[ca]){var h=t[ca],_=h[0];_=="\u671D"||_=="\u65E9"?(c=0,u==12&&(u=0)):_=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[da]){var m=t[da],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[pa]){var R=t[pa],w=R[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}if(i.start.assign("hour",u),i.start.assign("minute",l),c>=0?i.start.assign("meridiem",c):u<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=$M.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let k=s.clone();if(i.end=e.createParsingComponents(),t[la]){var a=t[la];a=="\u660E"||a=="\u807D"?n.hour()>1&&k.add(1,"day"):a=="\u6628"||a=="\u5C0B"||a=="\u7434"?k.add(-1,"day"):a=="\u524D"?k.add(-2,"day"):a=="\u5927\u524D"?k.add(-3,"day"):a=="\u5F8C"?k.add(2,"day"):a=="\u5927\u5F8C"&&k.add(3,"day"),i.end.assign("day",k.date()),i.end.assign("month",k.month()+1),i.end.assign("year",k.year())}else if(t[fa]){var o=t[fa];o=="\u660E"||o=="\u807D"?k.add(1,"day"):o=="\u6628"||o=="\u5C0B"||o=="\u7434"?k.add(-1,"day"):o=="\u524D"?k.add(-2,"day"):o=="\u5927\u524D"?k.add(-3,"day"):o=="\u5F8C"?k.add(2,"day"):o=="\u5927\u5F8C"&&k.add(3,"day"),i.end.assign("day",k.date()),i.end.assign("month",k.month()+1),i.end.assign("year",k.year())}else i.end.imply("day",k.date()),i.end.imply("month",k.month()+1),i.end.imply("year",k.year());if(u=0,l=0,c=-1,t[Dn]){var d=parseInt(t[Dn]);if(isNaN(d)&&(d=gt.zhStringToNumber(t[Dn])),d>=60)return null;i.end.assign("second",d)}if(u=parseInt(t[ha]),isNaN(u)&&(u=gt.zhStringToNumber(t[ha])),t[yt]?t[yt]=="\u534A"?l=30:t[yt]=="\u6B63"||t[yt]=="\u6574"?l=0:(l=parseInt(t[yt]),isNaN(l)&&(l=gt.zhStringToNumber(t[yt]))):u>100&&(l=u%100,u=Math.floor(u/100)),l>=60||u>24)return null;if(u>=12&&(c=1),t[ma]){if(u>12)return null;var f=t[ma][0].toLowerCase();f=="a"&&(c=0,u==12&&(u=0)),f=="p"&&(c=1,u!=12&&(u+=12)),i.start.isCertain("meridiem")||(c==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ca]){var h=t[ca],_=h[0];_=="\u671D"||_=="\u65E9"?(c=0,u==12&&(u=0)):_=="\u665A"&&(c=1,u!=12&&(u+=12))}else if(t[da]){var m=t[da],g=m[0];g=="\u4E0A"||g=="\u671D"||g=="\u65E9"||g=="\u51CC"?(c=0,u==12&&(u=0)):(g=="\u4E0B"||g=="\u664F"||g=="\u665A")&&(c=1,u!=12&&(u+=12))}else if(t[pa]){var R=t[pa],w=R[0];w=="\u4E0A"||w=="\u671D"||w=="\u65E9"||w=="\u51CC"?(c=0,u==12&&(u=0)):(w=="\u4E0B"||w=="\u664F"||w=="\u665A")&&(c=1,u!=12&&(u+=12))}return i.text=i.text+t[0],i.end.assign("hour",u),i.end.assign("minute",l),c>=0?i.end.assign("meridiem",c):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>u?i.end.imply("meridiem",0):u>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Ui.default=_c});var zy=p(qi=>{"use strict";var jM=qi&&qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(qi,"__esModule",{value:!0});var BM=jM(X()),GM=M(),Hy=Mn(),HM=new RegExp("(?:\u661F\u671F|\u79AE\u62DC|\u9031)(?<weekday>"+Object.keys(Hy.WEEKDAY_OFFSET).join("|")+")"),Tc=class extends GM.AbstractParserWithWordBoundaryChecking{innerPattern(){return HM}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=Hy.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=BM.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};qi.default=Tc});var Ky=p(Li=>{"use strict";var zM=Li&&Li.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Li,"__esModule",{value:!0});var KM=zM(Yt()),bc=class extends KM.default{patternBetween(){return/^\s*(至|到|\-|\~|～|－|ー)\s*$/i}};Li.default=bc});var Vy=p(Wi=>{"use strict";var VM=Wi&&Wi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Wi,"__esModule",{value:!0});var XM=VM(Zt()),vc=class extends XM.default{patternBetween(){return/^\s*$/i}};Wi.default=vc});var Xy=p(ve=>{"use strict";var nr=ve&&ve.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ve,"__esModule",{value:!0});ve.createConfiguration=ve.createCasualConfiguration=ve.parseDate=ve.parse=ve.strict=ve.casual=ve.hant=void 0;var Ec=Mt(),ZM=nr(Gs()),QM=Qt(),JM=nr(qy()),eD=nr(Wy()),tD=nr($y()),rD=nr(By()),nD=nr(Gy()),iD=nr(zy()),sD=nr(Ky()),aD=nr(Vy());ve.hant=new Ec.Chrono(wc());ve.casual=new Ec.Chrono(wc());ve.strict=new Ec.Chrono(Rc());function oD(r,e,t){return ve.casual.parse(r,e,t)}ve.parse=oD;function uD(r,e,t){return ve.casual.parseDate(r,e,t)}ve.parseDate=uD;function wc(){let r=Rc();return r.parsers.unshift(new JM.default),r}ve.createCasualConfiguration=wc;function Rc(){let r=QM.includeCommonConfiguration({parsers:[new eD.default,new rD.default,new iD.default,new nD.default,new tD.default],refiners:[new sD.default,new aD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof ZM.default)),r}ve.createConfiguration=Rc});var eg=p(Yi=>{"use strict";var lD=Yi&&Yi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Yi,"__esModule",{value:!0});var cD=lD(X()),dD=M(),fD=1,Zy=2,pD=3,Qy=4,Jy=5,hD=6,Mc=class extends dD.AbstractParserWithWordBoundaryChecking{innerPattern(e){return new RegExp("(\u73B0\u5728|\u7ACB(?:\u523B|\u5373)|\u5373\u523B)|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s|,|\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?","i")}innerExtract(e,t){let n=t.index,i=e.createParsingResult(n,t[0]),s=cD.default(e.refDate),a=s;if(t[fD])i.start.imply("hour",s.hour()),i.start.imply("minute",s.minute()),i.start.imply("second",s.second()),i.start.imply("millisecond",s.millisecond());else if(t[Zy]){let o=t[Zy],u=t[pD];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day")),u=="\u65E9"?i.start.imply("hour",6):u=="\u665A"&&(i.start.imply("hour",22),i.start.imply("meridiem",1))}else if(t[Qy]){let u=t[Qy][0];u=="\u65E9"||u=="\u4E0A"?i.start.imply("hour",6):u=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):u=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):u=="\u591C"||u=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):u=="\u51CC"&&i.start.imply("hour",0)}else if(t[Jy]){let o=t[Jy];o=="\u660E"?s.hour()>1&&(a=a.add(1,"day")):o=="\u6628"?a=a.add(-1,"day"):o=="\u524D"?a=a.add(-2,"day"):o=="\u5927\u524D"?a=a.add(-3,"day"):o=="\u540E"?a=a.add(2,"day"):o=="\u5927\u540E"&&(a=a.add(3,"day"));let u=t[hD];if(u){let l=u[0];l=="\u65E9"||l=="\u4E0A"?i.start.imply("hour",6):l=="\u4E0B"?(i.start.imply("hour",15),i.start.imply("meridiem",1)):l=="\u4E2D"?(i.start.imply("hour",12),i.start.imply("meridiem",1)):l=="\u591C"||l=="\u665A"?(i.start.imply("hour",22),i.start.imply("meridiem",1)):l=="\u51CC"&&i.start.imply("hour",0)}}return i.start.assign("day",a.date()),i.start.assign("month",a.month()+1),i.start.assign("year",a.year()),i}};Yi.default=Mc});var On=p(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.zhStringToYear=Ve.zhStringToNumber=Ve.WEEKDAY_OFFSET=Ve.NUMBER=void 0;Ve.NUMBER={\u96F6:0,"\u3007":0,\u4E00:1,\u4E8C:2,\u4E24:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6,\u4E03:7,\u516B:8,\u4E5D:9,\u5341:10};Ve.WEEKDAY_OFFSET={\u5929:0,\u65E5:0,\u4E00:1,\u4E8C:2,\u4E09:3,\u56DB:4,\u4E94:5,\u516D:6};function mD(r){let e=0;for(let t=0;t<r.length;t++){let n=r[t];n==="\u5341"?e=e===0?Ve.NUMBER[n]:e*Ve.NUMBER[n]:e+=Ve.NUMBER[n]}return e}Ve.zhStringToNumber=mD;function yD(r){let e="";for(let t=0;t<r.length;t++){let n=r[t];e=e+Ve.NUMBER[n]}return parseInt(e)}Ve.zhStringToYear=yD});var rg=p($i=>{"use strict";var gD=$i&&$i.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty($i,"__esModule",{value:!0});var _D=gD(X()),TD=M(),Br=On(),Dc=1,tg=2,Oc=3,Pc=class extends TD.AbstractParserWithWordBoundaryChecking{innerPattern(){return new RegExp("(\\d{2,4}|["+Object.keys(Br.NUMBER).join("")+"]{4}|["+Object.keys(Br.NUMBER).join("")+"]{2})?(?:\\s*)(?:\u5E74)?(?:[\\s|,|\uFF0C]*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})(?:\\s*)(?:\u6708)(?:\\s*)(\\d{1,2}|["+Object.keys(Br.NUMBER).join("")+"]{1,3})?(?:\\s*)(?:\u65E5|\u53F7)?")}innerExtract(e,t){let n=_D.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=parseInt(t[tg]);if(isNaN(s)&&(s=Br.zhStringToNumber(t[tg])),i.start.assign("month",s),t[Oc]){let a=parseInt(t[Oc]);isNaN(a)&&(a=Br.zhStringToNumber(t[Oc])),i.start.assign("day",a)}else i.start.imply("day",n.date());if(t[Dc]){let a=parseInt(t[Dc]);isNaN(a)&&(a=Br.zhStringToYear(t[Dc])),i.start.assign("year",a)}else i.start.imply("year",n.year());return i}};$i.default=Pc});var ig=p(ji=>{"use strict";var bD=ji&&ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ji,"__esModule",{value:!0});var vD=bD(X()),ED=M(),ng=On(),wD=new RegExp("(\\d+|["+Object.keys(ng.NUMBER).join("")+"]+|\u534A|\u51E0)(?:\\s*)(?:\u4E2A)?(\u79D2(?:\u949F)?|\u5206\u949F|\u5C0F\u65F6|\u949F|\u65E5|\u5929|\u661F\u671F|\u793C\u62DC|\u6708|\u5E74)(?:(?:\u4E4B|\u8FC7)?\u540E|(?:\u4E4B)?\u5185)","i"),kc=1,RD=2,Ac=class extends ED.AbstractParserWithWordBoundaryChecking{innerPattern(){return wD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=parseInt(t[kc]);if(isNaN(i)&&(i=ng.zhStringToNumber(t[kc])),isNaN(i)){let u=t[kc];if(u==="\u51E0")i=3;else if(u==="\u534A")i=.5;else return null}let s=vD.default(e.refDate),o=t[RD][0];return o.match(/[日天星礼月年]/)?(o=="\u65E5"||o=="\u5929"?s=s.add(i,"d"):o=="\u661F"||o=="\u793C"?s=s.add(i*7,"d"):o=="\u6708"?s=s.add(i,"month"):o=="\u5E74"&&(s=s.add(i,"year")),n.start.assign("year",s.year()),n.start.assign("month",s.month()+1),n.start.assign("day",s.date()),n):(o=="\u79D2"?s=s.add(i,"second"):o=="\u5206"?s=s.add(i,"minute"):(o=="\u5C0F"||o=="\u949F")&&(s=s.add(i,"hour")),n.start.imply("year",s.year()),n.start.imply("month",s.month()+1),n.start.imply("day",s.date()),n.start.assign("hour",s.hour()),n.start.assign("minute",s.minute()),n.start.assign("second",s.second()),n)}};ji.default=Ac});var ag=p(Bi=>{"use strict";var MD=Bi&&Bi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Bi,"__esModule",{value:!0});var DD=MD(X()),OD=M(),sg=On(),PD=new RegExp("(?<prefix>\u4E0A|\u4E0B|\u8FD9)(?:\u4E2A)?(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(sg.WEEKDAY_OFFSET).join("|")+")"),Sc=class extends OD.AbstractParserWithWordBoundaryChecking{innerPattern(){return PD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=sg.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=null,o=t.groups.prefix;o=="\u4E0A"?a="last":o=="\u4E0B"?a="next":o=="\u8FD9"&&(a="this");let u=DD.default(e.refDate),l=!1,c=u.day();return a=="last"||a=="past"?(u=u.day(s-7),l=!0):a=="next"?(u=u.day(s+7),l=!0):a=="this"?u=u.day(s):Math.abs(s-7-c)<Math.abs(s-c)?u=u.day(s-7):Math.abs(s+7-c)<Math.abs(s-c)?u=u.day(s+7):u=u.day(s),n.start.assign("weekday",s),l?(n.start.assign("day",u.date()),n.start.assign("month",u.month()+1),n.start.assign("year",u.year())):(n.start.imply("day",u.date()),n.start.imply("month",u.month()+1),n.start.imply("year",u.year())),n}};Bi.default=Sc});var og=p(Gi=>{"use strict";var kD=Gi&&Gi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Gi,"__esModule",{value:!0});var AD=kD(X()),SD=M(),Tt=On(),ND=new RegExp("(?:\u4ECE|\u81EA)?(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),CD=new RegExp("(?:^\\s*(?:\u5230|\u81F3|\\-|\\\u2013|\\~|\\\u301C)\\s*)(?:(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(\u65E9|\u671D|\u665A)|(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668))|(\u4ECA|\u660E|\u524D|\u5927\u524D|\u540E|\u5927\u540E|\u6628)(?:\u65E5|\u5929)(?:[\\s,\uFF0C]*)(?:(\u4E0A(?:\u5348)|\u65E9(?:\u4E0A)|\u4E0B(?:\u5348)|\u665A(?:\u4E0A)|\u591C(?:\u665A)?|\u4E2D(?:\u5348)|\u51CC(?:\u6668)))?)?(?:[\\s,\uFF0C]*)(?:(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)(?:\\s*)(?:\u70B9|\u65F6|:|\uFF1A)(?:\\s*)(\\d+|\u534A|\u6B63|\u6574|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u5206|:|\uFF1A)?(?:\\s*)(\\d+|["+Object.keys(Tt.NUMBER).join("")+"]+)?(?:\\s*)(?:\u79D2)?)(?:\\s*(A.M.|P.M.|AM?|PM?))?","i"),ya=1,ga=2,_a=3,Ta=4,ba=5,va=6,_t=7,Pn=8,Ea=9,Nc=class extends SD.AbstractParserWithWordBoundaryChecking{innerPattern(){return ND}innerExtract(e,t){if(t.index>0&&e.text[t.index-1].match(/\w/))return null;let n=AD.default(e.refDate),i=e.createParsingResult(t.index,t[0]),s=n.clone();if(t[ya]){let c=t[ya];c=="\u660E"?n.hour()>1&&s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else if(t[Ta]){let c=t[Ta];c=="\u660E"?s.add(1,"day"):c=="\u6628"?s.add(-1,"day"):c=="\u524D"?s.add(-2,"day"):c=="\u5927\u524D"?s.add(-3,"day"):c=="\u540E"?s.add(2,"day"):c=="\u5927\u540E"&&s.add(3,"day"),i.start.assign("day",s.date()),i.start.assign("month",s.month()+1),i.start.assign("year",s.year())}else i.start.imply("day",s.date()),i.start.imply("month",s.month()+1),i.start.imply("year",s.year());let a=0,o=0,u=-1;if(t[Pn]){let c=parseInt(t[Pn]);if(isNaN(c)&&(c=Tt.zhStringToNumber(t[Pn])),c>=60)return null;i.start.assign("second",c)}if(a=parseInt(t[va]),isNaN(a)&&(a=Tt.zhStringToNumber(t[va])),t[_t]?t[_t]=="\u534A"?o=30:t[_t]=="\u6B63"||t[_t]=="\u6574"?o=0:(o=parseInt(t[_t]),isNaN(o)&&(o=Tt.zhStringToNumber(t[_t]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ea]){if(a>12)return null;let c=t[Ea][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12))}else if(t[ga]){let d=t[ga][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ba]){let d=t[ba][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}if(i.start.assign("hour",a),i.start.assign("minute",o),u>=0?i.start.assign("meridiem",u):a<12?i.start.imply("meridiem",0):i.start.imply("meridiem",1),t=CD.exec(e.text.substring(i.index+i.text.length)),!t)return i.text.match(/^\d+$/)?null:i;let l=s.clone();if(i.end=e.createParsingComponents(),t[ya]){let c=t[ya];c=="\u660E"?n.hour()>1&&l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else if(t[Ta]){let c=t[Ta];c=="\u660E"?l.add(1,"day"):c=="\u6628"?l.add(-1,"day"):c=="\u524D"?l.add(-2,"day"):c=="\u5927\u524D"?l.add(-3,"day"):c=="\u540E"?l.add(2,"day"):c=="\u5927\u540E"&&l.add(3,"day"),i.end.assign("day",l.date()),i.end.assign("month",l.month()+1),i.end.assign("year",l.year())}else i.end.imply("day",l.date()),i.end.imply("month",l.month()+1),i.end.imply("year",l.year());if(a=0,o=0,u=-1,t[Pn]){let c=parseInt(t[Pn]);if(isNaN(c)&&(c=Tt.zhStringToNumber(t[Pn])),c>=60)return null;i.end.assign("second",c)}if(a=parseInt(t[va]),isNaN(a)&&(a=Tt.zhStringToNumber(t[va])),t[_t]?t[_t]=="\u534A"?o=30:t[_t]=="\u6B63"||t[_t]=="\u6574"?o=0:(o=parseInt(t[_t]),isNaN(o)&&(o=Tt.zhStringToNumber(t[_t]))):a>100&&(o=a%100,a=Math.floor(a/100)),o>=60||a>24)return null;if(a>=12&&(u=1),t[Ea]){if(a>12)return null;let c=t[Ea][0].toLowerCase();c=="a"&&(u=0,a==12&&(a=0)),c=="p"&&(u=1,a!=12&&(a+=12)),i.start.isCertain("meridiem")||(u==0?(i.start.imply("meridiem",0),i.start.get("hour")==12&&i.start.assign("hour",0)):(i.start.imply("meridiem",1),i.start.get("hour")!=12&&i.start.assign("hour",i.start.get("hour")+12)))}else if(t[ga]){let d=t[ga][0];d=="\u65E9"?(u=0,a==12&&(a=0)):d=="\u665A"&&(u=1,a!=12&&(a+=12))}else if(t[_a]){let d=t[_a][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}else if(t[ba]){let d=t[ba][0];d=="\u4E0A"||d=="\u65E9"||d=="\u51CC"?(u=0,a==12&&(a=0)):(d=="\u4E0B"||d=="\u665A")&&(u=1,a!=12&&(a+=12))}return i.text=i.text+t[0],i.end.assign("hour",a),i.end.assign("minute",o),u>=0?i.end.assign("meridiem",u):i.start.isCertain("meridiem")&&i.start.get("meridiem")==1&&i.start.get("hour")>a?i.end.imply("meridiem",0):a>12&&i.end.imply("meridiem",1),i.end.date().getTime()<i.start.date().getTime()&&i.end.imply("day",i.end.get("day")+1),i}};Gi.default=Nc});var lg=p(Hi=>{"use strict";var xD=Hi&&Hi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Hi,"__esModule",{value:!0});var ID=xD(X()),FD=M(),ug=On(),UD=new RegExp("(?:\u661F\u671F|\u793C\u62DC|\u5468)(?<weekday>"+Object.keys(ug.WEEKDAY_OFFSET).join("|")+")"),Cc=class extends FD.AbstractParserWithWordBoundaryChecking{innerPattern(){return UD}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=t.groups.weekday,s=ug.WEEKDAY_OFFSET[i];if(s===void 0)return null;let a=ID.default(e.refDate),o=!1,u=a.day();return Math.abs(s-7-u)<Math.abs(s-u)?a=a.day(s-7):Math.abs(s+7-u)<Math.abs(s-u)?a=a.day(s+7):a=a.day(s),n.start.assign("weekday",s),o?(n.start.assign("day",a.date()),n.start.assign("month",a.month()+1),n.start.assign("year",a.year())):(n.start.imply("day",a.date()),n.start.imply("month",a.month()+1),n.start.imply("year",a.year())),n}};Hi.default=Cc});var cg=p(zi=>{"use strict";var qD=zi&&zi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(zi,"__esModule",{value:!0});var LD=qD(Yt()),xc=class extends LD.default{patternBetween(){return/^\s*(至|到|-|~|～|－|ー)\s*$/i}};zi.default=xc});var dg=p(Ki=>{"use strict";var WD=Ki&&Ki.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ki,"__esModule",{value:!0});var YD=WD(Zt()),Ic=class extends YD.default{patternBetween(){return/^\s*$/i}};Ki.default=Ic});var fg=p(Ee=>{"use strict";var ir=Ee&&Ee.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.createConfiguration=Ee.createCasualConfiguration=Ee.parseDate=Ee.parse=Ee.strict=Ee.casual=Ee.hans=void 0;var Fc=Mt(),$D=ir(Gs()),jD=Qt(),BD=ir(eg()),GD=ir(rg()),HD=ir(ig()),zD=ir(ag()),KD=ir(og()),VD=ir(lg()),XD=ir(cg()),ZD=ir(dg());Ee.hans=new Fc.Chrono(Uc());Ee.casual=new Fc.Chrono(Uc());Ee.strict=new Fc.Chrono(qc());function QD(r,e,t){return Ee.casual.parse(r,e,t)}Ee.parse=QD;function JD(r,e,t){return Ee.casual.parseDate(r,e,t)}Ee.parseDate=JD;function Uc(){let r=qc();return r.parsers.unshift(new BD.default),r}Ee.createCasualConfiguration=Uc;function qc(){let r=jD.includeCommonConfiguration({parsers:[new GD.default,new zD.default,new VD.default,new KD.default,new HD.default],refiners:[new XD.default,new ZD.default]});return r.refiners=r.refiners.filter(e=>!(e instanceof $D.default)),r}Ee.createConfiguration=qc});var hg=p(st=>{"use strict";var pg=st&&st.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),eO=st&&st.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),tO=st&&st.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&pg(e,r,t)},rO=st&&st.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&pg(e,r,t);return eO(e,r),e};Object.defineProperty(st,"__esModule",{value:!0});st.hans=void 0;tO(Xy(),st);st.hans=rO(fg())});var Xe=p(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.parseTimeUnits=U.TIME_UNITS_PATTERN=U.parseYear=U.YEAR_PATTERN=U.parseOrdinalNumberPattern=U.ORDINAL_NUMBER_PATTERN=U.parseNumberPattern=U.NUMBER_PATTERN=U.TIME_UNIT_DICTIONARY=U.ORDINAL_WORD_DICTIONARY=U.INTEGER_WORD_DICTIONARY=U.MONTH_DICTIONARY=U.FULL_MONTH_NAME_DICTIONARY=U.WEEKDAY_DICTIONARY=U.REGEX_PARTS=void 0;var wa=re(),nO=Ue();U.REGEX_PARTS={leftBoundary:"([^\\p{L}\\p{N}_]|^)",rightBoundary:"(?=[^\\p{L}\\p{N}_]|$)",flags:"iu"};U.WEEKDAY_DICTIONARY={\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u0435:0,\u0432\u043E\u0441\u043A\u0440\u0435\u0441\u0435\u043D\u044C\u044F:0,\u0432\u0441\u043A:0,"\u0432\u0441\u043A.":0,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A:1,\u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A\u0430:1,\u043F\u043D:1,"\u043F\u043D.":1,\u0432\u0442\u043E\u0440\u043D\u0438\u043A:2,\u0432\u0442\u043E\u0440\u043D\u0438\u043A\u0430:2,\u0432\u0442:2,"\u0432\u0442.":2,\u0441\u0440\u0435\u0434\u0430:3,\u0441\u0440\u0435\u0434\u044B:3,\u0441\u0440\u0435\u0434\u0443:3,\u0441\u0440:3,"\u0441\u0440.":3,\u0447\u0435\u0442\u0432\u0435\u0440\u0433:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0433\u0430:4,\u0447\u0442:4,"\u0447\u0442.":4,\u043F\u044F\u0442\u043D\u0438\u0446\u0430:5,\u043F\u044F\u0442\u043D\u0438\u0446\u0443:5,\u043F\u044F\u0442\u043D\u0438\u0446\u044B:5,\u043F\u0442:5,"\u043F\u0442.":5,\u0441\u0443\u0431\u0431\u043E\u0442\u0430:6,\u0441\u0443\u0431\u0431\u043E\u0442\u0443:6,\u0441\u0443\u0431\u0431\u043E\u0442\u044B:6,\u0441\u0431:6,"\u0441\u0431.":6};U.FULL_MONTH_NAME_DICTIONARY={\u044F\u043D\u0432\u0430\u0440\u044C:1,\u044F\u043D\u0432\u0430\u0440\u044F:1,\u044F\u043D\u0432\u0430\u0440\u0435:1,\u0444\u0435\u0432\u0440\u044F\u043B\u044C:2,\u0444\u0435\u0432\u0440\u044F\u043B\u044F:2,\u0444\u0435\u0432\u0440\u044F\u043B\u0435:2,\u043C\u0430\u0440\u0442:3,\u043C\u0430\u0440\u0442\u0430:3,\u043C\u0430\u0440\u0442\u0435:3,\u0430\u043F\u0440\u0435\u043B\u044C:4,\u0430\u043F\u0440\u0435\u043B\u044F:4,\u0430\u043F\u0440\u0435\u043B\u0435:4,\u043C\u0430\u0439:5,\u043C\u0430\u044F:5,\u043C\u0430\u0435:5,\u0438\u044E\u043D\u044C:6,\u0438\u044E\u043D\u044F:6,\u0438\u044E\u043D\u0435:6,\u0438\u044E\u043B\u044C:7,\u0438\u044E\u043B\u044F:7,\u0438\u044E\u043B\u0435:7,\u0430\u0432\u0433\u0443\u0441\u0442:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0430:8,\u0430\u0432\u0433\u0443\u0441\u0442\u0435:8,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044C:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F:9,\u0441\u0435\u043D\u0442\u044F\u0431\u0440\u0435:9,\u043E\u043A\u0442\u044F\u0431\u0440\u044C:10,\u043E\u043A\u0442\u044F\u0431\u0440\u044F:10,\u043E\u043A\u0442\u044F\u0431\u0440\u0435:10,\u043D\u043E\u044F\u0431\u0440\u044C:11,\u043D\u043E\u044F\u0431\u0440\u044F:11,\u043D\u043E\u044F\u0431\u0440\u0435:11,\u0434\u0435\u043A\u0430\u0431\u0440\u044C:12,\u0434\u0435\u043A\u0430\u0431\u0440\u044F:12,\u0434\u0435\u043A\u0430\u0431\u0440\u0435:12};U.MONTH_DICTIONARY=Object.assign(Object.assign({},U.FULL_MONTH_NAME_DICTIONARY),{\u044F\u043D\u0432:1,"\u044F\u043D\u0432.":1,\u0444\u0435\u0432:2,"\u0444\u0435\u0432.":2,\u043C\u0430\u0440:3,"\u043C\u0430\u0440.":3,\u0430\u043F\u0440:4,"\u0430\u043F\u0440.":4,\u0430\u0432\u0433:8,"\u0430\u0432\u0433.":8,\u0441\u0435\u043D:9,"\u0441\u0435\u043D.":9,\u043E\u043A\u0442:10,"\u043E\u043A\u0442.":10,\u043D\u043E\u044F:11,"\u043D\u043E\u044F.":11,\u0434\u0435\u043A:12,"\u0434\u0435\u043A.":12});U.INTEGER_WORD_DICTIONARY={\u043E\u0434\u0438\u043D:1,\u043E\u0434\u043D\u0430:1,\u043E\u0434\u043D\u043E\u0439:1,\u043E\u0434\u043D\u0443:1,\u0434\u0432\u0435:2,\u0434\u0432\u0430:2,\u0434\u0432\u0443\u0445:2,\u0442\u0440\u0438:3,\u0442\u0440\u0435\u0445:3,\u0442\u0440\u0451\u0445:3,\u0447\u0435\u0442\u044B\u0440\u0435:4,\u0447\u0435\u0442\u044B\u0440\u0435\u0445:4,\u0447\u0435\u0442\u044B\u0440\u0451\u0445:4,\u043F\u044F\u0442\u044C:5,\u043F\u044F\u0442\u0438:5,\u0448\u0435\u0441\u0442\u044C:6,\u0448\u0435\u0441\u0442\u0438:6,\u0441\u0435\u043C\u044C:7,\u0441\u0435\u043C\u0438:7,\u0432\u043E\u0441\u0435\u043C\u044C:8,\u0432\u043E\u0441\u0435\u043C\u044C\u043C\u0438:8,\u0434\u0435\u0432\u044F\u0442\u044C:9,\u0434\u0435\u0432\u044F\u0442\u0438:9,\u0434\u0435\u0441\u044F\u0442\u044C:10,\u0434\u0435\u0441\u044F\u0442\u0438:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u044C:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u0438:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u044C:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u0438:12};U.ORDINAL_WORD_DICTIONARY={\u043F\u0435\u0440\u0432\u043E\u0435:1,\u043F\u0435\u0440\u0432\u043E\u0433\u043E:1,\u0432\u0442\u043E\u0440\u043E\u0435:2,\u0432\u0442\u043E\u0440\u043E\u0433\u043E:2,\u0442\u0440\u0435\u0442\u044C\u0435:3,\u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E:3,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435:4,\u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E:4,\u043F\u044F\u0442\u043E\u0435:5,\u043F\u044F\u0442\u043E\u0433\u043E:5,\u0448\u0435\u0441\u0442\u043E\u0435:6,\u0448\u0435\u0441\u0442\u043E\u0433\u043E:6,\u0441\u0435\u0434\u044C\u043C\u043E\u0435:7,\u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E:7,\u0432\u043E\u0441\u044C\u043C\u043E\u0435:8,\u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E:8,\u0434\u0435\u0432\u044F\u0442\u043E\u0435:9,\u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E:9,\u0434\u0435\u0441\u044F\u0442\u043E\u0435:10,\u0434\u0435\u0441\u044F\u0442\u043E\u0433\u043E:10,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:11,\u043E\u0434\u0438\u043D\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:11,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:12,\u0434\u0432\u0435\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:12,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:13,\u0442\u0440\u0438\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:13,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:14,\u0447\u0435\u0442\u044B\u0440\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:14,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:15,\u043F\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:15,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:16,\u0448\u0435\u0441\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:16,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:17,\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:17,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:18,\u0432\u043E\u0441\u0435\u043C\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:18,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0435:19,\u0434\u0435\u0432\u044F\u0442\u043D\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:19,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0435:20,\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u043E\u0433\u043E:20,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":21,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0435":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u0442\u043E\u0440\u043E\u0433\u043E":22,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0442\u0440\u0435\u0442\u044C\u0435\u0433\u043E":23,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0435":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0447\u0435\u0442\u0432\u0435\u0440\u0442\u043E\u0433\u043E":24,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0435":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u043F\u044F\u0442\u043E\u0433\u043E":25,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0435":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0448\u0435\u0441\u0442\u043E\u0433\u043E":26,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0435":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0441\u0435\u0434\u044C\u043C\u043E\u0433\u043E":27,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0435":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0432\u043E\u0441\u044C\u043C\u043E\u0433\u043E":28,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0435":29,"\u0434\u0432\u0430\u0434\u0446\u0430\u0442\u044C \u0434\u0435\u0432\u044F\u0442\u043E\u0433\u043E":29,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0435:30,\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u043E\u0433\u043E:30,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0435":31,"\u0442\u0440\u0438\u0434\u0446\u0430\u0442\u044C \u043F\u0435\u0440\u0432\u043E\u0433\u043E":31};U.TIME_UNIT_DICTIONARY={\u0441\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u044B:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u0443:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0430:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0438:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u0435\u043A:"second",\u0441\u0435\u043A\u0443\u043D\u0434\u043E\u0447\u043A\u0443:"second",\u043C\u0438\u043D:"minute",\u043C\u0438\u043D\u0443\u0442\u0430:"minute",\u043C\u0438\u043D\u0443\u0442:"minute",\u043C\u0438\u043D\u0443\u0442\u044B:"minute",\u043C\u0438\u043D\u0443\u0442\u0443:"minute",\u043C\u0438\u043D\u0443\u0442\u043E\u043A:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0438:"minute",\u043C\u0438\u043D\u0443\u0442\u043A\u0443:"minute",\u0447\u0430\u0441:"hour",\u0447\u0430\u0441\u043E\u0432:"hour",\u0447\u0430\u0441\u0430:"hour",\u0447\u0430\u0441\u0443:"hour",\u0447\u0430\u0441\u0438\u043A\u043E\u0432:"hour",\u0447\u0430\u0441\u0438\u043A\u0430:"hour",\u0447\u0430\u0441\u0438\u043A\u0435:"hour",\u0447\u0430\u0441\u0438\u043A:"hour",\u0434\u0435\u043D\u044C:"d",\u0434\u043D\u044F:"d",\u0434\u043D\u0435\u0439:"d",\u0441\u0443\u0442\u043E\u043A:"d",\u0441\u0443\u0442\u043A\u0438:"d",\u043D\u0435\u0434\u0435\u043B\u044F:"week",\u043D\u0435\u0434\u0435\u043B\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u044E:"week",\u043D\u0435\u0434\u0435\u043B\u044C:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0435:"week",\u043D\u0435\u0434\u0435\u043B\u044C\u043A\u0438:"week",\u043D\u0435\u0434\u0435\u043B\u0435\u043A:"week",\u043C\u0435\u0441\u044F\u0446:"month",\u043C\u0435\u0441\u044F\u0446\u0435:"month",\u043C\u0435\u0441\u044F\u0446\u0435\u0432:"month",\u043C\u0435\u0441\u044F\u0446\u0430:"month",\u043A\u0432\u0430\u0440\u0442\u0430\u043B:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u0435:"quarter",\u043A\u0432\u0430\u0440\u0442\u0430\u043B\u043E\u0432:"quarter",\u0433\u043E\u0434:"year",\u0433\u043E\u0434\u0430:"year",\u0433\u043E\u0434\u0443:"year",\u0433\u043E\u0434\u043E\u0432:"year",\u043B\u0435\u0442:"year",\u0433\u043E\u0434\u0438\u043A:"year",\u0433\u043E\u0434\u0438\u043A\u0430:"year",\u0433\u043E\u0434\u0438\u043A\u043E\u0432:"year"};U.NUMBER_PATTERN=`(?:${wa.matchAnyPattern(U.INTEGER_WORD_DICTIONARY)}|[0-9]+|[0-9]+\\.[0-9]+|\u043F\u043E\u043B|\u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E|\u043F\u0430\u0440(?:\u044B|\u0443)|\\s{0,3})`;function yg(r){let e=r.toLowerCase();return U.INTEGER_WORD_DICTIONARY[e]!==void 0?U.INTEGER_WORD_DICTIONARY[e]:e.match(/несколько/)?3:e.match(/пол/)?.5:e.match(/пар/)?2:e===""?1:parseFloat(e)}U.parseNumberPattern=yg;U.ORDINAL_NUMBER_PATTERN=`(?:${wa.matchAnyPattern(U.ORDINAL_WORD_DICTIONARY)}|[0-9]{1,2}(?:\u0433\u043E|\u043E\u0433\u043E|\u0435|\u043E\u0435)?)`;function iO(r){let e=r.toLowerCase();return U.ORDINAL_WORD_DICTIONARY[e]!==void 0?U.ORDINAL_WORD_DICTIONARY[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}U.parseOrdinalNumberPattern=iO;var Lc="(?:\\s+(?:\u0433\u043E\u0434\u0443|\u0433\u043E\u0434\u0430|\u0433\u043E\u0434|\u0433|\u0433.))?";U.YEAR_PATTERN=`(?:[1-9][0-9]{0,3}${Lc}\\s*(?:\u043D.\u044D.|\u0434\u043E \u043D.\u044D.|\u043D. \u044D.|\u0434\u043E \u043D. \u044D.)|[1-2][0-9]{3}${Lc}|[5-9][0-9]${Lc})`;function sO(r){if(/(год|года|г|г.)/i.test(r)&&(r=r.replace(/(год|года|г|г.)/i,"")),/(до н.э.|до н. э.)/i.test(r))return r=r.replace(/(до н.э.|до н. э.)/i,""),-parseInt(r);if(/(н. э.|н.э.)/i.test(r))return r=r.replace(/(н. э.|н.э.)/i,""),parseInt(r);let e=parseInt(r);return nO.findMostLikelyADYear(e)}U.parseYear=sO;var gg=`(${U.NUMBER_PATTERN})\\s{0,3}(${wa.matchAnyPattern(U.TIME_UNIT_DICTIONARY)})`,mg=new RegExp(gg,"i");U.TIME_UNITS_PATTERN=wa.repeatedTimeunitPattern("(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s{0,3})?",gg);function aO(r){let e={},t=r,n=mg.exec(t);for(;n;)oO(e,n),t=t.substring(n[0].length).trim(),n=mg.exec(t);return e}U.parseTimeUnits=aO;function oO(r,e){let t=yg(e[1]),n=U.TIME_UNIT_DICTIONARY[e[2].toLowerCase()];r[n]=t}});var Tg=p(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});var Vi=Xe(),uO=me(),lO=M(),_g=`(?:(?:\u043E\u043A\u043E\u043B\u043E|\u043F\u0440\u0438\u043C\u0435\u0440\u043D\u043E)\\s*(?:~\\s*)?)?(${Vi.TIME_UNITS_PATTERN})${Vi.REGEX_PARTS.rightBoundary}`,cO=new RegExp(`(?:\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435|\u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0438)\\s*${_g}`,Vi.REGEX_PARTS.flags),dO=new RegExp(_g,"i"),Wc=class extends lO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Vi.REGEX_PARTS.leftBoundary}innerPattern(e){return e.option.forwardDate?dO:cO}innerExtract(e,t){let n=Vi.parseTimeUnits(t[1]);return uO.ParsingComponents.createRelativeFromReference(e.reference,n)}};Yc.default=Wc});var Rg=p(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});var fO=Ue(),Xi=Xe(),wg=Xe(),Ra=Xe(),pO=re(),hO=M(),mO=new RegExp(`(?:\u0441)?\\s*(${Ra.ORDINAL_NUMBER_PATTERN})(?:\\s{0,3}(?:\u043F\u043E|-|\u2013|\u0434\u043E)?\\s{0,3}(${Ra.ORDINAL_NUMBER_PATTERN}))?(?:-|\\/|\\s{0,3}(?:of)?\\s{0,3})(${pO.matchAnyPattern(Xi.MONTH_DICTIONARY)})(?:(?:-|\\/|,?\\s{0,3})(${wg.YEAR_PATTERN}(?![^\\s]\\d)))?${Xi.REGEX_PARTS.rightBoundary}`,Xi.REGEX_PARTS.flags),bg=1,vg=2,yO=3,Eg=4,$c=class extends hO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Xi.REGEX_PARTS.leftBoundary}innerPattern(){return mO}innerExtract(e,t){let n=e.createParsingResult(t.index,t[0]),i=Xi.MONTH_DICTIONARY[t[yO].toLowerCase()],s=Ra.parseOrdinalNumberPattern(t[bg]);if(s>31)return t.index=t.index+t[bg].length,null;if(n.start.assign("month",i),n.start.assign("day",s),t[Eg]){let a=wg.parseYear(t[Eg]);n.start.assign("year",a)}else{let a=fO.findYearClosestToRef(e.refDate,s,i);n.start.imply("year",a)}if(t[vg]){let a=Ra.parseOrdinalNumberPattern(t[vg]);n.end=n.start.clone(),n.end.assign("day",a)}return n}};jc.default=$c});var Og=p(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});var Zi=Xe(),gO=Ue(),_O=re(),Dg=Xe(),TO=M(),bO=new RegExp(`((?:\u0432)\\s*)?(${_O.matchAnyPattern(Zi.MONTH_DICTIONARY)})\\s*(?:[,-]?\\s*(${Dg.YEAR_PATTERN})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,Zi.REGEX_PARTS.flags),vO=2,Mg=3,Bc=class extends TO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Zi.REGEX_PARTS.leftBoundary}innerPattern(){return bO}innerExtract(e,t){let n=t[vO].toLowerCase();if(t[0].length<=3&&!Zi.FULL_MONTH_NAME_DICTIONARY[n])return null;let i=e.createParsingResult(t.index,t.index+t[0].length);i.start.imply("day",1);let s=Zi.MONTH_DICTIONARY[n];if(i.start.assign("month",s),t[Mg]){let a=Dg.parseYear(t[Mg]);i.start.assign("year",a)}else{let a=gO.findYearClosestToRef(e.refDate,1,s);i.start.imply("year",a)}return i}};Gc.default=Bc});var kg=p(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});var Ma=we(),EO=Ur(),Pg=Xe(),Hc=class extends EO.AbstractTimeExpressionParser{constructor(e){super(e)}patternFlags(){return Pg.REGEX_PARTS.flags}primaryPatternLeftBoundary(){return"(^|\\s|T|(?:[^\\p{L}\\p{N}_]))"}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|\u0434\u043E|\u0438|\u043F\u043E|\\?)\\s*"}primaryPrefix(){return"(?:(?:\u0432|\u0441)\\s*)??"}primarySuffix(){return`(?:\\s*(?:\u0443\u0442\u0440\u0430|\u0432\u0435\u0447\u0435\u0440\u0430|\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F))?(?!\\/)${Pg.REGEX_PARTS.rightBoundary}`}extractPrimaryTimeComponents(e,t){let n=super.extractPrimaryTimeComponents(e,t);if(n){if(t[0].endsWith("\u0432\u0435\u0447\u0435\u0440\u0430")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",Ma.Meridiem.PM)):i<6&&n.assign("meridiem",Ma.Meridiem.AM)}if(t[0].endsWith("\u043F\u043E\u0441\u043B\u0435 \u043F\u043E\u043B\u0443\u0434\u043D\u044F")){n.assign("meridiem",Ma.Meridiem.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}t[0].endsWith("\u0443\u0442\u0440\u0430")&&(n.assign("meridiem",Ma.Meridiem.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};zc.default=Hc});var Ag=p(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});var Da=Xe(),wO=me(),RO=M(),MO=ht(),DO=new RegExp(`(${Da.TIME_UNITS_PATTERN})\\s{0,5}\u043D\u0430\u0437\u0430\u0434(?=(?:\\W|$))`,Da.REGEX_PARTS.flags),Kc=class extends RO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Da.REGEX_PARTS.leftBoundary}innerPattern(){return DO}innerExtract(e,t){let n=Da.parseTimeUnits(t[1]),i=MO.reverseTimeUnits(n);return wO.ParsingComponents.createRelativeFromReference(e.reference,i)}};Vc.default=Kc});var Sg=p(Qi=>{"use strict";var OO=Qi&&Qi.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Qi,"__esModule",{value:!0});var PO=OO(Yt()),Xc=class extends PO.default{patternBetween(){return/^\s*(и до|и по|до|по|-)\s*$/i}};Qi.default=Xc});var Ng=p(Ji=>{"use strict";var kO=Ji&&Ji.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ji,"__esModule",{value:!0});var AO=kO(Zt()),Zc=class extends AO.default{patternBetween(){return new RegExp("^\\s*(T|\u0432|,|-)?\\s*$")}};Ji.default=Zc});var Cg=p(sr=>{"use strict";var SO=sr&&sr.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),NO=sr&&sr.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),CO=sr&&sr.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&SO(e,r,t);return NO(e,r),e};Object.defineProperty(sr,"__esModule",{value:!0});var xO=M(),es=CO(er()),Qc=Xe(),IO=new RegExp(`(?:\u0441|\u0441\u043E)?\\s*(\u0441\u0435\u0433\u043E\u0434\u043D\u044F|\u0432\u0447\u0435\u0440\u0430|\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430|\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430)${Qc.REGEX_PARTS.rightBoundary}`,Qc.REGEX_PARTS.flags),Jc=class extends xO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return Qc.REGEX_PARTS.leftBoundary}innerPattern(e){return IO}innerExtract(e,t){let n=t[1].toLowerCase(),i=e.createParsingComponents();switch(n){case"\u0441\u0435\u0433\u043E\u0434\u043D\u044F":return es.today(e.reference);case"\u0432\u0447\u0435\u0440\u0430":return es.yesterday(e.reference);case"\u0437\u0430\u0432\u0442\u0440\u0430":return es.tomorrow(e.reference);case"\u043F\u043E\u0441\u043B\u0435\u0437\u0430\u0432\u0442\u0440\u0430":return es.theDayAfter(e.reference,2);case"\u043F\u043E\u0437\u0430\u0432\u0447\u0435\u0440\u0430":return es.theDayBefore(e.reference,2)}return i}};sr.default=Jc});var xg=p(At=>{"use strict";var FO=At&&At.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),UO=At&&At.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),qO=At&&At.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&FO(e,r,t);return UO(e,r),e},LO=At&&At.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(At,"__esModule",{value:!0});var WO=M(),Gr=qO(er()),YO=pt(),$O=LO(X()),ed=Xe(),jO=new RegExp(`(\u0441\u0435\u0439\u0447\u0430\u0441|\u043F\u0440\u043E\u0448\u043B\u044B\u043C\\s*\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u043F\u0440\u043E\u0448\u043B\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u0441\u0435\u0433\u043E\u0434\u043D\u044F\\s*\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u043E\u0439\\s*\u043D\u043E\u0447\u044C\u044E|\u043D\u043E\u0447\u044C\u044E|\u044D\u0442\u0438\u043C \u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u043E\u043C|\u0443\u0442\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u0434\u0435\u043D\u044C|\u0432\u0435\u0447\u0435\u0440\u043E\u043C|\u0432\u0435\u0447\u0435\u0440\u0430|\u0432\\s*\u043F\u043E\u043B\u043D\u043E\u0447\u044C)${ed.REGEX_PARTS.rightBoundary}`,ed.REGEX_PARTS.flags),td=class extends WO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return ed.REGEX_PARTS.leftBoundary}innerPattern(){return jO}innerExtract(e,t){let n=$O.default(e.refDate),i=t[0].toLowerCase(),s=e.createParsingComponents();if(i==="\u0441\u0435\u0439\u0447\u0430\u0441")return Gr.now(e.reference);if(i==="\u0432\u0435\u0447\u0435\u0440\u043E\u043C"||i==="\u0432\u0435\u0447\u0435\u0440\u0430")return Gr.evening(e.reference);if(i.endsWith("\u0443\u0442\u0440\u043E\u043C")||i.endsWith("\u0443\u0442\u0440\u0430"))return Gr.morning(e.reference);if(i.match(/в\s*полдень/))return Gr.noon(e.reference);if(i.match(/прошлой\s*ночью/))return Gr.lastNight(e.reference);if(i.match(/прошлым\s*вечером/))return Gr.yesterdayEvening(e.reference);if(i.match(/следующей\s*ночью/)){let a=n.hour()<22?1:2;n=n.add(a,"day"),YO.assignSimilarDate(s,n),s.imply("hour",0)}return i.match(/в\s*полночь/)||i.endsWith("\u043D\u043E\u0447\u044C\u044E")?Gr.midnight(e.reference):s}};At.default=td});var Ig=p(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});var ts=Xe(),BO=re(),GO=M(),HO=Lr(),zO=new RegExp(`(?:(?:,|\\(|\uFF08)\\s*)?(?:\u0432\\s*?)?(?:(\u044D\u0442\u0443|\u044D\u0442\u043E\u0442|\u043F\u0440\u043E\u0448\u043B\u044B\u0439|\u043F\u0440\u043E\u0448\u043B\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E)\\s*)?(${BO.matchAnyPattern(ts.WEEKDAY_DICTIONARY)})(?:\\s*(?:,|\\)|\uFF09))?(?:\\s*\u043D\u0430\\s*(\u044D\u0442\u043E\u0439|\u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439)\\s*\u043D\u0435\u0434\u0435\u043B\u0435)?${ts.REGEX_PARTS.rightBoundary}`,ts.REGEX_PARTS.flags),KO=1,VO=2,XO=3,rd=class extends GO.AbstractParserWithWordBoundaryChecking{innerPattern(){return zO}patternLeftBoundary(){return ts.REGEX_PARTS.leftBoundary}innerExtract(e,t){let n=t[VO].toLowerCase(),i=ts.WEEKDAY_DICTIONARY[n],s=t[KO],a=t[XO],o=s||a;o=o||"",o=o.toLowerCase();let u=null;o=="\u043F\u0440\u043E\u0448\u043B\u044B\u0439"||o=="\u043F\u0440\u043E\u0448\u043B\u0443\u044E"||o=="\u043F\u0440\u043E\u0448\u043B\u043E\u0439"?u="last":o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0443\u044E"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||o=="\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0433\u043E"?u="next":(o=="\u044D\u0442\u043E\u0442"||o=="\u044D\u0442\u0443"||o=="\u044D\u0442\u043E\u0439")&&(u="this");let l=HO.toDayJSWeekday(e.refDate,i,u);return e.createParsingComponents().assign("weekday",i).imply("day",l.date()).imply("month",l.month()+1).imply("year",l.year())}};nd.default=rd});var Ug=p(ns=>{"use strict";var ZO=ns&&ns.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(ns,"__esModule",{value:!0});var rs=Xe(),Fg=me(),QO=ZO(X()),JO=M(),eP=re(),tP=new RegExp(`(\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C|\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439|\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439|\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C|\u043D\u0430 \u044D\u0442\u043E\u0439|\u0432 \u044D\u0442\u043E\u043C)\\s*(${eP.matchAnyPattern(rs.TIME_UNIT_DICTIONARY)})(?=\\s*)${rs.REGEX_PARTS.rightBoundary}`,rs.REGEX_PARTS.flags),rP=1,nP=2,id=class extends JO.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return rs.REGEX_PARTS.leftBoundary}innerPattern(){return tP}innerExtract(e,t){let n=t[rP].toLowerCase(),i=t[nP].toLowerCase(),s=rs.TIME_UNIT_DICTIONARY[i];if(n=="\u043D\u0430 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u0439"||n=="\u0432 \u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0435\u043C"){let u={};return u[s]=1,Fg.ParsingComponents.createRelativeFromReference(e.reference,u)}if(n=="\u0432 \u043F\u0440\u043E\u0448\u043B\u043E\u043C"||n=="\u043D\u0430 \u043F\u0440\u043E\u0448\u043B\u043E\u0439"){let u={};return u[s]=-1,Fg.ParsingComponents.createRelativeFromReference(e.reference,u)}let a=e.createParsingComponents(),o=QO.default(e.reference.instant);return s.match(/week/i)?(o=o.add(-o.get("d"),"d"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.imply("year",o.year())):s.match(/month/i)?(o=o.add(-o.date()+1,"d"),a.imply("day",o.date()),a.assign("year",o.year()),a.assign("month",o.month()+1)):s.match(/year/i)&&(o=o.add(-o.date()+1,"d"),o=o.add(-o.month(),"month"),a.imply("day",o.date()),a.imply("month",o.month()+1),a.assign("year",o.year())),a}};ns.default=id});var qg=p(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});var is=Xe(),iP=me(),sP=M(),aP=ht(),oP=new RegExp(`(\u044D\u0442\u0438|\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435|\u043F\u0440\u043E\u0448\u043B\u044B\u0435|\u0441\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0435|\u043F\u043E\u0441\u043B\u0435|\u0447\u0435\u0440\u0435\u0437|\\+|-)\\s*(${is.TIME_UNITS_PATTERN})${is.REGEX_PARTS.rightBoundary}`,is.REGEX_PARTS.flags),sd=class extends sP.AbstractParserWithWordBoundaryChecking{patternLeftBoundary(){return is.REGEX_PARTS.leftBoundary}innerPattern(){return oP}innerExtract(e,t){let n=t[1].toLowerCase(),i=is.parseTimeUnits(t[2]);switch(n){case"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0435":case"\u043F\u0440\u043E\u0448\u043B\u044B\u0435":case"-":i=aP.reverseTimeUnits(i);break}return iP.ParsingComponents.createRelativeFromReference(e.reference,i)}};ad.default=sd});var Yg=p(Ne=>{"use strict";var at=Ne&&Ne.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Ne,"__esModule",{value:!0});Ne.createConfiguration=Ne.createCasualConfiguration=Ne.parseDate=Ne.parse=Ne.strict=Ne.casual=void 0;var uP=at(Tg()),lP=at(Rg()),cP=at(Og()),dP=at(kg()),fP=at(Ag()),pP=at(Sg()),hP=at(Ng()),mP=Qt(),yP=at(Cg()),gP=at(xg()),_P=at(Ig()),TP=at(Ug()),Lg=Mt(),bP=at(Wr()),vP=at(qg());Ne.casual=new Lg.Chrono(Wg());Ne.strict=new Lg.Chrono(od(!0));function EP(r,e,t){return Ne.casual.parse(r,e,t)}Ne.parse=EP;function wP(r,e,t){return Ne.casual.parseDate(r,e,t)}Ne.parseDate=wP;function Wg(){let r=od(!1);return r.parsers.unshift(new yP.default),r.parsers.unshift(new gP.default),r.parsers.unshift(new cP.default),r.parsers.unshift(new TP.default),r.parsers.unshift(new vP.default),r}Ne.createCasualConfiguration=Wg;function od(r=!0){return mP.includeCommonConfiguration({parsers:[new bP.default(!0),new uP.default,new lP.default,new _P.default,new dP.default(r),new fP.default],refiners:[new hP.default,new pP.default]},r)}Ne.createConfiguration=od});var we=p(W=>{"use strict";var RP=W&&W.__createBinding||(Object.create?function(r,e,t,n){n===void 0&&(n=t),Object.defineProperty(r,n,{enumerable:!0,get:function(){return e[t]}})}:function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}),MP=W&&W.__setModuleDefault||(Object.create?function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}:function(r,e){r.default=e}),Mr=W&&W.__importStar||function(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)t!=="default"&&Object.prototype.hasOwnProperty.call(r,t)&&RP(e,r,t);return MP(e,r),e};Object.defineProperty(W,"__esModule",{value:!0});W.parseDate=W.parse=W.casual=W.strict=W.ru=W.zh=W.nl=W.pt=W.ja=W.fr=W.de=W.Meridiem=W.Chrono=W.en=void 0;var ud=Mr(Mu());W.en=ud;var DP=Mt();Object.defineProperty(W,"Chrono",{enumerable:!0,get:function(){return DP.Chrono}});var OP;(function(r){r[r.AM=0]="AM",r[r.PM=1]="PM"})(OP=W.Meridiem||(W.Meridiem={}));var PP=Mr(Xh());W.de=PP;var kP=Mr(Mm());W.fr=kP;var AP=Mr(xm());W.ja=AP;var SP=Mr(Xm());W.pt=SP;var NP=Mr(xy());W.nl=NP;var CP=Mr(hg());W.zh=CP;var xP=Mr(Yg());W.ru=xP;W.strict=ud.strict;W.casual=ud.casual;function IP(r,e,t){return W.casual.parse(r,e,t)}W.parse=IP;function FP(r,e,t){return W.casual.parseDate(r,e,t)}W.parseDate=FP});var Ht=p(kr=>{"use strict";kr.__esModule=!0;var ck;(function(r){r.AND="AND",r.OR="OR",r.XOR="XOR",r.NOT="NOT"})(ck=kr.Operators||(kr.Operators={}));var dk;(function(r){r.OPEN_PARENTHESIS="(",r.CLOSE_PARENTHESIS=")"})(dk=kr.StructuralCharacters||(kr.StructuralCharacters={}));var fk;(function(r){r.IDENTIFIER="IDENTIFIER",r.OPERATOR="OPERATOR",r.STRUCTURAL_CHARACTER="STRUCTURAL_CHARACTER",r.EOF="EOF",r.COMMENT="COMMENT"})(fk=kr.Tokens||(kr.Tokens={}))});var Ad=p(ja=>{"use strict";ja.__esModule=!0;var ye=Ht();ja.OPERATOR_PRECEDENCE={NOT:0,XOR:1,AND:2,OR:3};ja.VALID_TOKENS={identifierOnly:[{name:ye.Tokens.IDENTIFIER},{name:ye.Tokens.STRUCTURAL_CHARACTER,value:ye.StructuralCharacters.OPEN_PARENTHESIS}],identifierOrNot:[{name:ye.Tokens.IDENTIFIER},{name:ye.Tokens.STRUCTURAL_CHARACTER,value:ye.StructuralCharacters.OPEN_PARENTHESIS},{name:ye.Tokens.OPERATOR,value:ye.Operators.NOT}],binaryOperator:[{name:ye.Tokens.OPERATOR,value:ye.Operators.AND},{name:ye.Tokens.OPERATOR,value:ye.Operators.OR},{name:ye.Tokens.OPERATOR,value:ye.Operators.XOR}],binaryOperatorOrClose:[{name:ye.Tokens.OPERATOR,value:ye.Operators.AND},{name:ye.Tokens.OPERATOR,value:ye.Operators.OR},{name:ye.Tokens.OPERATOR,value:ye.Operators.XOR},{name:ye.Tokens.STRUCTURAL_CHARACTER,value:ye.StructuralCharacters.CLOSE_PARENTHESIS}]}});var Sd=p(dr=>{"use strict";dr.__esModule=!0;var Ln=Ht();dr.STRUCTURAL_CHARACTERS={"(":Ln.StructuralCharacters.OPEN_PARENTHESIS,")":Ln.StructuralCharacters.CLOSE_PARENTHESIS};dr.OPERATORS={AND:Ln.Operators.AND,OR:Ln.Operators.OR,XOR:Ln.Operators.XOR,NOT:Ln.Operators.NOT};dr.SEPARATORS=new Set([32,9,10,13].map(function(r){return String.fromCodePoint(r)}));dr.QUOTED_IDENTIFIER_DELIMITER=String.fromCodePoint(34);dr.COMMENT_DELIMITER=String.fromCodePoint(35);dr.EOL=String.fromCodePoint(10);dr.ESCAPE_CHARACTER=String.fromCodePoint(92)});var __=p(fr=>{"use strict";var Nd=fr&&fr.__assign||function(){return Nd=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}return r},Nd.apply(this,arguments)};fr.__esModule=!0;var g_=Ht(),en=Sd();fr.createResult=function(r,e,t){return{token:Nd({name:r},e!==null?{value:e}:{}),remainingString:t}};fr.getComment=function(r){for(var e=r.length,t=0;t<r.length;t+=1){var n=r[t];if(n===en.EOL){e=t;break}}return fr.createResult(g_.Tokens.COMMENT,r.slice(0,e),r.slice(e+1))};fr.getQuotedIdentifier=function(r){for(var e=!1,t="",n=null,i=0;i<r.length;i+=1){var s=r[i];if(n===null)s===en.QUOTED_IDENTIFIER_DELIMITER?e?t=t.slice(-1)+en.QUOTED_IDENTIFIER_DELIMITER:n=i:(s===en.ESCAPE_CHARACTER?e=!0:e=!1,t=t+=s);else{if(!en.SEPARATORS.has(s)&&!en.STRUCTURAL_CHARACTERS[s])throw new Error("Unexpected character: "+s+" Expected ) character or separator");break}}if(n===null)throw new Error("Unexpected end of expression: expected "+en.QUOTED_IDENTIFIER_DELIMITER+" character");return fr.createResult(g_.Tokens.IDENTIFIER,t,r.slice(n+1))}});var T_=p(Cd=>{"use strict";Cd.__esModule=!0;var Wn=Ht(),ut=Sd(),Yn=__();Cd.lex=function(r){for(var e=null,t=null,n=null,i=0;i<r.length;i+=1){var s=r[i];if(e===null){if(!ut.SEPARATORS.has(s)){var a=ut.STRUCTURAL_CHARACTERS[s];if(a){var o=r[i+1];if(a===Wn.StructuralCharacters.CLOSE_PARENTHESIS&&o&&!ut.SEPARATORS.has(o)&&o!==Wn.StructuralCharacters.CLOSE_PARENTHESIS)throw new Error("Unexpected character: "+o+". A closing parenthesis should be followed by another closing parenthesis or whitespace");return Yn.createResult(Wn.Tokens.STRUCTURAL_CHARACTER,ut.STRUCTURAL_CHARACTERS[s],r.slice(i+1))}if(s===ut.QUOTED_IDENTIFIER_DELIMITER)return Yn.getQuotedIdentifier(r.slice(i+1));if(s===ut.COMMENT_DELIMITER)return Yn.getComment(r.slice(i+1));e=i}}else if(ut.SEPARATORS.has(s)||ut.STRUCTURAL_CHARACTERS[s]){t=i,n=s;break}else if(s===ut.QUOTED_IDENTIFIER_DELIMITER||s===ut.COMMENT_DELIMITER)throw new Error("Unexpected character: "+s)}if(e!==null){t=t!=null?t:r.length;var u=r.slice(e,t),l=r.slice(t);if(ut.OPERATORS[u]){if(n&&!ut.SEPARATORS.has(n))throw new Error("Unexpected character: "+n+". Operators should be separated using whitespace");return Yn.createResult(Wn.Tokens.OPERATOR,ut.OPERATORS[u],l)}else return Yn.createResult(Wn.Tokens.IDENTIFIER,u,l)}return Yn.createResult(Wn.Tokens.EOF,null,"")}});var b_=p(pr=>{"use strict";var pk=pr&&pr.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};pr.__esModule=!0;var hk=T_(),$n=Ht(),Ba=Ad();pr.newTokenGenerator=function(r){var e=r;return function(t,n){for(n===void 0&&(n=!1);;){var i=hk.lex(e),s=i.token,a=i.remainingString;if(e=a,s.name!==$n.Tokens.COMMENT)return pr.validateToken(s,t,n),s}}};pr.getValue=function(r,e){var t=r(Ba.VALID_TOKENS.identifierOrNot),n=t.value===$n.Operators.NOT;n&&(t=r(Ba.VALID_TOKENS.identifierOnly));var i=t.name===$n.Tokens.STRUCTURAL_CHARACTER?e(r,!0):[t];return n?pk(i,[{name:$n.Tokens.OPERATOR,value:$n.Operators.NOT}]):i};pr.previousOperatorTakesPrecedent=function(r,e){return Ba.OPERATOR_PRECEDENCE[r]<=Ba.OPERATOR_PRECEDENCE[e]};pr.validateToken=function(r,e,t){if(t===void 0&&(t=!1),r.name===$n.Tokens.EOF){if(t)return;throw new Error("Unexpected end of expression")}for(var n=0,i=e;n<i.length;n++){var s=i[n];if(s.name===r.name&&(!s.value||s.value===r.value))return}throw new TypeError("Invalid token")}});var Id=p(ms=>{"use strict";var jn=ms&&ms.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};ms.__esModule=!0;var v_=Ht(),E_=Ad(),Ga=b_();ms.parse=function(r){if(typeof r!="string")throw new Error("Expected string but received "+typeof r);var e=Ga.newTokenGenerator(r);return xd(e)};var xd=function(r,e){e===void 0&&(e=!1);for(var t=jn(Ga.getValue(r,xd)),n=[];;){var i=e?E_.VALID_TOKENS.binaryOperatorOrClose:E_.VALID_TOKENS.binaryOperator,s=r(i,!e);if(s.name===v_.Tokens.EOF||s.name===v_.Tokens.STRUCTURAL_CHARACTER)return jn(t,jn(n).reverse());for(;n.length;){var a=n[n.length-1]||null;if(a&&Ga.previousOperatorTakesPrecedent(a.value,s.value))t=jn(t,[a]),n=n.slice(0,-1);else break}n=jn(n,[s]),t=jn(t,Ga.getValue(r,xd))}}});var Fd=p(hr=>{"use strict";hr.__esModule=!0;var w_=Ht();hr.andUtil=function(r,e){return r&&e};hr.orUtil=function(r,e){return r||e};hr.xorUtil=function(r,e){return r!==e};hr.notUtil=function(r){return!r};hr.isIdentifier=function(r){var e=r.name,t=r.value;return e===w_.Tokens.IDENTIFIER&&typeof t=="string"};hr.isOperator=function(r){var e=r.name,t=r.value;return e===w_.Tokens.OPERATOR&&typeof t=="string"};hr.throwInvalidExpression=function(r){throw new TypeError("Invalid postfix expression: "+r)}});var R_=p(Ld=>{"use strict";var ys;Ld.__esModule=!0;var Ud=Ht(),qd=Fd();Ld.OPERATOR_MAP=(ys={},ys[Ud.Operators.AND]=qd.andUtil,ys[Ud.Operators.OR]=qd.orUtil,ys[Ud.Operators.XOR]=qd.xorUtil,ys)});var D_=p(rn=>{"use strict";var Wd=rn&&rn.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,i++)n[i]=s[a];return n};rn.__esModule=!0;var mk=Id(),M_=Ht(),yk=R_(),tn=Fd();rn.getEvaluator=function(r){var e=mk.parse(r);return function(t){return rn.evaluate(e,t)}};rn.evaluate=function(r,e){if(!Array.isArray(r))throw new Error(r+" should be an array. evaluate takes in a parsed expression. Use in combination with parse or use getEvaluator");var t=r.reduce(function(n,i,s){if(!(i&&(tn.isIdentifier(i)||tn.isOperator(i))))throw new Error("Invalid token: "+i+". Found in parsed expression at index "+s);if(i.name===M_.Tokens.IDENTIFIER)return Wd(n,[Boolean(e[i.value])]);var a=n[n.length-2],o=n[n.length-1];if(i.value===M_.Operators.NOT)return o===void 0&&tn.throwInvalidExpression("missing identifier"),Wd(n.slice(0,-1),[tn.notUtil(o)]);(o===void 0||a===void 0)&&tn.throwInvalidExpression("missing identifier");var u=yk.OPERATOR_MAP[i.value];return u||tn.throwInvalidExpression("unknown operator"),Wd(n.slice(0,-2),[u(a,o)])},[]);return t.length!==1&&tn.throwInvalidExpression("too many identifiers after evaluation"),t[0]}});var P_=p(gs=>{"use strict";gs.__esModule=!0;var O_=D_();gs.getEvaluator=O_.getEvaluator;gs.evaluate=O_.evaluate;var gk=Id();gs.parse=gk.parse});var wk={};$_(wk,{default:()=>ao});module.exports=j_(wk);var x_=require("obsidian");var Sa=require("obsidian");var Mk=new Error("timeout while waiting for mutex to become available"),Dk=new Error("mutex already locked"),B_=new Error("request for lock canceled"),lf=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},fo=class{constructor(e,t=B_){if(this._maxConcurrency=e,this._cancelError=t,this._queue=[],this._waiters=[],e<=0)throw new Error("semaphore must be initialized to a positive value");this._value=e}acquire(){let e=this.isLocked(),t=new Promise((n,i)=>this._queue.push({resolve:n,reject:i}));return e||this._dispatch(),t}runExclusive(e){return lf(this,void 0,void 0,function*(){let[t,n]=yield this.acquire();try{return yield e(t)}finally{n()}})}waitForUnlock(){return lf(this,void 0,void 0,function*(){return this.isLocked()?new Promise(t=>this._waiters.push({resolve:t})):Promise.resolve()})}isLocked(){return this._value<=0}release(){if(this._maxConcurrency>1)throw new Error("this method is unavailable on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){let e=this._currentReleaser;this._currentReleaser=void 0,e()}}cancel(){this._queue.forEach(e=>e.reject(this._cancelError)),this._queue=[]}_dispatch(){let e=this._queue.shift();if(!e)return;let t=!1;this._currentReleaser=()=>{t||(t=!0,this._value++,this._resolveWaiters(),this._dispatch())},e.resolve([this._value--,this._currentReleaser])}_resolveWaiters(){this._waiters.forEach(e=>e.resolve()),this._waiters=[]}},G_=function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return new(t||(t=Promise))(function(s,a){function o(c){try{l(n.next(c))}catch(d){a(d)}}function u(c){try{l(n.throw(c))}catch(d){a(d)}}function l(c){c.done?s(c.value):i(c.value).then(o,u)}l((n=n.apply(r,e||[])).next())})},Ps=class{constructor(e){this._semaphore=new fo(1,e)}acquire(){return G_(this,void 0,void 0,function*(){let[,e]=yield this._semaphore.acquire();return e})}runExclusive(e){return this._semaphore.runExclusive(()=>e())}isLocked(){return this._semaphore.isLocked()}waitForUnlock(){return this._semaphore.waitForUnlock()}release(){this._semaphore.release()}cancel(){return this._semaphore.cancel()}};var Qn=class{constructor(){this.hideTaskCount=!1;this.hideBacklinks=!1;this.hidePriority=!1;this.hideStartDate=!1;this.hideScheduledDate=!1;this.hideDoneDate=!1;this.hideDueDate=!1;this.hideRecurrenceRule=!1;this.hideEditButton=!1;this.hideUrgency=!0;this.shortMode=!1;this.explainQuery=!1}},un=class{constructor(e,t){this.defaultLayout=["description","priority","recurrenceRule","startDate","scheduledDate","dueDate","doneDate","blockLink"];e?this.options=e:this.options=new Qn,t?this.layoutComponents=t:this.layoutComponents=this.defaultLayout,this.layoutComponents=this.applyOptions(this.options)}applyOptions(e){let t=(i,s,a)=>s?i.filter(o=>o!=a):i,n=this.layoutComponents;return n=t(n,e.hidePriority,"priority"),n=t(n,e.hideRecurrenceRule,"recurrenceRule"),n=t(n,e.hideStartDate,"startDate"),n=t(n,e.hideScheduledDate,"scheduledDate"),n=t(n,e.hideDueDate,"dueDate"),n=t(n,e.hideDoneDate,"doneDate"),n}};var ks=["MO","TU","WE","TH","FR","SA","SU"],Te=function(){function r(e,t){if(t===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=t}return r.fromStr=function(e){return new r(ks.indexOf(e))},r.prototype.nth=function(e){return this.n===e?this:new r(this.weekday,e)},r.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},r.prototype.toString=function(){var e=ks[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},r.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},r}();var oe=function(r){return r!=null},rt=function(r){return typeof r=="number"},po=function(r){return typeof r=="string"&&ks.includes(r)},Fe=Array.isArray,dt=function(r,e){e===void 0&&(e=r),arguments.length===1&&(e=r,r=0);for(var t=[],n=r;n<e;n++)t.push(n);return t};var G=function(r,e){var t=0,n=[];if(Fe(r))for(;t<e;t++)n[t]=[].concat(r);else for(;t<e;t++)n[t]=r;return n},cf=function(r){return Fe(r)?r:[r]};function Nr(r,e,t){t===void 0&&(t=" ");var n=String(r);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>t.length&&(t+=G(t,e/t.length)),t.slice(0,e)+String(n))}var df=function(r,e,t){var n=r.split(e);return t?n.slice(0,t).concat([n.slice(t).join(e)]):n},Ye=function(r,e){var t=r%e;return t*e<0?t+e:t},As=function(r,e){return{div:Math.floor(r/e),mod:Ye(r,e)}},nt=function(r){return!oe(r)||r.length===0},ge=function(r){return!nt(r)},K=function(r,e){return ge(r)&&r.indexOf(e)!==-1};var yr;(function(r){r.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],r.ONE_DAY=1e3*60*60*24,r.MAXYEAR=9999,r.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),r.PY_WEEKDAYS=[6,0,1,2,3,4,5],r.getYearDay=function(e){var t=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((t.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/r.ONE_DAY)+1},r.isLeapYear=function(e){return e%4===0&&e%100!==0||e%400===0},r.isDate=function(e){return e instanceof Date},r.isValidDate=function(e){return r.isDate(e)&&!isNaN(e.getTime())},r.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},r.daysBetween=function(e,t){var n=e.getTime()-r.tzOffset(e),i=t.getTime()-r.tzOffset(t),s=n-i;return Math.round(s/r.ONE_DAY)},r.toOrdinal=function(e){return r.daysBetween(e,r.ORDINAL_BASE)},r.fromOrdinal=function(e){return new Date(r.ORDINAL_BASE.getTime()+e*r.ONE_DAY)},r.getMonthDays=function(e){var t=e.getUTCMonth();return t===1&&r.isLeapYear(e.getUTCFullYear())?29:r.MONTH_DAYS[t]},r.getWeekday=function(e){return r.PY_WEEKDAYS[e.getUTCDay()]},r.monthRange=function(e,t){var n=new Date(Date.UTC(e,t,1));return[r.getWeekday(n),r.getMonthDays(n)]},r.combine=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},r.clone=function(e){var t=new Date(e.getTime());return t},r.cloneDates=function(e){for(var t=[],n=0;n<e.length;n++)t.push(r.clone(e[n]));return t},r.sort=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},r.timeToUntilString=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[Nr(n.getUTCFullYear().toString(),4,"0"),Nr(n.getUTCMonth()+1,2,"0"),Nr(n.getUTCDate(),2,"0"),"T",Nr(n.getUTCHours(),2,"0"),Nr(n.getUTCMinutes(),2,"0"),Nr(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},r.untilStringToDate=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(yr||(yr={}));var x=yr;var H_=function(){function r(e,t){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=t,e==="between"?(this.maxDate=t.inc?t.before:new Date(t.before.getTime()-1),this.minDate=t.inc?t.after:new Date(t.after.getTime()+1)):e==="before"?this.maxDate=t.inc?t.dt:new Date(t.dt.getTime()-1):e==="after"&&(this.minDate=t.inc?t.dt:new Date(t.dt.getTime()+1))}return r.prototype.accept=function(e){++this.total;var t=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(t)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return t?!0:(this.add(e),!1);return this.add(e)},r.prototype.add=function(e){return this._result.push(e),!0},r.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},r.prototype.clone=function(){return new r(this.method,this.args)},r}(),Vt=H_;var xf=Os(Cf(),1),{__extends:cn,__assign:Be,__rest:Fk,__decorate:Uk,__param:qk,__metadata:Lk,__awaiter:Wk,__generator:Yk,__exportStar:$k,__createBinding:jk,__values:Bk,__read:Gk,__spread:Hk,__spreadArrays:zk,__spreadArray:T,__await:Kk,__asyncGenerator:Vk,__asyncDelegator:Xk,__asyncValues:Zk,__makeTemplateObject:Qk,__importStar:Jk,__importDefault:eA,__classPrivateFieldGet:tA,__classPrivateFieldSet:rA,__classPrivateFieldIn:nA}=xf.default;var z_=function(r){cn(e,r);function e(t,n,i){var s=r.call(this,t,n)||this;return s.iterator=i,s}return e.prototype.add=function(t){return this.iterator(t,this._result.length)?(this._result.push(t),!0):!1},e}(Vt),mo=z_;var K_={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Cr=K_;var If=function(r,e){return r.indexOf(e)!==-1},V_=function(r){return r.toString()},X_=function(r,e,t){return"".concat(e," ").concat(t,", ").concat(r)},Z_=function(){function r(e,t,n,i){if(t===void 0&&(t=V_),n===void 0&&(n=Cr),i===void 0&&(i=X_),this.text=[],this.language=n||Cr,this.gettext=t,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var s=[].concat(this.options.bymonthday),a=[].concat(this.options.bynmonthday);s.sort(function(c,d){return c-d}),a.sort(function(c,d){return d-c}),this.bymonthday=s.concat(a),this.bymonthday.length||(this.bymonthday=null)}if(oe(this.origOptions.byweekday)){var o=Fe(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(o);this.byweekday={allWeeks:o.filter(function(c){return!c.n}),someWeeks:o.filter(function(c){return Boolean(c.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var l=function(c,d){return c.weekday-d.weekday};this.byweekday.allWeeks.sort(l),this.byweekday.someWeeks.sort(l),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return r.isFullyConvertible=function(e){var t=!0;if(!(e.options.freq in r.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(If(["dtstart","wkst","freq"],n))return!0;if(!If(r.IMPLEMENTED[e.options.freq],n))return!1}return t},r.prototype.isFullyConvertible=function(){return r.isFullyConvertible(this.rrule)},r.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in r.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[O.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var t=this.options.until;this.add(this.dateFormatter(t.getUTCFullYear(),this.language.monthNames[t.getUTCMonth()],t.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},r.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},r.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},r.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},r.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},r.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},r.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},r.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},r.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},r.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},r.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},r.prototype.nth=function(e){e=parseInt(e.toString(),10);var t,n=this.gettext;if(e===-1)return n("last");var i=Math.abs(e);switch(i){case 1:case 21:case 31:t=i+n("st");break;case 2:case 22:t=i+n("nd");break;case 3:case 23:t=i+n("rd");break;default:t=i+n("th")}return e<0?t+" "+n("last"):t},r.prototype.monthtext=function(e){return this.language.monthNames[e-1]},r.prototype.weekdaytext=function(e){var t=rt(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[t]},r.prototype.plural=function(e){return e%100!==1},r.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},r.prototype.list=function(e,t,n,i){var s=this;i===void 0&&(i=","),Fe(e)||(e=[e]);var a=function(u,l,c){for(var d="",f=0;f<u.length;f++)f!==0&&(f===u.length-1?d+=" "+c+" ":d+=l+" "),d+=u[f];return d};t=t||function(u){return u.toString()};var o=function(u){return t&&t.call(s,u)};return n?a(e.map(o),i,n):e.map(o).join(i+" ")},r}(),qt=Z_;var Q_=function(){function r(e){this.done=!0,this.rules=e}return r.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},r.prototype.isDone=function(){return this.done&&this.symbol===null},r.prototype.nextSymbol=function(){var e,t;this.symbol=null,this.value=null;do{if(this.done)return!1;var n=void 0;e=null;for(var i in this.rules){n=this.rules[i];var s=n.exec(this.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,t=i)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(t==="SKIP");return this.symbol=t,this.value=e,!0},r.prototype.accept=function(e){if(this.symbol===e){if(this.value){var t=this.value;return this.nextSymbol(),t}return this.nextSymbol(),!0}return!1},r.prototype.acceptNumber=function(){return this.accept("number")},r.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},r}();function Jn(r,e){e===void 0&&(e=Cr);var t={},n=new Q_(e.tokens);if(!n.start(r))return null;return i(),t;function i(){n.expect("every");var f=n.acceptNumber();if(f&&(t.interval=parseInt(f[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":t.freq=O.DAILY,n.nextSymbol()&&(a(),d());break;case"weekday(s)":t.freq=O.WEEKLY,t.byweekday=[O.MO,O.TU,O.WE,O.TH,O.FR],n.nextSymbol(),d();break;case"week(s)":t.freq=O.WEEKLY,n.nextSymbol()&&(s(),d());break;case"hour(s)":t.freq=O.HOURLY,n.nextSymbol()&&(s(),d());break;case"minute(s)":t.freq=O.MINUTELY,n.nextSymbol()&&(s(),d());break;case"month(s)":t.freq=O.MONTHLY,n.nextSymbol()&&(s(),d());break;case"year(s)":t.freq=O.YEARLY,n.nextSymbol()&&(s(),d());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":t.freq=O.WEEKLY;var h=n.symbol.substr(0,2).toUpperCase();if(t.byweekday=[O[h]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var _=u();if(!_)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");t.byweekday.push(O[_]),n.nextSymbol()}c(),d();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(t.freq=O.YEARLY,t.bymonth=[o()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=o();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected month");t.bymonth.push(m),n.nextSymbol()}s(),d();break;default:throw new Error("Unknown symbol")}}function s(){var f=n.accept("on"),h=n.accept("the");if(!!(f||h))do{var _=l(),m=u(),g=o();if(_)m?(n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(O[m].nth(_))):(t.bymonthday||(t.bymonthday=[]),t.bymonthday.push(_),n.accept("day(s)"));else if(m)n.nextSymbol(),t.byweekday||(t.byweekday=[]),t.byweekday.push(O[m]);else if(n.symbol==="weekday(s)")n.nextSymbol(),t.byweekday||(t.byweekday=[O.MO,O.TU,O.WE,O.TH,O.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var R=n.acceptNumber();if(!R)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(t.byweekno=[parseInt(R[0],10)];n.accept("comma");){if(R=n.acceptNumber(),!R)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.byweekno.push(parseInt(R[0],10))}}else if(g)n.nextSymbol(),t.bymonth||(t.bymonth=[]),t.bymonth.push(g);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function a(){var f=n.accept("at");if(!!f)do{var h=n.acceptNumber();if(!h)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(t.byhour=[parseInt(h[0],10)];n.accept("comma");){if(h=n.acceptNumber(),!h)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");t.byhour.push(parseInt(h[0],10))}}while(n.accept("comma")||n.accept("at"))}function o(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function l(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var f=parseInt(n.value[1],10);if(f<-366||f>366)throw new Error("Nth out of range: "+f);return n.nextSymbol(),n.accept("last")?-f:f;default:return!1}}function c(){n.accept("on"),n.accept("the");var f=l();if(!!f)for(t.bymonthday=[f],n.nextSymbol();n.accept("comma");){if(f=l(),!f)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");t.bymonthday.push(f),n.nextSymbol()}}function d(){if(n.symbol==="until"){var f=Date.parse(n.text);if(!f)throw new Error("Cannot parse until date:"+n.text);t.until=new Date(f)}else n.accept("for")&&(t.count=parseInt(n.value[0],10),n.expect("number"))}}var $;(function(r){r[r.YEARLY=0]="YEARLY",r[r.MONTHLY=1]="MONTHLY",r[r.WEEKLY=2]="WEEKLY",r[r.DAILY=3]="DAILY",r[r.HOURLY=4]="HOURLY",r[r.MINUTELY=5]="MINUTELY",r[r.SECONDLY=6]="SECONDLY"})($||($={}));function ei(r){return r<$.HOURLY}var Ff=function(r,e){return e===void 0&&(e=Cr),new O(Jn(r,e)||void 0)},dn=["count","until","interval","byweekday","bymonthday","bymonth"];qt.IMPLEMENTED=[];qt.IMPLEMENTED[$.HOURLY]=dn;qt.IMPLEMENTED[$.MINUTELY]=dn;qt.IMPLEMENTED[$.DAILY]=["byhour"].concat(dn);qt.IMPLEMENTED[$.WEEKLY]=dn;qt.IMPLEMENTED[$.MONTHLY]=dn;qt.IMPLEMENTED[$.YEARLY]=["byweekno","byyearday"].concat(dn);var Uf=function(r,e,t,n){return new qt(r,e,t,n).toString()},qf=qt.isFullyConvertible;var fn=function(){function r(e,t,n,i){this.hour=e,this.minute=t,this.second=n,this.millisecond=i||0}return r.prototype.getHours=function(){return this.hour},r.prototype.getMinutes=function(){return this.minute},r.prototype.getSeconds=function(){return this.second},r.prototype.getMilliseconds=function(){return this.millisecond},r.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},r}();var Lf=function(r){cn(e,r);function e(t,n,i,s,a,o,u){var l=r.call(this,s,a,o,u)||this;return l.year=t,l.month=n,l.day=i,l}return e.fromDate=function(t){return new this(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.valueOf()%1e3)},e.prototype.getWeekday=function(){return yr.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(t){this.year+=t},e.prototype.addMonths=function(t){if(this.month+=t,this.month>12){var n=Math.floor(this.month/12),i=Ye(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(t,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+t*7:this.day+=-(this.getWeekday()-n)+t*7,this.fixDay()},e.prototype.addDaily=function(t){this.day+=t,this.fixDay()},e.prototype.addHours=function(t,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/t)*t);;){this.hour+=t;var s=As(this.hour,24),a=s.div,o=s.mod;if(a&&(this.hour=o,this.addDaily(a)),nt(i)||K(i,this.hour))break}},e.prototype.addMinutes=function(t,n,i,s){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/t)*t);;){this.minute+=t;var a=As(this.minute,60),o=a.div,u=a.mod;if(o&&(this.minute=u,this.addHours(o,!1,i)),(nt(i)||K(i,this.hour))&&(nt(s)||K(s,this.minute)))break}},e.prototype.addSeconds=function(t,n,i,s,a){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/t)*t);;){this.second+=t;var o=As(this.second,60),u=o.div,l=o.mod;if(u&&(this.second=l,this.addMinutes(u,!1,i,s)),(nt(i)||K(i,this.hour))&&(nt(s)||K(s,this.minute))&&(nt(a)||K(a,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var t=yr.monthRange(this.year,this.month-1)[1];if(!(this.day<=t))for(;this.day>t;){if(this.day-=t,++this.month,this.month===13&&(this.month=1,++this.year,this.year>yr.MAXYEAR))return;t=yr.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(t,n){var i=t.freq,s=t.interval,a=t.wkst,o=t.byhour,u=t.byminute,l=t.bysecond;switch(i){case $.YEARLY:return this.addYears(s);case $.MONTHLY:return this.addMonths(s);case $.WEEKLY:return this.addWeekly(s,a);case $.DAILY:return this.addDaily(s);case $.HOURLY:return this.addHours(s,n,o);case $.MINUTELY:return this.addMinutes(s,n,o,u);case $.SECONDLY:return this.addSeconds(s,n,o,u,l)}},e}(fn);function yo(r){for(var e=[],t=Object.keys(r),n=0,i=t;n<i.length;n++){var s=i[n];K($f,s)||e.push(s),x.isDate(r[s])&&!x.isValidDate(r[s])&&e.push(s)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return Be({},r)}function Wf(r){var e=Be(Be({},ti),yo(r));if(oe(e.byeaster)&&(e.freq=O.YEARLY),!(oe(e.freq)&&O.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: ".concat(e.freq," ").concat(r.freq));if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),oe(e.wkst)?rt(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=O.MO.weekday,oe(e.bysetpos)){rt(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var t=0;t<e.bysetpos.length;t++){var n=e.bysetpos[t];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||ge(e.byweekno)||ge(e.byyearday)||Boolean(e.bymonthday)||ge(e.bymonthday)||oe(e.byweekday)||oe(e.byeaster)))switch(e.freq){case O.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case O.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case O.WEEKLY:e.byweekday=[x.getWeekday(e.dtstart)];break}if(oe(e.bymonth)&&!Fe(e.bymonth)&&(e.bymonth=[e.bymonth]),oe(e.byyearday)&&!Fe(e.byyearday)&&rt(e.byyearday)&&(e.byyearday=[e.byyearday]),!oe(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(Fe(e.bymonthday)){for(var i=[],s=[],t=0;t<e.bymonthday.length;t++){var n=e.bymonthday[t];n>0?i.push(n):n<0&&s.push(n)}e.bymonthday=i,e.bynmonthday=s}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(oe(e.byweekno)&&!Fe(e.byweekno)&&(e.byweekno=[e.byweekno]),!oe(e.byweekday))e.bynweekday=null;else if(rt(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(po(e.byweekday))e.byweekday=[Te.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Te)!e.byweekday.n||e.freq>O.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var a=[],o=[],t=0;t<e.byweekday.length;t++){var u=e.byweekday[t];if(rt(u)){a.push(u);continue}else if(po(u)){a.push(Te.fromStr(u).weekday);continue}!u.n||e.freq>O.MONTHLY?a.push(u.weekday):o.push([u.weekday,u.n])}e.byweekday=ge(a)?a:null,e.bynweekday=ge(o)?o:null}return oe(e.byhour)?rt(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<O.HOURLY?[e.dtstart.getUTCHours()]:null,oe(e.byminute)?rt(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<O.MINUTELY?[e.dtstart.getUTCMinutes()]:null,oe(e.bysecond)?rt(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<O.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function Yf(r){var e=r.dtstart.getTime()%1e3;if(!ei(r.freq))return[];var t=[];return r.byhour.forEach(function(n){r.byminute.forEach(function(i){r.bysecond.forEach(function(s){t.push(new fn(n,i,s,e))})})}),t}function ni(r){var e=r.split(`
`).map(J_).filter(function(t){return t!==null});return Be(Be({},e[0]),e[1])}function ri(r){var e={},t=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(r);if(!t)return e;var n=t[1],i=t[2];return n&&(e.tzid=n),e.dtstart=x.untilStringToDate(i),e}function J_(r){if(r=r.replace(/^\s+|\s+$/,""),!r.length)return null;var e=/^([A-Z]+?)[:;]/.exec(r.toUpperCase());if(!e)return jf(r);var t=e[1];switch(t.toUpperCase()){case"RRULE":case"EXRULE":return jf(r);case"DTSTART":return ri(r);default:throw new Error("Unsupported RFC prop ".concat(t," in ").concat(r))}}function jf(r){var e=r.replace(/^RRULE:/i,""),t=ri(e),n=r.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var s=i.split("="),a=s[0],o=s[1];switch(a.toUpperCase()){case"FREQ":t.freq=$[o.toUpperCase()];break;case"WKST":t.wkst=ft[o.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=eT(o),l=a.toLowerCase();t[l]=u;break;case"BYWEEKDAY":case"BYDAY":t.byweekday=tT(o);break;case"DTSTART":case"TZID":var c=ri(r);t.tzid=c.tzid,t.dtstart=c.dtstart;break;case"UNTIL":t.until=x.untilStringToDate(o);break;case"BYEASTER":t.byeaster=Number(o);break;default:throw new Error("Unknown RRULE property '"+a+"'")}}),t}function eT(r){if(r.indexOf(",")!==-1){var e=r.split(",");return e.map(Bf)}return Bf(r)}function Bf(r){return/^[+-]?\d+$/.test(r)?Number(r):r}function tT(r){var e=r.split(",");return e.map(function(t){if(t.length===2)return ft[t];var n=t.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!n||n.length<3)throw new SyntaxError("Invalid weekday string: ".concat(t));var i=Number(n[1]),s=n[2],a=ft[s].weekday;return new Te(a,i)})}var xr=function(){function r(e,t){if(isNaN(e.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=e,this.tzid=t}return Object.defineProperty(r.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),r.prototype.toString=function(){var e=x.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(e):";TZID=".concat(this.tzid,":").concat(e)},r.prototype.getTime=function(){return this.date.getTime()},r.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var t=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:t})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid)!==null&&e!==void 0?e:"UTC"})),s=i.getTime()-n.getTime();return new Date(this.date.getTime()-s)},r}();function ii(r){for(var e=[],t="",n=Object.keys(r),i=Object.keys(ti),s=0;s<n.length;s++)if(n[s]!=="tzid"&&!!K(i,n[s])){var a=n[s].toUpperCase(),o=r[n[s]],u="";if(!(!oe(o)||Fe(o)&&!o.length)){switch(a){case"FREQ":u=O.FREQUENCIES[r.freq];break;case"WKST":rt(o)?u=new Te(o).toString():u=o.toString();break;case"BYWEEKDAY":a="BYDAY",u=cf(o).map(function(h){return h instanceof Te?h:Fe(h)?new Te(h[0],h[1]):new Te(h)}).toString();break;case"DTSTART":t=rT(o,r.tzid);break;case"UNTIL":u=x.timeToUntilString(o,!r.tzid);break;default:if(Fe(o)){for(var l=[],c=0;c<o.length;c++)l[c]=String(o[c]);u=l.toString()}else u=String(o)}u&&e.push([a,u])}}var d=e.map(function(h){var _=h[0],m=h[1];return"".concat(_,"=").concat(m.toString())}).join(";"),f="";return d!==""&&(f="RRULE:".concat(d)),[t,f].filter(function(h){return!!h}).join(`
`)}function rT(r,e){return r?"DTSTART"+new xr(new Date(r),e).toString():""}function nT(r,e){return Array.isArray(r)?!Array.isArray(e)||r.length!==e.length?!1:r.every(function(t,n){return t.getTime()===e[n].getTime()}):r instanceof Date?e instanceof Date&&r.getTime()===e.getTime():r===e}var Gf=function(){function r(){this.all=!1,this.before=[],this.after=[],this.between=[]}return r.prototype._cacheAdd=function(e,t,n){t&&(t=t instanceof Date?x.clone(t):x.cloneDates(t)),e==="all"?this.all=t:(n._value=t,this[e].push(n))},r.prototype._cacheGet=function(e,t){var n=!1,i=t?Object.keys(t):[],s=function(c){for(var d=0;d<i.length;d++){var f=i[d];if(!nT(t[f],c[f]))return!0}return!1},a=this[e];if(e==="all")n=this.all;else if(Fe(a))for(var o=0;o<a.length;o++){var u=a[o];if(!(i.length&&s(u))){n=u._value;break}}if(!n&&this.all){for(var l=new Vt(e,t),o=0;o<this.all.length&&l.accept(this.all[o]);o++);n=l.getValue(),this._cacheAdd(e,n,t)}return Fe(n)?x.cloneDates(n):n instanceof Date?x.clone(n):n},r}();var Hf=T(T(T(T(T(T(T(T(T(T(T(T(T([],G(1,31),!0),G(2,28),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),zf=T(T(T(T(T(T(T(T(T(T(T(T(T([],G(1,31),!0),G(2,29),!0),G(3,31),!0),G(4,30),!0),G(5,31),!0),G(6,30),!0),G(7,31),!0),G(8,31),!0),G(9,30),!0),G(10,31),!0),G(11,30),!0),G(12,31),!0),G(1,7),!0),iT=dt(1,29),sT=dt(1,30),gr=dt(1,31),$e=dt(1,32),Kf=T(T(T(T(T(T(T(T(T(T(T(T(T([],$e,!0),sT,!0),$e,!0),gr,!0),$e,!0),gr,!0),$e,!0),$e,!0),gr,!0),$e,!0),gr,!0),$e,!0),$e.slice(0,7),!0),Vf=T(T(T(T(T(T(T(T(T(T(T(T(T([],$e,!0),iT,!0),$e,!0),gr,!0),$e,!0),gr,!0),$e,!0),$e,!0),gr,!0),$e,!0),gr,!0),$e,!0),$e.slice(0,7),!0),aT=dt(-28,0),oT=dt(-29,0),_r=dt(-30,0),je=dt(-31,0),Xf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),oT,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je.slice(0,7),!0),Zf=T(T(T(T(T(T(T(T(T(T(T(T(T([],je,!0),aT,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je,!0),_r,!0),je,!0),_r,!0),je,!0),je.slice(0,7),!0),Qf=[0,31,60,91,121,152,182,213,244,274,305,335,366],Jf=[0,31,59,90,120,151,181,212,243,273,304,334,365],go=function(){for(var r=[],e=0;e<55;e++)r=r.concat(dt(7));return r}();function ep(r,e){var t=new Date(Date.UTC(r,0,1)),n=x.isLeapYear(r)?366:365,i=x.isLeapYear(r+1)?366:365,s=x.toOrdinal(t),a=x.getWeekday(t),o=Be(Be({yearlen:n,nextyearlen:i,yearordinal:s,yearweekday:a},uT(r)),{wnomask:null});if(nt(e.byweekno))return o;o.wnomask=G(0,n+7);var u,l,c=u=Ye(7-a+e.wkst,7);c>=4?(c=0,l=o.yearlen+Ye(a-e.wkst,7)):l=n-c;for(var d=Math.floor(l/7),f=Ye(l,7),h=Math.floor(d+f/4),_=0;_<e.byweekno.length;_++){var m=e.byweekno[_];if(m<0&&(m+=h+1),m>0&&m<=h){var g=void 0;m>1?(g=c+(m-1)*7,c!==u&&(g-=7-u)):g=c;for(var R=0;R<7&&(o.wnomask[g]=1,g++,o.wdaymask[g]!==e.wkst);R++);}}if(K(e.byweekno,1)){var g=c+h*7;if(c!==u&&(g-=7-u),g<n)for(var _=0;_<7&&(o.wnomask[g]=1,g+=1,o.wdaymask[g]!==e.wkst);_++);}if(c){var w=void 0;if(K(e.byweekno,-1))w=-1;else{var k=x.getWeekday(new Date(Date.UTC(r-1,0,1))),z=Ye(7-k.valueOf()+e.wkst,7),fe=x.isLeapYear(r-1)?366:365,he=void 0;z>=4?(z=0,he=fe+Ye(k-e.wkst,7)):he=n-c,w=Math.floor(52+Ye(he,7)/4)}if(K(e.byweekno,w))for(var g=0;g<c;g++)o.wnomask[g]=1}return o}function uT(r){var e=x.isLeapYear(r)?366:365,t=new Date(Date.UTC(r,0,1)),n=x.getWeekday(t);return e===365?{mmask:Hf,mdaymask:Vf,nmdaymask:Zf,wdaymask:go.slice(n),mrange:Jf}:{mmask:zf,mdaymask:Kf,nmdaymask:Xf,wdaymask:go.slice(n),mrange:Qf}}function tp(r,e,t,n,i,s){var a={lastyear:r,lastmonth:e,nwdaymask:[]},o=[];if(s.freq===O.YEARLY)if(nt(s.bymonth))o=[[0,t]];else for(var u=0;u<s.bymonth.length;u++)e=s.bymonth[u],o.push(n.slice(e-1,e+1));else s.freq===O.MONTHLY&&(o=[n.slice(e-1,e+1)]);if(nt(o))return a;a.nwdaymask=G(0,t);for(var u=0;u<o.length;u++)for(var l=o[u],c=l[0],d=l[1]-1,f=0;f<s.bynweekday.length;f++){var h=void 0,_=s.bynweekday[f],m=_[0],g=_[1];g<0?(h=d+(g+1)*7,h-=Ye(i[h]-m,7)):(h=c+(g-1)*7,h+=Ye(7-i[h]+m,7)),c<=h&&h<=d&&(a.nwdaymask[h]=1)}return a}function rp(r,e){e===void 0&&(e=0);var t=r%19,n=Math.floor(r/100),i=r%100,s=Math.floor(n/4),a=n%4,o=Math.floor((n+8)/25),u=Math.floor((n-o+1)/3),l=Math.floor(19*t+n-s-u+15)%30,c=Math.floor(i/4),d=i%4,f=Math.floor(32+2*a+2*c-l-d)%7,h=Math.floor((t+11*l+22*f)/451),_=Math.floor((l+f-7*h+114)/31),m=(l+f-7*h+114)%31+1,g=Date.UTC(r,_-1,m+e),R=Date.UTC(r,0,1);return[Math.ceil((g-R)/(1e3*60*60*24))]}var lT=function(){function r(e){this.options=e}return r.prototype.rebuild=function(e,t){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=ep(e,n)),ge(n.bynweekday)&&(t!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,s=i.yearlen,a=i.mrange,o=i.wdaymask;this.monthinfo=tp(e,t,s,a,o,n)}oe(n.byeaster)&&(this.eastermask=rp(e,n.byeaster))},Object.defineProperty(r.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),r.prototype.ydayset=function(){return[dt(this.yearlen),0,this.yearlen]},r.prototype.mdayset=function(e,t){for(var n=this.mrange[t-1],i=this.mrange[t],s=G(null,this.yearlen),a=n;a<i;a++)s[a]=a;return[s,n,i]},r.prototype.wdayset=function(e,t,n){for(var i=G(null,this.yearlen+7),s=x.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal,a=s,o=0;o<7&&(i[s]=s,++s,this.wdaymask[s]!==this.options.wkst);o++);return[i,a,s]},r.prototype.ddayset=function(e,t,n){var i=G(null,this.yearlen),s=x.toOrdinal(new Date(Date.UTC(e,t-1,n)))-this.yearordinal;return i[s]=s,[i,s,s+1]},r.prototype.htimeset=function(e,t,n,i){var s=this,a=[];return this.options.byminute.forEach(function(o){a=a.concat(s.mtimeset(e,o,n,i))}),x.sort(a),a},r.prototype.mtimeset=function(e,t,n,i){var s=this.options.bysecond.map(function(a){return new fn(e,t,a,i)});return x.sort(s),s},r.prototype.stimeset=function(e,t,n,i){return[new fn(e,t,n,i)]},r.prototype.getdayset=function(e){switch(e){case $.YEARLY:return this.ydayset.bind(this);case $.MONTHLY:return this.mdayset.bind(this);case $.WEEKLY:return this.wdayset.bind(this);case $.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},r.prototype.gettimeset=function(e){switch(e){case $.HOURLY:return this.htimeset.bind(this);case $.MINUTELY:return this.mtimeset.bind(this);case $.SECONDLY:return this.stimeset.bind(this)}},r}(),np=lT;function ip(r,e,t,n,i,s){for(var a=[],o=0;o<r.length;o++){var u=void 0,l=void 0,c=r[o];c<0?(u=Math.floor(c/e.length),l=Ye(c,e.length)):(u=Math.floor((c-1)/e.length),l=Ye(c-1,e.length));for(var d=[],f=t;f<n;f++){var h=s[f];!oe(h)||d.push(h)}var _=void 0;u<0?_=d.slice(u)[0]:_=d[u];var m=e[l],g=x.fromOrdinal(i.yearordinal+_),R=x.combine(g,m);K(a,R)||a.push(R)}return x.sort(a),a}function xs(r,e){var t=e.dtstart,n=e.freq,i=e.interval,s=e.until,a=e.bysetpos,o=e.count;if(o===0||i===0)return Xt(r);var u=Lf.fromDate(t),l=new np(e);l.rebuild(u.year,u.month);for(var c=fT(l,u,e);;){var d=l.getdayset(n)(u.year,u.month,u.day),f=d[0],h=d[1],_=d[2],m=dT(f,h,_,l,e);if(ge(a))for(var g=ip(a,c,h,_,l,f),R=0;R<g.length;R++){var w=g[R];if(s&&w>s)return Xt(r);if(w>=t){var k=sp(w,e);if(!r.accept(k)||o&&(--o,!o))return Xt(r)}}else for(var R=h;R<_;R++){var z=f[R];if(!!oe(z))for(var fe=x.fromOrdinal(l.yearordinal+z),he=0;he<c.length;he++){var ne=c[he],w=x.combine(fe,ne);if(s&&w>s)return Xt(r);if(w>=t){var k=sp(w,e);if(!r.accept(k)||o&&(--o,!o))return Xt(r)}}}if(e.interval===0||(u.add(e,m),u.year>x.MAXYEAR))return Xt(r);ei(n)||(c=l.gettimeset(n)(u.hour,u.minute,u.second,0)),l.rebuild(u.year,u.month)}}function cT(r,e,t){var n=t.bymonth,i=t.byweekno,s=t.byweekday,a=t.byeaster,o=t.bymonthday,u=t.bynmonthday,l=t.byyearday;return ge(n)&&!K(n,r.mmask[e])||ge(i)&&!r.wnomask[e]||ge(s)&&!K(s,r.wdaymask[e])||ge(r.nwdaymask)&&!r.nwdaymask[e]||a!==null&&!K(r.eastermask,e)||(ge(o)||ge(u))&&!K(o,r.mdaymask[e])&&!K(u,r.nmdaymask[e])||ge(l)&&(e<r.yearlen&&!K(l,e+1)&&!K(l,-r.yearlen+e)||e>=r.yearlen&&!K(l,e+1-r.yearlen)&&!K(l,-r.nextyearlen+e-r.yearlen))}function sp(r,e){return new xr(r,e.tzid).rezonedDate()}function Xt(r){return r.getValue()}function dT(r,e,t,n,i){for(var s=!1,a=e;a<t;a++){var o=r[a];s=cT(n,o,i),s&&(r[o]=null)}return s}function fT(r,e,t){var n=t.freq,i=t.byhour,s=t.byminute,a=t.bysecond;return ei(n)?Yf(t):n>=O.HOURLY&&ge(i)&&!K(i,e.hour)||n>=O.MINUTELY&&ge(s)&&!K(s,e.minute)||n>=O.SECONDLY&&ge(a)&&!K(a,e.second)?[]:r.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var ft={MO:new Te(0),TU:new Te(1),WE:new Te(2),TH:new Te(3),FR:new Te(4),SA:new Te(5),SU:new Te(6)},ti={freq:$.YEARLY,dtstart:null,interval:1,wkst:ft.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},$f=Object.keys(ti),O=function(){function r(e,t){e===void 0&&(e={}),t===void 0&&(t=!1),this._cache=t?null:new Gf,this.origOptions=yo(e);var n=Wf(e).parsedOptions;this.options=n}return r.parseText=function(e,t){return Jn(e,t)},r.fromText=function(e,t){return Ff(e,t)},r.fromString=function(e){return new r(r.parseString(e)||void 0)},r.prototype._iter=function(e){return xs(e,this.options)},r.prototype._cacheGet=function(e,t){return this._cache?this._cache._cacheGet(e,t):!1},r.prototype._cacheAdd=function(e,t,n){if(!!this._cache)return this._cache._cacheAdd(e,t,n)},r.prototype.all=function(e){if(e)return this._iter(new mo("all",{},e));var t=this._cacheGet("all");return t===!1&&(t=this._iter(new Vt("all",{})),this._cacheAdd("all",t)),t},r.prototype.between=function(e,t,n,i){if(n===void 0&&(n=!1),!x.isValidDate(e)||!x.isValidDate(t))throw new Error("Invalid date passed in to RRule.between");var s={before:t,after:e,inc:n};if(i)return this._iter(new mo("between",s,i));var a=this._cacheGet("between",s);return a===!1&&(a=this._iter(new Vt("between",s)),this._cacheAdd("between",a,s)),a},r.prototype.before=function(e,t){if(t===void 0&&(t=!1),!x.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:t},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new Vt("before",n)),this._cacheAdd("before",i,n)),i},r.prototype.after=function(e,t){if(t===void 0&&(t=!1),!x.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:t},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new Vt("after",n)),this._cacheAdd("after",i,n)),i},r.prototype.count=function(){return this.all().length},r.prototype.toString=function(){return ii(this.origOptions)},r.prototype.toText=function(e,t,n){return Uf(this,e,t,n)},r.prototype.isFullyConvertibleToText=function(){return qf(this)},r.prototype.clone=function(){return new r(this.origOptions)},r.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],r.YEARLY=$.YEARLY,r.MONTHLY=$.MONTHLY,r.WEEKLY=$.WEEKLY,r.DAILY=$.DAILY,r.HOURLY=$.HOURLY,r.MINUTELY=$.MINUTELY,r.SECONDLY=$.SECONDLY,r.MO=ft.MO,r.TU=ft.TU,r.WE=ft.WE,r.TH=ft.TH,r.FR=ft.FR,r.SA=ft.SA,r.SU=ft.SU,r.parseString=ni,r.optionsToString=ii,r}();function ap(r,e,t,n,i,s){var a={},o=r.accept;function u(f,h){t.forEach(function(_){_.between(f,h,!0).forEach(function(m){a[Number(m)]=!0})})}i.forEach(function(f){var h=new xr(f,s).rezonedDate();a[Number(h)]=!0}),r.accept=function(f){var h=Number(f);return isNaN(h)?o.call(this,f):!a[h]&&(u(new Date(h-1),new Date(h+1)),!a[h])?(a[h]=!0,o.call(this,f)):!0},r.method==="between"&&(u(r.args.after,r.args.before),r.accept=function(f){var h=Number(f);return a[h]?!0:(a[h]=!0,o.call(this,f))});for(var l=0;l<n.length;l++){var c=new xr(n[l],s).rezonedDate();if(!r.accept(new Date(c.getTime())))break}e.forEach(function(f){xs(r,f.options)});var d=r._result;switch(x.sort(d),r.method){case"all":case"between":return d;case"before":return d.length&&d[d.length-1]||null;case"after":default:return d.length&&d[0]||null}}var op={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function pT(r,e){var t=[],n=[],i=[],s=[],a=ri(r),o=a.dtstart,u=a.tzid,l=_T(r,e.unfold);return l.forEach(function(c){var d;if(!!c){var f=gT(c),h=f.name,_=f.parms,m=f.value;switch(h.toUpperCase()){case"RRULE":if(_.length)throw new Error("unsupported RRULE parm: ".concat(_.join(",")));t.push(ni(c));break;case"RDATE":var g=(d=/RDATE(?:;TZID=([^:=]+))?/i.exec(c))!==null&&d!==void 0?d:[],R=g[1];R&&!u&&(u=R),n=n.concat(up(m,_));break;case"EXRULE":if(_.length)throw new Error("unsupported EXRULE parm: ".concat(_.join(",")));i.push(ni(m));break;case"EXDATE":s=s.concat(up(m,_));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:o,tzid:u,rrulevals:t,rdatevals:n,exrulevals:i,exdatevals:s}}function hT(r,e){var t=pT(r,e),n=t.rrulevals,i=t.rdatevals,s=t.exrulevals,a=t.exdatevals,o=t.dtstart,u=t.tzid,l=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||s.length||a.length){var c=new To(l);return c.dtstart(o),c.tzid(u||void 0),n.forEach(function(f){c.rrule(new O(_o(f,o,u),l))}),i.forEach(function(f){c.rdate(f)}),s.forEach(function(f){c.exrule(new O(_o(f,o,u),l))}),a.forEach(function(f){c.exdate(f)}),e.compatible&&e.dtstart&&c.rdate(o),c}var d=n[0]||{};return new O(_o(d,d.dtstart||e.dtstart||o,d.tzid||e.tzid||u),l)}function Is(r,e){return e===void 0&&(e={}),hT(r,mT(e))}function _o(r,e,t){return Be(Be({},r),{dtstart:e,tzid:t})}function mT(r){var e=[],t=Object.keys(r),n=Object.keys(op);if(t.forEach(function(i){K(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return Be(Be({},op),r)}function yT(r){if(r.indexOf(":")===-1)return{name:"RRULE",value:r};var e=df(r,":",1),t=e[0],n=e[1];return{name:t,value:n}}function gT(r){var e=yT(r),t=e.name,n=e.value,i=t.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function _T(r,e){if(e===void 0&&(e=!1),r=r&&r.trim(),!r)throw new Error("Invalid empty string");if(!e)return r.split(/\s/);for(var t=r.split(`
`),n=0;n<t.length;){var i=t[n]=t[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(t[n-1]+=i.slice(1),t.splice(n,1)):n+=1:t.splice(n,1)}return t}function TT(r){r.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function up(r,e){return TT(e),r.split(",").map(function(t){return x.untilStringToDate(t)})}function lp(r){var e=this;return function(t){if(t!==void 0&&(e["_".concat(r)]=t),e["_".concat(r)]!==void 0)return e["_".concat(r)];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[r];if(i)return i}}}var To=function(r){cn(e,r);function e(t){t===void 0&&(t=!1);var n=r.call(this,{},t)||this;return n.dtstart=lp.apply(n,["dtstart"]),n.tzid=lp.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(t){return ap(t,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(t){cp(t,this._rrule)},e.prototype.exrule=function(t){cp(t,this._exrule)},e.prototype.rdate=function(t){dp(t,this._rdate)},e.prototype.exdate=function(t){dp(t,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(t){return Is(t.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(t){return Is(t.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(t){return new Date(t.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(t){return new Date(t.getTime())})},e.prototype.valueOf=function(){var t=[];return!this._rrule.length&&this._dtstart&&(t=t.concat(ii({dtstart:this._dtstart}))),this._rrule.forEach(function(n){t=t.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){t=t.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&t.push(fp("RDATE",this._rdate,this.tzid())),this._exdate.length&&t.push(fp("EXDATE",this._exdate,this.tzid())),t},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var t=new e(!!this._cache);return this._rrule.forEach(function(n){return t.rrule(n.clone())}),this._exrule.forEach(function(n){return t.exrule(n.clone())}),this._rdate.forEach(function(n){return t.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return t.exdate(new Date(n.getTime()))}),t},e}(O);function cp(r,e){if(!(r instanceof O))throw new TypeError(String(r)+" is not RRule instance");K(e.map(String),String(r))||e.push(r)}function dp(r,e){if(!(r instanceof Date))throw new TypeError(String(r)+" is not Date instance");K(e.map(Number),Number(r))||(e.push(r),x.sort(e))}function fp(r,e,t){var n=!t||t.toUpperCase()==="UTC",i=n?"".concat(r,":"):"".concat(r,";TZID=").concat(t,":"),s=e.map(function(a){return x.timeToUntilString(a.valueOf(),n)}).join(",");return"".concat(i).concat(s)}var $g=Os(we()),ar=class{static parseDate(e,t=!1){return window.moment($g.parseDate(e,void 0,{forwardDate:t})).startOf("day")}};var _e=class{constructor(e,t=[],n=""){this.description=e,this.symbol=n,this.children=t}static booleanAnd(e){return this.combineOrCreateExplanation("All of",e,"AND")}static booleanOr(e){return this.combineOrCreateExplanation("At least one of",e,"OR")}static booleanNot(e){return new _e("None of",e,"NOT")}static booleanXor(e){return new _e("Exactly one of",e,"XOR")}asString(e=""){if(this.children.length==0)return e+this.description;let t=e+`${this.symbol}`;this.children.length>1&&(t+=` (${this.description})`),t+=":";let n=e+"  ";for(let i=0;i<this.children.length;i++)t+=`
${this.children[i].asString(n)}`;return t}static combineOrCreateExplanation(e,t,n){if(t.length===2){let i=t[0],s=t[1];if(i.symbol===n&&s.symbol==="")return i.children.push(s),i}return new _e(e,t,n)}};var or=class{constructor(e,t,n){this.property=e,this.comparator=or.maybeReverse(n,t)}static maybeReverse(e,t){return e?or.makeReversedComparator(t):t}static makeReversedComparator(e){return(t,n)=>e(t,n)*-1}};var ce=class{canCreateFilterForLine(e){return ce.lineMatchesFilter(this.filterRegExp(),e)}static lineMatchesFilter(e,t){return e?e.test(t):!1}static getMatch(e,t){return e?t.match(e):null}fieldNameSingular(){return this.fieldName()}supportsSorting(){return!1}parseSortLine(e){return!this.supportsSorting()||!this.canCreateSorterForLine(e)?null:this.createSorterFromLine(e)}canCreateSorterForLine(e){return this.supportsSorting()?ce.lineMatchesFilter(this.sorterRegExp(),e):!1}createSorterFromLine(e){if(!this.supportsSorting())return null;let t=ce.getMatch(this.sorterRegExp(),e);if(t===null)return null;let n=!!t[1];return this.createSorter(n)}sorterRegExp(){if(!this.supportsSorting())throw Error(`sorterRegExp() unimplemented for ${this.fieldNameSingular()}`);return new RegExp(`^sort by ${this.fieldNameSingular()}( reverse)?`)}comparator(){throw Error(`comparator() unimplemented for ${this.fieldNameSingular()}`)}createSorter(e){return new or(this.fieldNameSingular(),this.comparator(),e)}createNormalSorter(){return this.createSorter(!1)}createReverseSorter(){return this.createSorter(!0)}};var Ze=class{constructor(e,t,n){this.instruction=e,this.explanation=n,this.filterFunction=t}explainFilterIndented(e){let t=this.explanation;return t.asString()===this.instruction?`${e}${this.instruction}
`:`${e}${this.instruction} =>
${t.asString("  ")}
`}},de=class{constructor(e){this.instruction=e}get filter(){return this._filter}set filter(e){this._filter=e}get filterFunction(){if(this._filter)return this._filter.filterFunction}static fromFilter(e){let t=new de(e.instruction);return t.filter=e,t}static fromError(e,t){let n=new de(e);return n.error=t,n}};var Oa=class{constructor(e,t){this._instruction=e,this._filter=t}canCreateFilterForLine(e){return e==this._instruction}createFilterOrErrorMessage(e){let t=new de(e);return e===this._instruction?(t.filter=new Ze(e,this._filter,new _e(e)),t):(t.error=`do not understand filter: ${e}`,t)}};var Dr=class{constructor(){this._filters=[]}add(e,t){this._filters.push(new Oa(e,t))}canCreateFilterForLine(e){for(let t of this._filters)if(t.canCreateFilterForLine(e))return!0;return!1}createFilterOrErrorMessage(e){for(let n of this._filters){let i=n.createFilterOrErrorMessage(e);if(i.error===void 0)return i}let t=new de(e);return t.error=`do not understand filter: ${e}`,t}};var pe=class extends ce{constructor(){super();this.filterInstructions=new Dr,this.filterInstructions.add(`has ${this.fieldName()} date`,t=>this.date(t)!==null),this.filterInstructions.add(`no ${this.fieldName()} date`,t=>this.date(t)===null),this.filterInstructions.add(`${this.fieldName()} date is invalid`,t=>{let n=this.date(t);return n!==null&&!n.isValid()})}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new de(t),s=ce.getMatch(this.filterRegExp(),t),a;if(s!==null){let o=ar.parseDate(s[2]);if(!o.isValid())i.error="do not understand "+this.fieldName()+" date";else{let u;s[1]==="before"?(a=c=>{let d=this.date(c);return d?d.isBefore(o):this.filterResultIfFieldMissing()},u=" "+s[1]):s[1]==="after"?(a=c=>{let d=this.date(c);return d?d.isAfter(o):this.filterResultIfFieldMissing()},u=" "+s[1]):(a=c=>{let d=this.date(c);return d?d.isSame(o):this.filterResultIfFieldMissing()},u=" on");let l=pe.getExplanationString(this.fieldName(),u,this.filterResultIfFieldMissing(),o);i.filter=new Ze(t,a,new _e(l))}}else i.error="do not understand query filter ("+this.fieldName()+" date)";return i}static getExplanationString(t,n,i,s){let a=s.format("YYYY-MM-DD (dddd Do MMMM YYYY)"),o=`${t} date is${n} ${a}`;return i&&(o+=` OR no ${t} date`),o}supportsSorting(){return!0}comparator(){return(t,n)=>pe.compareByDate(this.date(t),this.date(n))}static compareByDate(t,n){return t!==null&&n===null?-1:t===null&&n!==null?1:t!==null&&n!==null?t.isValid()&&!n.isValid()?-1:!t.isValid()&&n.isValid()||t.isAfter(n)?1:t.isBefore(n)?-1:0:0}};var Ce=class{constructor({rrule:e,baseOnToday:t,referenceDate:n,startDate:i,scheduledDate:s,dueDate:a}){this.rrule=e,this.baseOnToday=t,this.referenceDate=n,this.startDate=i,this.scheduledDate=s,this.dueDate=a}static fromText({recurrenceRuleText:e,startDate:t,scheduledDate:n,dueDate:i}){try{let s=e.match(/^([a-zA-Z0-9, !]+?)( when done)?$/i);if(s==null)return null;let a=s[1].trim(),o=s[2]!==void 0,u=O.parseText(a);if(u!==null){let l=null;i?l=window.moment(i):n?l=window.moment(n):t&&(l=window.moment(t)),!o&&l!==null?u.dtstart=window.moment(l).startOf("day").utc(!0).toDate():u.dtstart=window.moment().startOf("day").utc(!0).toDate();let c=new O(u);return new Ce({rrule:c,baseOnToday:o,referenceDate:l,startDate:t,scheduledDate:n,dueDate:i})}}catch(s){}return null}toText(){let e=this.rrule.toText();return this.baseOnToday&&(e+=" when done"),e}next(){var t;let e;if(this.baseOnToday){let n=window.moment(),i=new O(ct(Me({},this.rrule.origOptions),{dtstart:n.startOf("day").utc(!0).toDate()}));e=this.nextAfter(n.endOf("day"),i)}else{let n=window.moment((t=this.referenceDate)!=null?t:void 0).endOf("day");e=this.nextAfter(n,this.rrule)}if(e!==null){let n=null,i=null,s=null;if(this.referenceDate){if(this.startDate){let a=window.moment.duration(this.startDate.diff(this.referenceDate));n=window.moment(e),n.add(Math.round(a.asDays()),"days")}if(this.scheduledDate){let a=window.moment.duration(this.scheduledDate.diff(this.referenceDate));i=window.moment(e),i.add(Math.round(a.asDays()),"days")}if(this.dueDate){let a=window.moment.duration(this.dueDate.diff(this.referenceDate));s=window.moment(e),s.add(Math.round(a.asDays()),"days")}}return{startDate:n,scheduledDate:i,dueDate:s}}return null}identicalTo(e){return this.baseOnToday!==e.baseOnToday||pe.compareByDate(this.startDate,e.startDate)!==0||pe.compareByDate(this.scheduledDate,e.scheduledDate)!==0||pe.compareByDate(this.dueDate,e.dueDate)!==0?!1:this.toText()===e.toText()}nextAfter(e,t){e.utc(!0);let n=window.moment(t.after(e.toDate())),i=this.toText(),s=i.match(/every( \d+)? month(s)?(.*)?/);s!==null&&(i.includes(" on ")||(n=Ce.nextAfterMonths(e,n,t,s[1])));let a=i.match(/every( \d+)? year(s)?(.*)?/);return a!==null&&(n=Ce.nextAfterYears(e,n,t,a[1])),Ce.addTimezone(n).toDate()}static nextAfterMonths(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ce.isSkippingTooManyMonths(e,t,s);)t=Ce.fromOneDayEarlier(e,n);return t}static isSkippingTooManyMonths(e,t,n){let i=t.month()-e.month();return i+=(t.year()-e.year())*12,i>n}static nextAfterYears(e,t,n,i){let s=1;for(i!==void 0&&(s=Number.parseInt(i.trim(),10));Ce.isSkippingTooManyYears(e,t,s);)t=Ce.fromOneDayEarlier(e,n);return t}static isSkippingTooManyYears(e,t,n){return t.year()-e.year()>n}static fromOneDayEarlier(e,t){e.subtract(1,"days").endOf("day");let n=t.origOptions;return n.dtstart=e.startOf("day").toDate(),t=new O(n),window.moment(t.after(e.toDate()))}static addTimezone(e){return window.moment.utc(e).local(!0).startOf("day")}};var jg=[{index:9999,internalName:"INTERNAL_TESTING_ENABLED_BY_DEFAULT",displayName:"Test Item. Used to validate the Feature Framework.",description:"Description",enabledByDefault:!0,stable:!1}];var Bt=class{constructor(e,t,n,i,s,a){this.internalName=e;this.index=t;this.description=n;this.displayName=i;this.enabledByDefault=s;this.stable=a}static get values(){let e=[];return jg.forEach(t=>{e=[...e,new Bt(t.internalName,t.index,t.description,t.displayName,t.enabledByDefault,t.stable)]}),e}static get settingsFlags(){let e={};return Bt.values.forEach(t=>{e[t.internalName]=t.enabledByDefault}),e}static fromString(e){for(let t of Bt.values)if(e===t.internalName)return t;throw new RangeError(`Illegal argument passed to fromString(): ${e} does not correspond to any available Feature ${this.prototype.constructor.name}`)}};var qP={globalFilter:"",removeGlobalFilter:!1,setDoneDate:!0,autoSuggestInEditor:!0,autoSuggestMinMatch:0,autoSuggestMaxItems:6,provideAccessKeys:!0,useFilenameAsScheduledDate:!1,filenameAsDateFolders:[],features:Bt.settingsFlags},ss=Me({},qP),H=()=>{for(let r in Bt.settingsFlags)ss.features[r]===void 0&&(ss.features[r]=Bt.settingsFlags[r]);return Me({},ss)},bt=r=>(ss=Me(Me({},ss),r),H());var lr=class{static calculate(e){let t=0;if(e.dueDate!==null){let n=Math.round(window.moment().diff(e.dueDate)/lr.milliSecondsPerDay),i;n>=7?i=1:n>=-14?i=(n+14)*.8/21+.2:i=.2,t+=i*lr.dueCoefficient}switch(e.scheduledDate!==null&&window.moment().isSameOrAfter(e.scheduledDate)&&(t+=1*lr.scheduledCoefficient),e.startDate!==null&&window.moment().isBefore(e.startDate)&&(t+=1*lr.startedCoefficient),e.priority){case"1":t+=1*lr.priorityCoefficient;break;case"2":t+=.65*lr.priorityCoefficient;break;case"3":t+=.325*lr.priorityCoefficient;break}return t}},ur=lr;ur.dueCoefficient=12,ur.scheduledCoefficient=5,ur.startedCoefficient=-3,ur.priorityCoefficient=6,ur.milliSecondsPerDay=1e3*60*60*24;var zg=require("obsidian");var Bg=require("obsidian");var ld,cd,Gg=({metadataCache:r,vault:e})=>{ld=r,cd=e},Pa=t=>B(void 0,[t],function*({originalTask:r,newTasks:e}){if(cd===void 0||ld===void 0){console.error("Tasks: cannot use File before initializing it.");return}Array.isArray(e)||(e=[e]),Hg({originalTask:r,newTasks:e,vault:cd,metadataCache:ld,previousTries:0})}),Hg=s=>B(void 0,[s],function*({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i}){let a=()=>{if(i>10){console.error("Tasks: Too many retries. File update not possible ...");return}let g=Math.min(Math.pow(10,i),100);setTimeout(()=>{Hg({originalTask:r,newTasks:e,vault:t,metadataCache:n,previousTries:i+1})},g)},o=t.getAbstractFileByPath(r.path);if(!(o instanceof Bg.TFile))return console.warn(`Tasks: No file found for task ${r.description}. Retrying ...`),a();if(o.extension!=="md"){console.error("Tasks: Only supporting files with the .md file extension.");return}let u=n.getFileCache(o);if(u==null||u===null)return console.warn(`Tasks: No file cache found for file ${o.path}. Retrying ...`),a();let l=u.listItems;if(l===void 0||l.length===0)return console.warn(`Tasks: No list items found in file cache of ${o.path}. Retrying ...`),a();let d=(yield t.read(o)).split(`
`),{globalFilter:f}=H(),h,_=0;for(let g of l){if(g.position.start.line<r.sectionStart||g.task===void 0)continue;if(d[g.position.start.line].includes(f)){if(_===r.sectionIndex){h=g;break}_++}}if(h===void 0){console.error("Tasks: could not find task to toggle in the file.");return}let m=[...d.slice(0,h.position.start.line),...e.map(g=>g.toFileLineString()),...d.slice(h.position.start.line+1)];yield t.modify(o,m.join(`
`))});function LP(r,e,t){return B(this,null,function*(){yield zg.MarkdownRenderer.renderMarkdown(r,e,t,null)})}function Kg(r,e,t=null){return B(this,null,function*(){var a;t||(t=LP);let n=document.createElement("li");e.parentUlElement.appendChild(n),n.classList.add("task-list-item","plugin-tasks-list-item");let i=document.createElement("span");n.appendChild(i),i.classList.add("tasks-list-text"),yield WP(r,e,i,t);let s=document.createElement("input");return n.appendChild(s),s.classList.add("task-list-item-checkbox"),s.type="checkbox",r.status!=="Todo"&&(s.checked=!0,n.classList.add("is-checked")),s.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),s.disabled=!0;let u=r.toggle();Pa({originalTask:r,newTasks:u})}),n.prepend(s),n.setAttribute("data-task",r.originalStatusCharacter.trim()),n.setAttribute("data-line",e.listIndex.toString()),s.setAttribute("data-line",e.listIndex.toString()),(a=e.layoutOptions)!=null&&a.shortMode&&$P({task:r,element:i,isFilenameUnique:e.isFilenameUnique}),n})}function WP(r,e,t,n){return B(this,null,function*(){let i="",s=new un(e.layoutOptions);for(let a of s.layoutComponents){let o=r.componentToString(s,a);o&&(a==="description"&&(o=jP(o)),i+=o)}yield YP(t,i,"description",r,n)})}function YP(r,e,t,n,i){return B(this,null,function*(){if(t==="description"){yield i(e,r,n.path);let s=r.querySelector("blockquote"),a=s!=null?s:r,o=a.querySelector("p");if(o!==null){for(;o.firstChild;)a.insertBefore(o.firstChild,o);o.remove()}r.querySelectorAll("p").forEach(u=>{u.hasChildNodes()||u.remove()}),r.querySelectorAll(".footnotes").forEach(u=>{u.remove()})}else r.innerHTML=e})}function $P({task:r,element:e,isFilenameUnique:t}){e.addEventListener("mouseenter",()=>{let n=e.createDiv();n.addClasses(["tooltip","mod-right"]),r.recurrence&&n.createDiv().setText(`${St} ${r.recurrence.toText()}`),r.startDate&&n.createDiv().setText(ka({signifier:Nt,date:r.startDate})),r.scheduledDate&&n.createDiv().setText(ka({signifier:Ct,date:r.scheduledDate})),r.dueDate&&n.createDiv().setText(ka({signifier:xt,date:r.dueDate})),r.doneDate&&n.createDiv().setText(ka({signifier:Aa,date:r.doneDate}));let i=r.getLinkText({isFilenameUnique:t});i&&n.createDiv().setText(`\u{1F517} ${i}`),e.addEventListener("mouseleave",()=>{n.remove()})})}function ka({signifier:r,date:e}){return`${r} ${e.format(D.dateFormat)} (${e.from(window.moment().startOf("day"))})`}function jP(r){let{globalFilter:e,removeGlobalFilter:t}=H();return t?r.replace(e,"").trim():r}var Qe=class{static fromPath(e){let{useFilenameAsScheduledDate:t,filenameAsDateFolders:n}=H();return!t||!this.matchesAnyFolder(n,e)?null:this.extractDateFromPath(e)}static matchesAnyFolder(e,t){return e.length===0?!0:e.some(n=>t.startsWith(n+"/"))}static extractDateFromPath(e){let t=Math.max(0,e.lastIndexOf("/")+1),n=e.lastIndexOf("."),i=e.substring(t,n),s=/(\d{4})-(\d{2})-(\d{2})/.exec(i);if(s||(s=/(\d{4})(\d{2})(\d{2})/.exec(i)),s){let a=window.moment([parseInt(s[1]),parseInt(s[2])-1,parseInt(s[3])]);if(a.isValid())return a}return null}static canApplyFallback({startDate:e,scheduledDate:t,dueDate:n}){return e===null&&n===null&&t===null}static updateTaskPath(e,t,n){let i=e.scheduledDate,s=e.scheduledDateIsInferred;return n===null?s&&(s=!1,i=null):s?i=n:this.canApplyFallback(e)&&(i=n,s=!0),new le(ct(Me({},e),{path:t,scheduledDate:i,scheduledDateIsInferred:s}))}static removeInferredStatusIfNeeded(e,t){let n=e.scheduledDateIsInferred?e.scheduledDate:null;return t.map(i=>(n!==null&&!n.isSame(i.scheduledDate,"day")&&(i=new le(ct(Me({},i),{scheduledDateIsInferred:!1}))),i))}};var Re={High:"\u23EB",Medium:"\u{1F53C}",Low:"\u{1F53D}",None:""},St="\u{1F501}",Nt="\u{1F6EB}",Ct="\u23F3",xt="\u{1F4C5}",Aa="\u2705",ot=class{},D=ot;D.dateFormat="YYYY-MM-DD",D.indentationRegex=/^([\s\t>]*)/,D.listMarkerRegex=/([-*]|[0-9]+\.)/,D.checkboxRegex=/\[(.)\]/u,D.afterCheckboxRegex=/ *(.*)/u,D.taskRegex=new RegExp(ot.indentationRegex.source+ot.listMarkerRegex.source+" +"+ot.checkboxRegex.source+ot.afterCheckboxRegex.source,"u"),D.nonTaskRegex=new RegExp(ot.indentationRegex.source+ot.listMarkerRegex.source+"? *("+ot.checkboxRegex.source+")?"+ot.afterCheckboxRegex.source,"u"),D.listItemRegex=new RegExp(ot.indentationRegex.source+ot.listMarkerRegex.source),D.blockLinkRegex=/ \^[a-zA-Z0-9-]+$/u,D.priorityRegex=/([⏫🔼🔽])$/u,D.startDateRegex=/🛫 *(\d{4}-\d{2}-\d{2})$/u,D.scheduledDateRegex=/[⏳⌛] *(\d{4}-\d{2}-\d{2})$/u,D.dueDateRegex=/[📅📆🗓] *(\d{4}-\d{2}-\d{2})$/u,D.doneDateRegex=/✅ *(\d{4}-\d{2}-\d{2})$/u,D.recurrenceRegex=/🔁 ?([a-zA-Z0-9, !]+)$/iu,D.hashTags=/(^|\s)#[^ !@#$%^&*(),.?":{}|<>]*/g,D.hashTagsFromEnd=new RegExp(ot.hashTags.source+"$");var le=class{constructor({status:e,description:t,path:n,indentation:i,listMarker:s,sectionStart:a,sectionIndex:o,originalStatusCharacter:u,precedingHeader:l,priority:c,startDate:d,scheduledDate:f,dueDate:h,doneDate:_,recurrence:m,blockLink:g,tags:R,originalMarkdown:w,scheduledDateIsInferred:k}){this._urgency=null;this.status=e,this.description=t,this.path=n,this.indentation=i,this.listMarker=s,this.sectionStart=a,this.sectionIndex=o,this.originalStatusCharacter=u,this.precedingHeader=l,this.tags=R,this.priority=c,this.startDate=d,this.scheduledDate=f,this.dueDate=h,this.doneDate=_,this.recurrence=m,this.blockLink=g,this.originalMarkdown=w,this.scheduledDateIsInferred=k}static fromLine({line:e,path:t,sectionStart:n,sectionIndex:i,precedingHeader:s,fallbackDate:a}){let o=e.match(D.taskRegex);if(o===null)return null;let u=o[4].trim(),{globalFilter:l}=H();if(!u.includes(l))return null;let c=u,d=o[1],f=o[2],h=o[3],_;switch(h){case" ":_="Todo";break;default:_="Done"}let m=c.match(D.blockLinkRegex),g=m!==null?m[0]:"";g!==""&&(c=c.replace(D.blockLinkRegex,"").trim());let R,w="3",k=null,z=null,fe=!1,he=null,ne=null,Y="",lt=null,Je=[],A="",E=20,b=0;do{R=!1;let y=c.match(D.priorityRegex);if(y!==null){switch(y[1]){case Re.Low:w="4";break;case Re.Medium:w="2";break;case Re.High:w="1";break}c=c.replace(D.priorityRegex,"").trim(),R=!0}let C=c.match(D.doneDateRegex);C!==null&&(ne=window.moment(C[1],D.dateFormat),c=c.replace(D.doneDateRegex,"").trim(),R=!0);let S=c.match(D.dueDateRegex);S!==null&&(he=window.moment(S[1],D.dateFormat),c=c.replace(D.dueDateRegex,"").trim(),R=!0);let I=c.match(D.scheduledDateRegex);I!==null&&(z=window.moment(I[1],D.dateFormat),c=c.replace(D.scheduledDateRegex,"").trim(),R=!0);let ee=c.match(D.startDateRegex);ee!==null&&(k=window.moment(ee[1],D.dateFormat),c=c.replace(D.startDateRegex,"").trim(),R=!0);let V=c.match(D.recurrenceRegex);V!==null&&(Y=V[1].trim(),c=c.replace(D.recurrenceRegex,"").trim(),R=!0);let se=c.match(D.hashTagsFromEnd);if(se!=null){c=c.replace(D.hashTagsFromEnd,"").trim(),R=!0;let ae=se[0].trim();A=A.length>0?[ae,A].join(" "):ae}b++}while(R&&b<=E);Y.length>0&&(lt=Ce.fromText({recurrenceRuleText:Y,startDate:k,scheduledDate:z,dueDate:he})),Qe.canApplyFallback({startDate:k,scheduledDate:z,dueDate:he})&&a!==null&&(z=a,fe=!0),A.length>0&&(c+=" "+A);let N=c.match(D.hashTags);return N!==null&&(Je=N.filter(y=>y!==l).map(y=>y.trim())),new le({status:_,description:c,path:t,indentation:d,listMarker:f,sectionStart:n,sectionIndex:i,originalStatusCharacter:h,precedingHeader:s,priority:w,startDate:k,scheduledDate:z,dueDate:he,doneDate:ne,recurrence:lt,blockLink:g,tags:Je,originalMarkdown:e,scheduledDateIsInferred:fe})}toLi(e){return B(this,null,function*(){return Kg(this,e)})}toString(e){let t=new un(e),n="";for(let i of t.layoutComponents)n+=this.componentToString(t,i);return n}componentToString(e,t){var n;switch(t){case"description":return this.description;case"priority":{let i="";return this.priority==="1"?i=" "+Re.High:this.priority==="2"?i=" "+Re.Medium:this.priority==="4"&&(i=" "+Re.Low),i}case"startDate":return this.startDate?e.options.shortMode?" "+Nt:` ${Nt} ${this.startDate.format(D.dateFormat)}`:"";case"scheduledDate":return!this.scheduledDate||this.scheduledDateIsInferred?"":e.options.shortMode?" "+Ct:` ${Ct} ${this.scheduledDate.format(D.dateFormat)}`;case"doneDate":return this.doneDate?e.options.shortMode?" "+Aa:` ${Aa} ${this.doneDate.format(D.dateFormat)}`:"";case"dueDate":return this.dueDate?e.options.shortMode?" "+xt:` ${xt} ${this.dueDate.format(D.dateFormat)}`:"";case"recurrenceRule":return this.recurrence?e.options.shortMode?" "+St:` ${St} ${this.recurrence.toText()}`:"";case"blockLink":return(n=this.blockLink)!=null?n:"";default:throw new Error(`Don't know how to render task component of type '${t}'`)}}toFileLineString(){return`${this.indentation}${this.listMarker} [${this.originalStatusCharacter}] ${this.toString()}`}toggle(){let e=this.status==="Todo"?"Done":"Todo",t=null,n=null;if(e!=="Todo"){let{setDoneDate:a}=H();a&&(t=window.moment()),this.recurrence!==null&&(n=this.recurrence.next())}let i=new le(ct(Me({},this),{status:e,doneDate:t,originalStatusCharacter:e==="Done"?"x":" "})),s=[];if(n!==null){let a=new le(ct(Me(Me({},this),n),{blockLink:""}));s.push(a)}return s.push(i),s}get urgency(){return this._urgency===null&&(this._urgency=ur.calculate(this)),this._urgency}get filename(){let e=this.path.match(/([^/]+)\.md$/);return e!==null?e[1]:null}getLinkText({isFilenameUnique:e}){let t;return e?t=this.filename:t="/"+this.path,t===null?null:(this.precedingHeader!==null&&this.precedingHeader!==t&&(t=t+" > "+this.precedingHeader),t)}static tasksListsIdentical(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.identicalTo(t[i]))}identicalTo(e){let t=["status","description","path","indentation","listMarker","sectionStart","sectionIndex","originalStatusCharacter","precedingHeader","priority","blockLink","scheduledDateIsInferred"];for(let s of t)if(this[s]!==e[s])return!1;if(this.tags.length!==e.tags.length||!this.tags.every(function(s,a){return s===e.tags[a]}))return!1;t=["startDate","scheduledDate","dueDate","doneDate"];for(let s of t){let a=this[s],o=e[s];if(pe.compareByDate(a,o)!==0)return!1}let n=this.recurrence,i=e.recurrence;return n===null&&i!==null||n!==null&&i===null?!1:!(n&&i&&!n.identicalTo(i))}escapeRegExp(e){return e.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")}getDescriptionWithoutGlobalFilter(){let{globalFilter:e}=H(),t=this.description;if(e.length===0)return t;let n=RegExp("(^|\\s)"+this.escapeRegExp(e)+"($|\\s)","ug");return this.description.search(n)>-1&&(t=t.replace(n,"$1$2").replace("  "," ").trim()),t}};var as=class{constructor(e){this.fetch=e;this._value=void 0}get value(){return this._value===void 0&&(this._value=this.fetch()),this._value}};var Or=class{constructor({metadataCache:e,vault:t,events:n}){this.metadataCache=e,this.metadataCacheEventReferences=[],this.vault=t,this.vaultEventReferences=[],this.events=n,this.eventsEventReferences=[],this.tasksMutex=new Ps,this.state="Cold",this.tasks=[],this.loadedAfterFirstResolve=!1,this.subscribeToCache(),this.subscribeToVault(),this.subscribeToEvents(),this.loadVault()}unload(){for(let e of this.metadataCacheEventReferences)this.metadataCache.offref(e);for(let e of this.vaultEventReferences)this.vault.offref(e);for(let e of this.eventsEventReferences)this.events.off(e)}getTasks(){return this.tasks}getState(){return this.state}notifySubscribers(){this.events.triggerCacheUpdate({tasks:this.tasks,state:this.state})}subscribeToCache(){let e=this.metadataCache.on("resolved",()=>B(this,null,function*(){this.loadedAfterFirstResolve||(this.loadedAfterFirstResolve=!0,this.loadVault())}));this.metadataCacheEventReferences.push(e);let t=this.metadataCache.on("changed",n=>{this.tasksMutex.runExclusive(()=>{this.indexFile(n)})});this.metadataCacheEventReferences.push(t)}subscribeToVault(){let{useFilenameAsScheduledDate:e}=H(),t=this.vault.on("create",s=>{s instanceof Sa.TFile&&this.tasksMutex.runExclusive(()=>{this.indexFile(s)})});this.vaultEventReferences.push(t);let n=this.vault.on("delete",s=>{s instanceof Sa.TFile&&this.tasksMutex.runExclusive(()=>{this.tasks=this.tasks.filter(a=>a.path!==s.path),this.notifySubscribers()})});this.vaultEventReferences.push(n);let i=this.vault.on("rename",(s,a)=>{s instanceof Sa.TFile&&this.tasksMutex.runExclusive(()=>{let o=new as(()=>Qe.fromPath(s.path));this.tasks=this.tasks.map(u=>u.path===a?e?Qe.updateTaskPath(u,s.path,o.value):new le(ct(Me({},u),{path:s.path})):u),this.notifySubscribers()})});this.vaultEventReferences.push(i)}subscribeToEvents(){let e=this.events.onRequestCacheUpdate(t=>{t({tasks:this.tasks,state:this.state})});this.eventsEventReferences.push(e)}loadVault(){return this.tasksMutex.runExclusive(()=>B(this,null,function*(){this.state="Initializing",yield Promise.all(this.vault.getMarkdownFiles().map(e=>this.indexFile(e))),this.state="Warm",this.notifySubscribers()}))}indexFile(e){return B(this,null,function*(){let t=this.metadataCache.getFileCache(e);if(t==null)return;let n=this.tasks.filter(a=>a.path===e.path),i=t.listItems,s=[];if(i!==void 0){let a=yield this.vault.cachedRead(e);s=Or.getTasksFromFileContent(a,i,t,e)}le.tasksListsIdentical(n,s)||(this.getState()=="Warm"&&console.debug(`At least one task, its line number or its heading has changed in ${e.path}: triggering a refresh of all active Tasks blocks in Live Preview and Reading mode views.`),this.tasks=this.tasks.filter(a=>a.path!==e.path),this.tasks.push(...s),this.notifySubscribers())})}static getTasksFromFileContent(e,t,n,i){let s=[],a=e.split(`
`),o=new as(()=>Qe.fromPath(i.path)),u=null,l=0;for(let c of t)if(c.task!==void 0){if((u===null||u.position.end.line<c.position.start.line)&&(u=Or.getSection(c.position.start.line,n.sections),l=0),u===null)continue;let d=a[c.position.start.line],f=le.fromLine({line:d,path:i.path,sectionStart:u.position.start.line,sectionIndex:l,precedingHeader:Or.getPrecedingHeader(c.position.start.line,n.headings),fallbackDate:o.value});f!==null&&(l++,s.push(f))}return s}static getSection(e,t){if(t===void 0)return null;for(let n of t)if(n.position.start.line<=e&&n.position.end.line>=e)return n;return null}static getPrecedingHeader(e,t){if(t===void 0)return null;let n=null;for(let i of t){if(i.position.start.line>e)return n;n=i.heading}return n}};var Ed=require("obsidian");var c_=require("obsidian");function zr(){}function yd(r){return r()}function Vg(){return Object.create(null)}function Kr(r){r.forEach(yd)}function Zg(r){return typeof r=="function"}function Qg(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}function Jg(r){return Object.keys(r).length===0}var e_=!1;function BP(){e_=!0}function GP(){e_=!1}function v(r,e){r.appendChild(e)}function cs(r,e,t){r.insertBefore(e,t||null)}function kn(r){r.parentNode.removeChild(r)}function t_(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function q(r){return document.createElement(r)}function HP(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Gt(r){return document.createTextNode(r)}function Q(){return Gt(" ")}function It(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function r_(r){return function(e){return e.preventDefault(),r.call(this,e)}}function P(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function zP(r){return Array.from(r.childNodes)}function n_(r,e){e=""+e,r.wholeText!==e&&(r.data=e)}function Ft(r,e){r.value=e==null?"":e}function gd(r,e,t){r.classList[t?"add":"remove"](e)}var Hr=class{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=HP(t.nodeName):this.e=q(t.nodeName),this.t=t,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)cs(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(kn)}};var ls;function us(r){ls=r}function KP(){if(!ls)throw new Error("Function called outside component initialization");return ls}function _d(r){KP().$$.on_mount.push(r)}var os=[];var xa=[],Ca=[],Xg=[],VP=Promise.resolve(),hd=!1;function XP(){hd||(hd=!0,VP.then(i_))}function md(r){Ca.push(r)}var pd=new Set,Na=0;function i_(){let r=ls;do{for(;Na<os.length;){let e=os[Na];Na++,us(e),ZP(e.$$)}for(us(null),os.length=0,Na=0;xa.length;)xa.pop()();for(let e=0;e<Ca.length;e+=1){let t=Ca[e];pd.has(t)||(pd.add(t),t())}Ca.length=0}while(os.length);for(;Xg.length;)Xg.pop()();hd=!1,pd.clear(),us(r)}function ZP(r){if(r.fragment!==null){r.update(),Kr(r.before_update);let e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(md)}}var QP=new Set;function JP(r,e){r&&r.i&&(QP.delete(r),r.i(e))}var HI=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function ek(r,e,t,n){let{fragment:i,on_mount:s,on_destroy:a,after_update:o}=r.$$;i&&i.m(e,t),n||md(()=>{let u=s.map(yd).filter(Zg);a?a.push(...u):Kr(u),r.$$.on_mount=[]}),o.forEach(md)}function s_(r,e){let t=r.$$;t.fragment!==null&&(Kr(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function tk(r,e){r.$$.dirty[0]===-1&&(os.push(r),XP(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function a_(r,e,t,n,i,s,a,o=[-1]){let u=ls;us(r);let l=r.$$={fragment:null,ctx:null,props:s,update:zr,not_equal:i,bound:Vg(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:Vg(),dirty:o,skip_bound:!1,root:e.target||u.$$.root};a&&a(l.root);let c=!1;if(l.ctx=t?t(r,e.props||{},(d,f,...h)=>{let _=h.length?h[0]:f;return l.ctx&&i(l.ctx[d],l.ctx[d]=_)&&(!l.skip_bound&&l.bound[d]&&l.bound[d](_),c&&tk(r,d)),f}):[],l.update(),c=!0,Kr(l.before_update),l.fragment=n?n(l.ctx):!1,e.target){if(e.hydrate){BP();let d=zP(e.target);l.fragment&&l.fragment.l(d),d.forEach(kn)}else l.fragment&&l.fragment.c();e.intro&&JP(r.$$.fragment),ek(r,e.target,e.anchor,e.customElement),GP(),i_()}us(u)}var rk;typeof HTMLElement=="function"&&(rk=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:r}=this.$$;this.$$.on_disconnect=r.map(yd).filter(Zg);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(r,e,t){this[r]=t}disconnectedCallback(){Kr(this.$$.on_disconnect)}$destroy(){s_(this,1),this.$destroy=zr}$on(r,e){let t=this.$$.callbacks[r]||(this.$$.callbacks[r]=[]);return t.push(e),()=>{let n=t.indexOf(e);n!==-1&&t.splice(n,1)}}$set(r){this.$$set&&!Jg(r)&&(this.$$.skip_bound=!0,this.$$set(r),this.$$.skip_bound=!1)}});var Ia=class{$destroy(){s_(this,1),this.$destroy=zr}$on(e,t){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{let i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Jg(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var ds=Os(we());var nk={td:"today",tm:"tomorrow",yd:"yesterday",tw:"this week",nw:"next week",weekend:"sat",we:"sat"};function An(r){for(let[e,t]of Object.entries(nk))r=r.replace(RegExp(`\\b${e}\\s`,"i"),t);return r}function o_(r,e,t){let n=r.slice();return n[28]=e[t].value,n[29]=e[t].label,n[30]=e[t].symbol,n}function ik(r){let e,t=r[30]+"",n;return{c(){e=q("span"),n=Gt(t)},m(i,s){cs(i,e,s),v(e,n)},p:zr,d(i){i&&kn(e)}}}function u_(r){let e,t,n,i,s,a,o,u,l=r[29]+"",c,d,f=r[30]&&r[30].charCodeAt(0)>=256,h,_,m,g,R=f&&ik(r);return{c(){e=q("span"),t=q("input"),a=Q(),o=q("label"),u=q("span"),c=Gt(l),d=Q(),R&&R.c(),_=Q(),P(t,"type","radio"),P(t,"id",n="priority-"+r[28]),t.__value=i=r[28],t.value=t.__value,P(t,"accesskey",s=r[8](r[29].charAt(0).toLowerCase())),r[20][0].push(t),P(u,"class","accesskey-first"),P(o,"for",h="priority-"+r[28])},m(w,k){cs(w,e,k),v(e,t),t.checked=t.__value===r[0].priority,v(e,a),v(e,o),v(o,u),v(u,c),v(o,d),R&&R.m(o,null),v(e,_),m||(g=It(t,"change",r[19]),m=!0)},p(w,k){k[0]&256&&s!==(s=w[8](w[29].charAt(0).toLowerCase()))&&P(t,"accesskey",s),k[0]&1&&(t.checked=t.__value===w[0].priority),f&&R.p(w,k)},d(w){w&&kn(e),r[20][0].splice(r[20][0].indexOf(t),1),R&&R.d(),m=!1,g()}}}function sk(r){let e,t,n,i,s,a,o,u,l,c,d,f,h,_,m,g,R,w,k,z,fe,he,ne,Y,lt,Je,A,E,b,N,y,C,S,I,ee,V,se,ae,xe,He,et,zt,Ie,tt,nn,Kt,jd,wt,Ts,Bd,Hn,Gd,Hd,bs,zd,zn,vs,Kd,Ut,Es,Vd,sn,Sr,ws,Xd,mr,Rs,Zd,oo,Ms=r[0].status+"",uo,Qd,Kn,lo,Jd,Ds,ef,an,Vn,tf,Xn,co,rf,on=r[9],ze=[];for(let F=0;F<on.length;F+=1)ze[F]=u_(o_(r,on,F));return{c(){e=q("div"),t=q("form"),n=q("div"),i=q("label"),i.innerHTML='Descrip<span class="accesskey">t</span>ion',s=Q(),a=q("input"),u=Q(),l=q("div"),c=q("label"),d=Gt("Priority"),h=Q();for(let F=0;F<ze.length;F+=1)ze[F].c();_=Q(),m=q("div"),g=q("label"),g.textContent="Recurs",R=Q(),w=q("input"),z=Q(),fe=q("code"),he=Gt(St),ne=Q(),Y=new Hr(!1),lt=Q(),Je=q("label"),Je.textContent="Due",A=Q(),E=q("input"),N=Q(),y=q("code"),C=Gt(xt),S=Q(),I=new Hr(!1),ee=Q(),V=q("label"),V.textContent="Scheduled",se=Q(),ae=q("input"),He=Q(),et=q("code"),zt=Gt(Ct),Ie=Q(),tt=new Hr(!1),nn=Q(),Kt=q("label"),Kt.innerHTML='St<span class="accesskey">a</span>rt',jd=Q(),wt=q("input"),Bd=Q(),Hn=q("code"),Gd=Gt(Nt),Hd=Q(),bs=new Hr(!1),zd=Q(),zn=q("div"),vs=q("label"),vs.innerHTML=`Only
                    <span class="accesskey-first">future</span> dates:`,Kd=Q(),Ut=q("input"),Vd=Q(),sn=q("div"),Sr=q("div"),ws=q("label"),ws.textContent="Status:",Xd=Q(),mr=q("input"),Zd=Q(),oo=q("code"),uo=Gt(Ms),Qd=Q(),Kn=q("div"),lo=q("span"),lo.textContent="Done on:",Jd=Q(),Ds=q("code"),ef=Q(),an=q("div"),Vn=q("button"),Vn.textContent="Apply",tf=Q(),Xn=q("button"),Xn.textContent="Cancel",P(i,"for","description"),P(a,"id","description"),P(a,"type","text"),P(a,"class","tasks-modal-description"),P(a,"placeholder","Take out the trash"),P(a,"accesskey",o=r[8]("t")),P(n,"class","tasks-modal-section"),P(c,"for",f="priority-"+r[0].priority),P(l,"class","tasks-modal-section tasks-modal-priorities"),P(g,"for","recurrence"),P(g,"class","accesskey-first"),P(w,"id","description"),P(w,"type","text"),P(w,"placeholder","Try 'every 2 weeks on Thursday'."),P(w,"accesskey",k=r[8]("r")),Y.a=null,P(Je,"for","due"),P(Je,"class","accesskey-first"),P(E,"id","due"),P(E,"type","text"),P(E,"placeholder",Td),P(E,"accesskey",b=r[8]("d")),I.a=null,P(V,"for","scheduled"),P(V,"class","accesskey-first"),P(ae,"id","scheduled"),P(ae,"type","text"),P(ae,"placeholder",Td),P(ae,"accesskey",xe=r[8]("s")),tt.a=null,P(Kt,"for","start"),P(wt,"id","start"),P(wt,"type","text"),P(wt,"placeholder",Td),P(wt,"accesskey",Ts=r[8]("a")),bs.a=null,P(vs,"for","forwardOnly"),P(Ut,"id","forwardOnly"),P(Ut,"type","checkbox"),P(Ut,"class","task-list-item-checkbox tasks-modal-checkbox"),P(Ut,"accesskey",Es=r[8]("f")),P(m,"class","tasks-modal-section tasks-modal-dates"),P(ws,"for","status"),P(mr,"id","status"),P(mr,"type","checkbox"),P(mr,"class","task-list-item-checkbox tasks-modal-checkbox"),mr.checked=Rs=r[0].status==="Done",mr.disabled=!0,P(sn,"class","tasks-modal-section tasks-modal-status"),P(Vn,"type","submit"),P(Vn,"class","mod-cta"),P(Xn,"type","button"),P(an,"class","tasks-modal-section tasks-modal-buttons"),gd(t,"with-accesskeys",r[1]),P(e,"class","tasks-modal")},m(F,ue){cs(F,e,ue),v(e,t),v(t,n),v(n,i),v(n,s),v(n,a),Ft(a,r[0].description),r[18](a),v(t,u),v(t,l),v(l,c),v(c,d),v(l,h);for(let We=0;We<ze.length;We+=1)ze[We].m(l,null);v(t,_),v(t,m),v(m,g),v(m,R),v(m,w),Ft(w,r[0].recurrenceRule),v(m,z),v(m,fe),v(fe,he),v(fe,ne),Y.m(r[6],fe),v(m,lt),v(m,Je),v(m,A),v(m,E),Ft(E,r[0].dueDate),v(m,N),v(m,y),v(y,C),v(y,S),I.m(r[5],y),v(m,ee),v(m,V),v(m,se),v(m,ae),Ft(ae,r[0].scheduledDate),v(m,He),v(m,et),v(et,zt),v(et,Ie),tt.m(r[4],et),v(m,nn),v(m,Kt),v(m,jd),v(m,wt),Ft(wt,r[0].startDate),v(m,Bd),v(m,Hn),v(Hn,Gd),v(Hn,Hd),bs.m(r[3],Hn),v(m,zd),v(m,zn),v(zn,vs),v(zn,Kd),v(zn,Ut),Ut.checked=r[0].forwardOnly,v(t,Vd),v(t,sn),v(sn,Sr),v(Sr,ws),v(Sr,Xd),v(Sr,mr),v(Sr,Zd),v(Sr,oo),v(oo,uo),v(sn,Qd),v(sn,Kn),v(Kn,lo),v(Kn,Jd),v(Kn,Ds),Ds.innerHTML=r[7],v(t,ef),v(t,an),v(an,Vn),v(an,tf),v(an,Xn),co||(rf=[It(a,"input",r[17]),It(l,"keyup",r[10]),It(w,"input",r[21]),It(E,"input",r[22]),It(ae,"input",r[23]),It(wt,"input",r[24]),It(Ut,"change",r[25]),It(Xn,"click",r[11]),It(t,"submit",r_(r[12]))],co=!0)},p(F,ue){if(ue[0]&256&&o!==(o=F[8]("t"))&&P(a,"accesskey",o),ue[0]&1&&a.value!==F[0].description&&Ft(a,F[0].description),ue[0]&1&&f!==(f="priority-"+F[0].priority)&&P(c,"for",f),ue[0]&769){on=F[9];let We;for(We=0;We<on.length;We+=1){let nf=o_(F,on,We);ze[We]?ze[We].p(nf,ue):(ze[We]=u_(nf),ze[We].c(),ze[We].m(l,null))}for(;We<ze.length;We+=1)ze[We].d(1);ze.length=on.length}ue[0]&256&&k!==(k=F[8]("r"))&&P(w,"accesskey",k),ue[0]&1&&w.value!==F[0].recurrenceRule&&Ft(w,F[0].recurrenceRule),ue[0]&64&&Y.p(F[6]),ue[0]&256&&b!==(b=F[8]("d"))&&P(E,"accesskey",b),ue[0]&1&&E.value!==F[0].dueDate&&Ft(E,F[0].dueDate),ue[0]&32&&I.p(F[5]),ue[0]&256&&xe!==(xe=F[8]("s"))&&P(ae,"accesskey",xe),ue[0]&1&&ae.value!==F[0].scheduledDate&&Ft(ae,F[0].scheduledDate),ue[0]&16&&tt.p(F[4]),ue[0]&256&&Ts!==(Ts=F[8]("a"))&&P(wt,"accesskey",Ts),ue[0]&1&&wt.value!==F[0].startDate&&Ft(wt,F[0].startDate),ue[0]&8&&bs.p(F[3]),ue[0]&256&&Es!==(Es=F[8]("f"))&&P(Ut,"accesskey",Es),ue[0]&1&&(Ut.checked=F[0].forwardOnly),ue[0]&1&&Rs!==(Rs=F[0].status==="Done")&&(mr.checked=Rs),ue[0]&1&&Ms!==(Ms=F[0].status+"")&&n_(uo,Ms),ue[0]&128&&(Ds.innerHTML=F[7]),ue[0]&2&&gd(t,"with-accesskeys",F[1])},i:zr,o:zr,d(F){F&&kn(e),r[18](null),t_(ze,F),co=!1,Kr(rf)}}}var Td="Try 'Monday' or 'tomorrow', or [td|tm|yd|tw|nw|we] then space.";function ak(r,e,t){let n;var i,s;let{task:a}=e,{onSubmit:o}=e,u,l={description:"",status:"Todo",priority:"none",recurrenceRule:"",startDate:"",scheduledDate:"",dueDate:"",doneDate:"",forwardOnly:!0},c="",d="",f="",h="",_="",m=!1,g=!0,R=[{value:"low",label:"Low",symbol:Re.Low},{value:"none",label:"Normal",symbol:Re.None},{value:"medium",label:"Medium",symbol:Re.Medium},{value:"high",label:"High",symbol:Re.High}];function w(y,C,S=void 0){if(!C)return`<i>no ${y} date</i>`;let I=ds.parseDate(C,S,{forwardDate:S!=null});return I!==null?window.moment(I).format("YYYY-MM-DD"):`<i>invalid ${y} date</i>`}_d(()=>{let{globalFilter:y,provideAccessKeys:C}=H();t(1,g=C);let S=a.getDescriptionWithoutGlobalFilter();(S!=a.description||S.indexOf(y)==-1)&&(m=!0);let I="none";a.priority==="4"?I="low":a.priority==="2"?I="medium":a.priority==="1"&&(I="high"),t(0,l={description:S,status:a.status,priority:I,recurrenceRule:a.recurrence?a.recurrence.toText():"",startDate:a.startDate?a.startDate.format("YYYY-MM-DD"):"",scheduledDate:a.scheduledDate?a.scheduledDate.format("YYYY-MM-DD"):"",dueDate:a.dueDate?a.dueDate.format("YYYY-MM-DD"):"",doneDate:a.doneDate?a.doneDate.format("YYYY-MM-DD"):"",forwardOnly:!0}),setTimeout(()=>{u.focus()},10)});let k=y=>{if(y.key&&!y.altKey&&!y.ctrlKey){let C=R.find(S=>S.label.charAt(0).toLowerCase()==y.key);C&&t(0,l.priority=C.value,l)}},z=()=>{o([])},fe=()=>{let{globalFilter:y}=H(),C=l.description.trim();m&&(C=y+" "+C);let S=null,I=ds.parseDate(l.startDate,new Date,{forwardDate:l.forwardOnly});I!==null&&(S=window.moment(I));let ee=null,V=ds.parseDate(l.scheduledDate,new Date,{forwardDate:l.forwardOnly});V!==null&&(ee=window.moment(V));let se=null,ae=ds.parseDate(l.dueDate,new Date,{forwardDate:l.forwardOnly});ae!==null&&(se=window.moment(ae));let xe=null;l.recurrenceRule&&(xe=Ce.fromText({recurrenceRuleText:l.recurrenceRule,startDate:S,scheduledDate:ee,dueDate:se}));let He;switch(l.priority){case"low":He="4";break;case"medium":He="2";break;case"high":He="1";break;default:He="3"}let et=new le(Object.assign(Object.assign({},a),{description:C,status:l.status,priority:He,recurrence:xe,startDate:S,scheduledDate:ee,dueDate:se,doneDate:window.moment(l.doneDate,"YYYY-MM-DD").isValid()?window.moment(l.doneDate,"YYYY-MM-DD"):null}));o([et])},he=[[]];function ne(){l.description=this.value,t(0,l)}function Y(y){xa[y?"unshift":"push"](()=>{u=y,t(2,u)})}function lt(){l.priority=this.__value,t(0,l)}function Je(){l.recurrenceRule=this.value,t(0,l)}function A(){l.dueDate=this.value,t(0,l)}function E(){l.scheduledDate=this.value,t(0,l)}function b(){l.startDate=this.value,t(0,l)}function N(){l.forwardOnly=this.checked,t(0,l)}return r.$$set=y=>{"task"in y&&t(13,a=y.task),"onSubmit"in y&&t(14,o=y.onSubmit)},r.$$.update=()=>{if(r.$$.dirty[0]&2){e:t(8,n=y=>g?y:null)}if(r.$$.dirty[0]&1){e:t(0,l.startDate=An(l.startDate),l),t(3,c=w("start",l.startDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.scheduledDate=An(l.scheduledDate),l),t(4,d=w("scheduled",l.scheduledDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&1){e:t(0,l.dueDate=An(l.dueDate),l),t(5,f=w("due",l.dueDate,l.forwardOnly?new Date:void 0))}if(r.$$.dirty[0]&98305){e:l.recurrenceRule?t(6,h=t(16,s=t(15,i=Ce.fromText({recurrenceRuleText:l.recurrenceRule,startDate:null,scheduledDate:null,dueDate:null}))===null||i===void 0?void 0:i.toText())!==null&&s!==void 0?s:"<i>invalid recurrence rule</i>"):t(6,h="<i>not recurring</>")}if(r.$$.dirty[0]&1){e:t(7,_=w("done",l.doneDate))}},[l,g,u,c,d,f,h,_,n,R,k,z,fe,a,o,i,s,ne,Y,lt,he,Je,A,E,b,N]}var bd=class extends Ia{constructor(e){super(),a_(this,e,ak,sk,Qg,{task:13,onSubmit:14},null,[-1,-1])}},l_=bd;var Sn=class extends c_.Modal{constructor({app:t,task:n,onSubmit:i}){super(t);this.task=n,this.onSubmit=s=>{s.length&&i(s),this.close()}}onOpen(){this.titleEl.setText("Create or edit Task");let{contentEl:t}=this;new l_({target:t,props:{task:this.task,onSubmit:this.onSubmit}})}onClose(){let{contentEl:t}=this;t.empty()}};var d_=({line:r,path:e})=>{var f,h;let t=Qe.fromPath(e),n=le.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:t});if(n!==null)return n;let i=r.match(D.nonTaskRegex);if(i===null)return console.error("Tasks: Cannot create task on line:",r),new le({status:"Todo",description:"",path:e,indentation:"",listMarker:"-",originalStatusCharacter:" ",priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,blockLink:"",tags:[],originalMarkdown:"",scheduledDateIsInferred:!1});let s=i[1],a=(f=i[2])!=null?f:"-",o=(h=i[4])!=null?h:" ",u=o===" "?"Todo":"Done",l=i[5],c=r.match(D.blockLinkRegex),d=c!==null?c[0]:"";return d!==""&&(l=l.replace(D.blockLinkRegex,"")),new le({status:u,description:l,path:e,indentation:s,listMarker:a,originalStatusCharacter:o,blockLink:d,priority:"3",startDate:null,scheduledDate:null,dueDate:null,doneDate:null,recurrence:null,sectionStart:0,sectionIndex:0,precedingHeader:null,tags:[],originalMarkdown:"",scheduledDateIsInferred:!1})};var f_=(r,e,t,n)=>{var d;if(r)return t instanceof Ed.MarkdownView;if(!(t instanceof Ed.MarkdownView))return;let i=(d=t.file)==null?void 0:d.path;if(i===void 0)return;let a=e.getCursor().line,o=e.getLine(a),u=d_({line:o,path:i}),l=f=>{let h=Qe.removeInferredStatusIfNeeded(u,f).map(_=>_.toFileLineString()).join(`
`);e.setLine(a,h)};new Sn({app:n,task:u,onSubmit:l}).open()};var wd=require("obsidian");var p_=(r,e,t)=>{var u;if(r)return t instanceof wd.MarkdownView;if(!(t instanceof wd.MarkdownView))return;let n=(u=t.file)==null?void 0:u.path;if(n===void 0)return;let i=e.getCursor(),s=i.line,a=e.getLine(s),o=ok(a,n);e.setLine(s,o),e.setCursor({line:i.line,ch:lk(i.ch,a,o)})},ok=(r,e)=>{let t=r,n=le.fromLine({line:r,path:e,sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(n!==null)t=uk(n);else{let i=r.match(D.taskRegex);if(i!==null){let a=i[3].toLowerCase()===" "?"x":" ";t=r.replace(D.taskRegex,`$1- [${a}] $4`)}else D.listItemRegex.test(r)?t=r.replace(D.listItemRegex,"$1$2 [ ]"):t=r.replace(D.indentationRegex,"$1- ")}return t},uk=r=>r.toggle().map(n=>n.toFileLineString()).join(`
`),lk=(r,e,t)=>{let n=t.length;if(n<=e.length)return r>=t.length?n:r;let i=13;if(t.match(D.doneDateRegex)&&n-e.length>=i&&(n-=i),n>=2*e.length&&t.search(`.+
.+`)!==-1)return r+n-e.length;let s=t.search(/[-*]/);return r<s?r:r+n-e.length};var Fa=class{get app(){return this.plugin.app}constructor({plugin:e}){this.plugin=e,e.addCommand({id:"edit-task",name:"Create or edit task",icon:"pencil",editorCheckCallback:(t,n,i)=>f_(t,n,i,this.app)}),e.addCommand({id:"toggle-done",name:"Toggle task done",icon:"check-in-circle",editorCheckCallback:p_})}};var Ua=class{constructor({obsidianEvents:e}){this.obsidianEvents=e}onCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:cache-update",e)}triggerCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:cache-update",e)}onRequestCacheUpdate(e){return this.obsidianEvents.on("obsidian-tasks-plugin:request-cache-update",e)}triggerRequestCacheUpdate(e){this.obsidianEvents.trigger("obsidian-tasks-plugin:request-cache-update",e)}off(e){this.obsidianEvents.offref(e)}};var qa=class{constructor({plugin:e}){this.markdownPostProcessor=this._markdownPostProcessor.bind(this);e.registerMarkdownPostProcessor(this._markdownPostProcessor.bind(this))}_markdownPostProcessor(e,t){return B(this,null,function*(){var c;let{globalFilter:n}=H(),i=e.findAll(".task-list-item").filter(d=>{var _;let f=(_=d.textContent)==null?void 0:_.split(`
`);if(f===void 0)return!1;let h=null;for(let m=0;m<f.length;m=m+1)if(f[m]!==""){h=f[m];break}return h===null?!1:h.includes(n)});if(i.length===0)return;let s=t.sourcePath,a=t.getSectionInfo(e);if(a===null)return;let o=a.text.split(`
`),u=0,l=[];for(let d=a.lineStart;d<=a.lineEnd;d++){let f=o[d];if(f===void 0)continue;let h=le.fromLine({line:f,path:s,sectionStart:a.lineStart,sectionIndex:u,precedingHeader:null,fallbackDate:null});h!==null&&(l.push(h),u++)}for(let d=0;d<i.length;d++){let f=l[d],h=i[d];if(f===void 0||h===void 0)continue;let _=(c=h.getAttr("data-line"))!=null?c:"0",m=Number.parseInt(_,10),g=yield f.toLi({parentUlElement:e,listIndex:m}),R=h.childNodes;for(let z=0;z<R.length;z=z+1){let fe=R[z];fe.nodeName.toLowerCase()==="div"?g.prepend(fe):fe.nodeName.toLowerCase()==="ul"&&g.append(fe)}let w=h.querySelectorAll("[data-footnote-id]"),k=g.querySelectorAll("[data-footnote-id]");if(w.length===k.length)for(let z=0;z<w.length;z++)k[z].replaceWith(w[z]);h.replaceWith(g)}})}};var h_=require("@codemirror/view"),m_=require("obsidian");var y_=()=>h_.ViewPlugin.fromClass(Rd),Rd=class{constructor(e){this.view=e,this.handleClickEvent=this.handleClickEvent.bind(this),this.view.dom.addEventListener("click",this.handleClickEvent)}destroy(){this.view.dom.removeEventListener("click",this.handleClickEvent)}handleClickEvent(e){let{target:t}=e;if(!t||!(t instanceof HTMLInputElement)||t.type!=="checkbox")return!1;let n=t.closest("ul.plugin-tasks-query-result, div.callout-content");if(n){if(n.matches("div.callout-content")){let f=`obsidian-tasks-plugin warning: Tasks cannot add or remove completion dates or make the next copy of a recurring task for tasks written inside a callout when you click their checkboxes in Live Preview. 
If you wanted Tasks to do these things, please undo your change, then either click the line of the task and use the "Toggle Task Done" command, or switch to Reading View to click the checkbox.`;console.warn(f),new m_.Notice(f,45e3)}return!1}let{state:i}=this.view,s=this.view.posAtDOM(t),a=i.doc.lineAt(s),o=le.fromLine({line:a.text,path:"",sectionStart:0,sectionIndex:0,precedingHeader:null,fallbackDate:null});if(console.debug(`Live Preview Extension: toggle called. Position: ${s} Line: ${a.text}`),o===null)return!1;e.preventDefault();let l=o.toggle().map(f=>f.toFileLineString()).join(i.lineBreak),c=i.update({changes:{from:a.from,to:a.to,insert:l}});this.view.dispatch(c);let d=t.checked;return setTimeout(()=>{t.checked=d},1),!0}};var io=require("obsidian");var Pr=class extends ce{constructor(){super(...arguments);this._filters=new Dr}canCreateFilterForLine(t){return this._filters.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){return this._filters.createFilterOrErrorMessage(t)}filterRegExp(){return null}};var Nn=class extends Pr{constructor(){super(),this._filters.add("done",e=>e.status==="Done"),this._filters.add("not done",e=>e.status!=="Done")}fieldName(){return"status"}supportsSorting(){return!0}comparator(){return(e,t)=>e.status<t.status?1:e.status>t.status?-1:0}};var Md=class extends pe{filterRegExp(){return Md.dueRegexp}fieldName(){return"due"}date(e){return e.dueDate}filterResultIfFieldMissing(){return!1}},Vr=Md;Vr.dueRegexp=/^due (before|after|on)? ?(.*)/;var Dd=class extends ce{createFilterOrErrorMessage(e){let t=new de(e),n=ce.getMatch(this.filterRegExp(),e);if(n!==null){let i=n[5],s=null;switch(i){case"low":s="4";break;case"none":s="3";break;case"medium":s="2";break;case"high":s="1";break}if(s===null)return t.error="do not understand priority",t;let a=e,o;switch(n[3]){case"above":o=u=>u.priority.localeCompare(s)<0;break;case"below":o=u=>u.priority.localeCompare(s)>0;break;case"not":o=u=>u.priority!==s;break;default:o=u=>u.priority===s,a=`${this.fieldName()} is ${i}`}t.filter=new Ze(e,o,new _e(a))}else t.error="do not understand query filter (priority)";return t}fieldName(){return"priority"}filterRegExp(){return Dd.priorityRegexp}supportsSorting(){return!0}comparator(){return(e,t)=>e.priority.localeCompare(t.priority)}},Xr=Dd;Xr.priorityRegexp=/^priority(\s+is)?(\s+(above|below|not))?(\s+(low|none|medium|high))$/;var Cn=class{matchesAnyOf(e){return e.some(t=>this.matches(t))}};var Zr=class extends Cn{constructor(t){super();this.stringToFind=t}matches(t){return Zr.stringIncludesCaseInsensitive(t,this.stringToFind)}static stringIncludesCaseInsensitive(t,n){return t.toLocaleLowerCase().includes(n.toLocaleLowerCase())}};var xn=class extends Cn{constructor(t){super();this.regex=t}static validateAndConstruct(t){let n=/\/((?![*+?])(?:[^\r\n[/\\]|\\.|\[(?:[^\r\n\]\\]|\\.)*])+)\/((?:g(?:im?|mi?)?|i(?:gm?|mg?)?|m(?:gi?|ig?)?)?)/,i=t.match(n);if(i!==null){let s=new RegExp(i[1],i[2]);return new xn(s)}else return null}matches(t){return t.match(this.regex)!==null}};var vt=class extends ce{createFilterOrErrorMessage(e){let t=ce.getMatch(this.filterRegExp(),e);if(t===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let[n,i,s]=t,a=null;if(i.includes("include"))a=new Zr(s);else if(i.includes("regex")&&(a=xn.validateAndConstruct(s),a===null))return de.fromError(e,`cannot parse regex (${this.fieldName()}); check your leading and trailing slashes for your query`);if(a===null)return de.fromError(e,`do not understand query filter (${this.fieldName()})`);let o=i.match(/not/)!==null,u=new Ze(e,this.getFilter(a,o),new _e(e));return de.fromFilter(u)}static stringIncludesCaseInsensitive(e,t){return Zr.stringIncludesCaseInsensitive(e,t)}fieldPattern(){return this.fieldName()}filterOperatorPattern(){return"includes|does not include|regex matches|regex does not match"}filterRegExp(){return new RegExp(`^(?:${this.fieldPattern()}) (${this.filterOperatorPattern()}) (.*)`)}getFilter(e,t){return n=>{let i=e.matches(this.value(n));return t?!i:i}}comparator(){return(e,t)=>this.value(e).localeCompare(this.value(t),void 0,{numeric:!0})}};var In=class extends vt{fieldName(){return"path"}value(e){return e.path}supportsSorting(){return!0}};var Fn=class extends ce{canCreateFilterForLine(e){return!1}createFilterOrErrorMessage(e){return de.fromError(e,"Filtering by urgency is not yet supported")}fieldName(){return"urgency"}filterRegExp(){throw Error(`filterRegExp() unimplemented for ${this.fieldName()}`)}supportsSorting(){return!0}comparator(){return(e,t)=>t.urgency-e.urgency}};var Un=class{static by(e,t){let n=[new Fn().comparator(),new Nn().comparator(),new Vr().comparator(),new Xr().comparator(),new In().comparator()],i=[];for(let s of e)i.push(s.comparator);return t.sort(Un.makeCompositeComparator([...i,...n]))}static makeCompositeComparator(e){return(t,n)=>{for(let i of e){let s=i(t,n);if(s!==0)return s}return 0}}};var Qr=class extends vt{fieldName(){return"description"}value(e){let t=H().globalFilter;return e.description.replace(t,"").trim()}supportsSorting(){return!0}comparator(){return(e,t)=>{let n=Qr.cleanDescription(e.description),i=Qr.cleanDescription(t.description);return n.localeCompare(i,void 0,{numeric:!0})}}static cleanDescription(e){let t=H().globalFilter;e=e.replace(t,"").trim();let n=/^\[\[?([^\]]*)]]?/,i=e.match(n);if(i!==null){let s=i[1];e=s.substring(s.indexOf("|")+1)+e.replace(n,"")}return e=this.replaceFormatting(e,/^\*\*([^*]+)\*\*/),e=this.replaceFormatting(e,/^\*([^*]+)\*/),e=this.replaceFormatting(e,/^==([^=]+)==/),e=this.replaceFormatting(e,/^__([^_]+)__/),e=this.replaceFormatting(e,/^_([^_]+)_/),e}static replaceFormatting(e,t){let n=e.match(t);return n!==null&&(e=n[1]+e.replace(t,"")),e}};var Od=class extends pe{filterRegExp(){return Od.doneRegexp}fieldName(){return"done"}date(e){return e.doneDate}filterResultIfFieldMissing(){return!1}},fs=Od;fs.doneRegexp=/^done (before|after|on)? ?(.*)/;var La=class extends Pr{constructor(){super(),this._filters.add("exclude sub-items",e=>{if(e.indentation==="")return!0;let t=e.indentation.lastIndexOf(">");return t===-1?!1:/^ ?$/.test(e.indentation.slice(t+1))})}fieldName(){return"exclude"}};var Wa=class extends vt{fieldName(){return"heading"}value(e){return e.precedingHeader?e.precedingHeader:""}supportsSorting(){return!0}};var Pd=class extends pe{filterRegExp(){return Pd.scheduledRegexp}fieldName(){return"scheduled"}date(e){return e.scheduledDate}filterResultIfFieldMissing(){return!1}},ps=Pd;ps.scheduledRegexp=/^scheduled (before|after|on)? ?(.*)/;var kd=class extends pe{filterRegExp(){return kd.startRegexp}fieldName(){return"start"}date(e){return e.startDate}filterResultIfFieldMissing(){return!0}},hs=kd;hs.startRegexp=/^starts (before|after|on)? ?(.*)/;var qn=class extends ce{constructor(){super();this.filterInstructions=new Dr,this.filterInstructions.add(qn.instructionForFieldPresence,t=>this.dates(t).some(n=>n!==null)),this.filterInstructions.add(qn.instructionForFieldAbsence,t=>!this.dates(t).some(n=>n!==null))}canCreateFilterForLine(t){return this.filterInstructions.canCreateFilterForLine(t)?!0:super.canCreateFilterForLine(t)}createFilterOrErrorMessage(t){let n=this.filterInstructions.createFilterOrErrorMessage(t);if(n.filter!==void 0)return n;let i=new de(t),s=ce.getMatch(this.filterRegExp(),t);if(s!==null){let a=ar.parseDate(s[2]);if(!a.isValid())i.error="do not understand happens date";else{let o,u;s[1]==="before"?(o=c=>this.dates(c).some(d=>d&&d.isBefore(a)),u=" "+s[1]):s[1]==="after"?(o=c=>this.dates(c).some(d=>d&&d.isAfter(a)),u=" "+s[1]):(o=c=>this.dates(c).some(d=>d&&d.isSame(a)),u=" on");let l=pe.getExplanationString("due, start or scheduled",u,!1,a);i.filter=new Ze(t,o,new _e(l))}}else i.error="do not understand query filter (happens date)";return i}earliestDate(t){return new qn().dates(t).sort(pe.compareByDate)[0]}filterRegExp(){return qn.happensRegexp}dates(t){return Array.of(t.startDate,t.scheduledDate,t.dueDate)}fieldName(){return"happens"}supportsSorting(){return!0}comparator(){return(t,n)=>pe.compareByDate(this.earliestDate(t),this.earliestDate(n))}},cr=qn;cr.happensRegexp=/^happens (before|after|on)? ?(.*)/,cr.instructionForFieldPresence="has happens date",cr.instructionForFieldAbsence="no happens date";var Ya=class extends Pr{constructor(){super(),this._filters.add("is recurring",e=>e.recurrence!==null),this._filters.add("is not recurring",e=>e.recurrence===null)}fieldName(){return"recurring"}};var $a=class extends vt{fieldNamePlural(){return this.fieldNameSingular()+"s"}fieldName(){return`${this.fieldNameSingular()}/${this.fieldNamePlural()}`}fieldPattern(){return`${this.fieldNameSingular()}|${this.fieldNamePlural()}`}filterOperatorPattern(){return`${super.filterOperatorPattern()}|include|do not include`}value(e){return this.values(e).join(", ")}getFilter(e,t){return n=>{let i=e.matchesAnyOf(this.values(n));return t?!i:i}}};var Jr=class extends $a{fieldNameSingular(){return"tag"}values(e){return e.tags}supportsSorting(){return!0}createSorterFromLine(e){let t=e.match(this.sorterRegExp());if(t===null)return null;let n=!!t[1],i=isNaN(+t[2])?1:+t[2],s=Jr.makeCompareByTagComparator(i);return new or(this.fieldNameSingular(),s,n)}sorterRegExp(){return/^sort by tag( reverse)?[\s]*(\d+)?/}comparator(){return Jr.makeCompareByTagComparator(1)}static makeCompareByTagComparator(e){return(t,n)=>{if(t.tags.length===0&&n.tags.length===0)return 0;if(t.tags.length===0)return 1;if(n.tags.length===0)return-1;let i=e-1;if(t.tags.length<e&&n.tags.length>=e)return 1;if(n.tags.length<e&&t.tags.length>=e)return-1;if(t.tags.length<e&&n.tags.length<e)return 0;let s=t.tags[i],a=n.tags[i];return s.localeCompare(a,void 0,{numeric:!0})}}};var k_=Os(P_());var Ha=class extends ce{constructor(){super(...arguments);this.basicBooleanRegexp=/(.*(AND|OR|XOR|NOT)\s*[("].*|\(.+\))/g;this.supportedOperators=["AND","OR","XOR","NOT"];this.subFields={}}filterRegExp(){return this.basicBooleanRegexp}createFilterOrErrorMessage(t){return this.parseLine(t)}fieldName(){return"boolean query"}parseLine(t){let n=new de(t);if(t.length===0)return n.error="empty line",n;let i=this.preprocessExpression(t);try{let s=(0,k_.parse)(i);for(let u of s)if(u.name==="IDENTIFIER"&&u.value){let l=u.value.trim();if(!(l in this.subFields)){let c=za(l);if(c===null)return n.error=`couldn't parse sub-expression '${l}'`,n;if(c.error)return n.error=`couldn't parse sub-expression '${l}': ${c.error}`,n;c.filter&&(this.subFields[l]=c.filter)}}else if(u.name==="OPERATOR"){if(u.value==null)return n.error="empty operator in boolean query",n;if(!this.supportedOperators.includes(u.value))return n.error=`unknown boolean operator '${u.value}'`,n}let a=u=>this.filterTaskWithParsedQuery(u,s),o=this.constructExplanation(s);return n.filter=new Ze(t,a,o),n}catch(s){let a=s instanceof Error?s.message:"unknown error type";return n.error=`malformed boolean query -- ${a} (check the documentation for guidelines)`,n}return n}preprocessExpression(t){return t.replace(/\(([^()]+)\)/g,'("$1")')}filterTaskWithParsedQuery(t,n){let i=o=>o==="true",s=o=>o?"true":"false",a=[];for(let o of n)if(o.name==="IDENTIFIER"){if(o.value==null)throw Error("null token value");let l=this.subFields[o.value.trim()].filterFunction(t);a.push(s(l))}else if(o.name==="OPERATOR")if(o.value==="NOT"){let u=i(a.pop());a.push(s(!u))}else if(o.value==="OR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u||l))}else if(o.value==="AND"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&l))}else if(o.value==="XOR"){let u=i(a.pop()),l=i(a.pop());a.push(s(u&&!l||!u&&l))}else throw Error("Unsupported operator: "+o.value);else throw Error("Unsupported token type: "+o);return i(a[0])}constructExplanation(t){let n=[];for(let i of t)if(i.name==="IDENTIFIER"){if(i.value==null)throw Error("null token value");let s=this.subFields[i.value.trim()];n.push(s.explanation)}else if(i.name==="OPERATOR")if(i.value==="NOT"){let s=n.pop();n.push(_e.booleanNot([s]))}else if(i.value==="OR"){let s=n.pop(),a=n.pop();n.push(_e.booleanOr([a,s]))}else if(i.value==="AND"){let s=n.pop(),a=n.pop();n.push(_e.booleanAnd([a,s]))}else if(i.value==="XOR"){let s=n.pop(),a=n.pop();n.push(_e.booleanXor([a,s]))}else throw Error("Unsupported operator: "+i.value);else throw Error("Unsupported token type: "+i);return n[0]}};var Ka=class extends vt{fieldName(){return"filename"}value(e){let t=e.filename;return t===null?"":t+".md"}supportsSorting(){return!0}};var A_=[()=>new Nn,()=>new Ya,()=>new Xr,()=>new cr,()=>new hs,()=>new ps,()=>new Vr,()=>new fs,()=>new In,()=>new Qr,()=>new Jr,()=>new Wa,()=>new La,()=>new Ha,()=>new Ka,()=>new Fn];function za(r){for(let e of A_){let t=e();if(t.canCreateFilterForLine(r))return t.createFilterOrErrorMessage(r)}return null}function S_(r){let e=/^sort by /;if(r.match(e)===null)return null;for(let t of A_){let i=t().parseSortLine(r);if(i)return i}return null}var Va=class{constructor(e,t){this.nestingLevel=e,this.name=t}};var Xa=class{constructor(e){this.lastHeadingAtLevel=new Array;let n=e.keys().next().value.length;for(let i=0;i<n;i++)this.lastHeadingAtLevel.push("")}getHeadingsForTaskGroup(e){let t=new Array;for(let n=0;n<e.length;n++){let i=e[n];if(i!=this.lastHeadingAtLevel[n]){t.push(new Va(n,i));for(let s=n;s<e.length;s++)this.lastHeadingAtLevel[s]="";this.lastHeadingAtLevel[n]=i}}return t}};var Za=class{constructor(e){this.children=new Map;this.values=[];this.values=e}generateAllPaths(e=[]){let t=new Map;if(this.children.size==0)return t.set([...e],this.values),t;for(let[n,i]of this.children)e.push(n),i.generateAllPaths(e).forEach((a,o)=>t.set(o,a)),e.pop();return t}};var Qa=class extends Map{},Ja=class extends Za{},eo=class{constructor(e,t){this.groups=new Qa;let n=this.buildGroupingTree(e,t);this.groups=n.generateAllPaths(),this.groups=this.getSortedGroups()}buildGroupingTree(e,t){let n=new Ja(t),i=[n];for(let s of e){let a=[];for(let o of i)for(let u of o.values){let l=Ar.getGroupNamesForTask(s.property,u);for(let c of l){let d=o.children.get(c);d===void 0&&(d=new Ja([]),o.children.set(c,d),a.push(d)),d.values.push(u)}}i=a}return n}getSortedGroups(){return new Qa([...this.groups.entries()].sort())}};var to=class{constructor(e,t,n){this.groups=e,this.groupHeadings=t,this.tasks=n}tasksAsStringOfLines(){let e="";for(let t of this.tasks)e+=t.toFileLineString()+`
`;return e}toString(){let e=`
`;e+=`Group names: [${this.groups}]
`;for(let t of this.groupHeadings)e+=`${"#".repeat(4+t.nestingLevel)} ${t.name}
`;return e+=this.tasksAsStringOfLines(),e}};var ro=class{constructor(e,t){this._groups=new Array;this._totalTaskCount=0;this._totalTaskCount=t.length;let n=new eo(e,t);this.addTasks(n)}get groups(){return this._groups}totalTasksCount(){return this._totalTaskCount}toString(){let e="";for(let n of this.groups)e+=n.toString(),e+=`
---
`;return e+=`
${this.totalTasksCount()} tasks
`,e}addTasks(e){let t=new Xa(e.groups);for(let[n,i]of e.groups){let s=t.getHeadingsForTaskGroup(n),a=new to(n,s,i);this.add(a)}}add(e){this._groups.push(e)}};var J=class{static by(e,t){return new ro(e,t)}static getGroupNamesForTask(e,t){let n=J.groupers[e];return n(t)}static escapeMarkdownCharacters(e){return e.replace(/\\/g,"\\\\").replace(/_/g,"\\_")}static groupByPriority(e){let t="ERROR";switch(e.priority){case"1":t="High";break;case"2":t="Medium";break;case"3":t="None";break;case"4":t="Low";break}return[`Priority ${e.priority}: ${t}`]}static groupByRecurrence(e){return e.recurrence!==null?[e.recurrence.toText()]:["None"]}static groupByRecurring(e){return e.recurrence!==null?["Recurring"]:["Not Recurring"]}static groupByStartDate(e){return[J.stringFromDate(e.startDate,"start")]}static groupByScheduledDate(e){return[J.stringFromDate(e.scheduledDate,"scheduled")]}static groupByDueDate(e){return[J.stringFromDate(e.dueDate,"due")]}static groupByDoneDate(e){return[J.stringFromDate(e.doneDate,"done")]}static groupByHappensDate(e){let t=new cr().earliestDate(e);return[J.stringFromDate(t,"happens")]}static stringFromDate(e,t){return e===null?"No "+t+" date":e.format(J.groupDateFormat)}static groupByPath(e){return[J.escapeMarkdownCharacters(e.path.replace(".md",""))]}static groupByFolder(e){let t=e.path,n=e.filename+".md",i=t.substring(0,t.lastIndexOf(n));return i===""?["/"]:[J.escapeMarkdownCharacters(i)]}static groupByFileName(e){let t=e.filename;return t===null?["Unknown Location"]:["[["+J.escapeMarkdownCharacters(t)+"]]"]}static groupByRoot(e){let t=e.path.replace(/\\/g,"/"),n=t.indexOf("/");return n==-1?["/"]:[J.escapeMarkdownCharacters(t.substring(0,n+1))]}static groupByBacklink(e){if(e.getLinkText({isFilenameUnique:!0})===null)return["Unknown Location"];let n="Unknown Location";if(e.filename!==null&&(n=J.escapeMarkdownCharacters(e.filename)),e.precedingHeader===null||e.precedingHeader.length===0)return[n];let i=J.groupByHeading(e)[0];return n===i?[n]:[`${n} > ${i}`]}static groupByStatus(e){return[e.status]}static groupByHeading(e){return e.precedingHeader===null||e.precedingHeader.length===0?["(No heading)"]:[e.precedingHeader]}static groupByTags(e){return e.tags.length==0?["(No tags)"]:e.tags}},Ar=J;Ar.groupDateFormat="YYYY-MM-DD dddd",Ar.groupers={backlink:J.groupByBacklink,done:J.groupByDoneDate,due:J.groupByDueDate,filename:J.groupByFileName,folder:J.groupByFolder,happens:J.groupByHappensDate,heading:J.groupByHeading,path:J.groupByPath,priority:J.groupByPriority,recurrence:J.groupByRecurrence,recurring:J.groupByRecurring,root:J.groupByRoot,scheduled:J.groupByScheduledDate,start:J.groupByStartDate,status:J.groupByStatus,tags:J.groupByTags};var Bn=class{constructor({source:e}){this._limit=void 0;this._layoutOptions=new Qn;this._filters=[];this._error=void 0;this._sorting=[];this._grouping=[];this.groupByRegexp=/^group by (backlink|done|due|filename|folder|happens|heading|path|priority|recurrence|recurring|root|scheduled|start|status|tags)/;this.hideOptionsRegexp=/^(hide|show) (task count|backlink|priority|start date|scheduled date|done date|due date|recurrence rule|edit button|urgency)/;this.shortModeRegexp=/^short/;this.explainQueryRegexp=/^explain/;this.limitRegexp=/^limit (to )?(\d+)( tasks?)?/;this.commentRegexp=/^#.*/;this.source=e,e.split(`
`).map(t=>t.trim()).forEach(t=>{switch(!0){case t==="":break;case this.shortModeRegexp.test(t):this._layoutOptions.shortMode=!0;break;case this.explainQueryRegexp.test(t):this._layoutOptions.explainQuery=!0;break;case this.limitRegexp.test(t):this.parseLimit({line:t});break;case this.parseSortBy({line:t}):break;case this.groupByRegexp.test(t):this.parseGroupBy({line:t});break;case this.hideOptionsRegexp.test(t):this.parseHideOptions({line:t});break;case this.commentRegexp.test(t):break;case this.parseFilter(t):break;default:this._error=`do not understand query: ${t}`}})}explainQuery(){return`Explanation of this Tasks code block query:

`+this.explainQueryWithoutIntroduction()}explainQueryWithoutIntroduction(){let e="",{globalFilter:t}=H();t.length!==0&&(e+=`Only tasks containing the global filter '${t}'.

`);let n=this.filters.length;if(n===0)e+="No filters supplied. All tasks will match the query.";else for(let i=0;i<n;i++)i>0&&(e+=`
`),e+=this.filters[i].explainFilterIndented("");return this._limit!==void 0&&(e+=`

At most ${this._limit} task`,this._limit!==1&&(e+="s"),e+=`.
`),e}get limit(){return this._limit}get layoutOptions(){return this._layoutOptions}get filters(){return this._filters}get sorting(){return this._sorting}get grouping(){return this._grouping}get error(){return this._error}applyQueryToTasks(e){this.filters.forEach(n=>{e=e.filter(n.filterFunction)});let t=Un.by(this.sorting,e).slice(0,this.limit);return Ar.by(this.grouping,t)}parseHideOptions({line:e}){let t=e.match(this.hideOptionsRegexp);if(t!==null){let n=t[1]==="hide";switch(t[2]){case"task count":this._layoutOptions.hideTaskCount=n;break;case"backlink":this._layoutOptions.hideBacklinks=n;break;case"priority":this._layoutOptions.hidePriority=n;break;case"start date":this._layoutOptions.hideStartDate=n;break;case"scheduled date":this._layoutOptions.hideScheduledDate=n;break;case"due date":this._layoutOptions.hideDueDate=n;break;case"done date":this._layoutOptions.hideDoneDate=n;break;case"recurrence rule":this._layoutOptions.hideRecurrenceRule=n;break;case"edit button":this._layoutOptions.hideEditButton=n;break;case"urgency":this._layoutOptions.hideUrgency=n;break;default:this._error="do not understand hide/show option"}}}parseFilter(e){let t=za(e);return t!=null?(t.filter?this._filters.push(t.filter):this._error=t.error,!0):!1}parseLimit({line:e}){let t=e.match(this.limitRegexp);t!==null?this._limit=Number.parseInt(t[2],10):this._error="do not understand query limit"}parseSortBy({line:e}){let t=S_(e);return t?(this._sorting.push(t),!0):!1}parseGroupBy({line:e}){let t=e.match(this.groupByRegexp);t!==null?this._grouping.push({property:t[1]}):this._error="do not understand query grouping"}};var no=class{constructor({plugin:e,events:t}){this.addQueryRenderChild=this._addQueryRenderChild.bind(this);this.app=e.app,this.events=t,e.registerMarkdownCodeBlockProcessor("tasks",this._addQueryRenderChild.bind(this))}_addQueryRenderChild(e,t,n){return B(this,null,function*(){n.addChild(new Yd({app:this.app,events:this.events,container:t,source:e,filePath:n.sourcePath}))})}},Yd=class extends io.MarkdownRenderChild{constructor({app:t,events:n,container:i,source:s,filePath:a}){super(i);switch(this.app=t,this.events=n,this.source=s,this.filePath=a,this.containerEl.className){case"block-language-tasks":this.query=new Bn({source:s}),this.queryType="tasks";break;default:this.query=new Bn({source:s}),this.queryType="tasks";break}}onload(){this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.renderEventRef=this.events.onCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()}onunload(){this.renderEventRef!==void 0&&this.events.off(this.renderEventRef),this.queryReloadTimeout!==void 0&&clearTimeout(this.queryReloadTimeout)}reloadQueryAtMidnight(){let t=new Date;t.setHours(24,0,0,0);let n=new Date,i=t.getTime()-n.getTime();this.queryReloadTimeout=setTimeout(()=>{this.query=new Bn({source:this.source}),this.events.triggerRequestCacheUpdate(this.render.bind(this)),this.reloadQueryAtMidnight()},i+1e3)}render(i){return B(this,arguments,function*({tasks:t,state:n}){var a;let s=this.containerEl.createEl("div");if(n==="Warm"&&this.query.error===void 0){console.debug(`Render ${this.queryType} called for a block in active file "${this.filePath}", to select from ${t.length} tasks: plugin state: ${n}`),this.query.layoutOptions.explainQuery&&this.createExplanation(s);let o=this.query.applyQueryToTasks(t);for(let l of o.groups){this.addGroupHeadings(s,l.groupHeadings);let{taskList:c}=yield this.createTasksList({tasks:l.tasks,content:s});s.appendChild(c)}let u=o.totalTasksCount();console.debug(`${u} of ${t.length} tasks displayed in a block in "${this.filePath}"`),this.addTaskCount(s,u)}else this.query.error!==void 0?s.setText(`Tasks query: ${this.query.error}`):s.setText("Loading Tasks ...");(a=this.containerEl.firstChild)==null||a.replaceWith(s)})}createExplanation(t){let n=this.query.explainQuery(),i=t.createEl("pre");i.addClasses(["plugin-tasks-query-explanation"]),i.setText(n),t.appendChild(i)}createTasksList(i){return B(this,arguments,function*({tasks:t,content:n}){let s=t.length,a=n.createEl("ul");a.addClasses(["contains-task-list","plugin-tasks-query-result"]);for(let o=0;o<s;o++){let u=t[o],l=this.isFilenameUnique({task:u}),c=yield u.toLi({parentUlElement:a,listIndex:o,layoutOptions:this.query.layoutOptions,isFilenameUnique:l});c.querySelectorAll("[data-footnote-id]").forEach(h=>h.remove());let f=this.query.layoutOptions.shortMode;this.query.layoutOptions.hideUrgency||this.addUrgency(c,u),this.query.layoutOptions.hideBacklinks||this.addBacklinks(c,u,f,l),this.query.layoutOptions.hideEditButton||this.addEditButton(c,u),a.appendChild(c)}return{taskList:a,tasksCount:s}})}addEditButton(t,n){t.createEl("a",{cls:"tasks-edit"}).onClickEvent(s=>{s.preventDefault();let a=u=>{Pa({originalTask:n,newTasks:Qe.removeInferredStatusIfNeeded(n,u)})};new Sn({app:this.app,task:n,onSubmit:a}).open()})}addUrgency(t,n){let i=new Intl.NumberFormat().format(n.urgency);t.createSpan({text:i,cls:"tasks-urgency"})}addGroupHeadings(t,n){for(let i of n)this.addGroupHeading(t,i)}addGroupHeading(t,n){return B(this,null,function*(){let i;n.nestingLevel===0?i=t.createEl("h4",{cls:"tasks-group-heading"}):n.nestingLevel===1?i=t.createEl("h5",{cls:"tasks-group-heading"}):i=t.createEl("h6",{cls:"tasks-group-heading"}),yield io.MarkdownRenderer.renderMarkdown(n.name,i,this.filePath,this)})}addBacklinks(t,n,i,s){var l;let a=t.createSpan({cls:"tasks-backlink"});i||a.append(" (");let o=a.createEl("a");if(o.href=n.path,o.setAttribute("data-href",n.path),o.rel="noopener",o.target="_blank",o.addClass("internal-link"),i&&o.addClass("internal-link-short-mode"),n.precedingHeader!==null){let c=n.precedingHeader.replace(/#/g,"");o.href=o.href+"#"+c,o.setAttribute("data-href",o.getAttribute("data-href")+"#"+c)}let u;i?u=" \u{1F517}":u=(l=n.getLinkText({isFilenameUnique:s}))!=null?l:"",o.setText(u),i||a.append(")")}addTaskCount(t,n){this.query.layoutOptions.hideTaskCount||t.createDiv({text:`${n} task${n!==1?"s":""}`,cls:"tasks-count"})}isFilenameUnique({task:t}){let n=t.path.match(/([^/]*)\..+$/i);if(n===null)return;let i=n[1];return this.app.vault.getMarkdownFiles().filter(a=>{if(a.basename===i)return!0}).length<2}};var Et=require("obsidian");var Gn=class extends Et.PluginSettingTab{constructor({plugin:t}){super(t.app,t);this.plugin=t}display(){let{containerEl:t}=this;t.empty(),t.createEl("h3",{text:"Tasks Settings"}),t.createEl("p",{cls:"tasks-setting-important",text:"Changing any settings requires a restart of obsidian."}),t.createEl("h4",{text:"Global filter Settings"}),new Et.Setting(t).setName("Global task filter").setDesc(Gn.createFragmentWithHTML('<p><b>Recommended: Leave empty if you want all checklist items in your vault to be tasks managed by this plugin.</b></p><p>Use a global filter if you want Tasks to only act on a subset of your "<code>- [ ]</code>" checklist items, so that a checklist item must include the specified string in its description in order to be considered a task.<p><p>For example, if you set the global filter to <code>#task</code>, the Tasks plugin will only handle checklist items tagged with <code>#task</code>.</br>Other checklist items will remain normal checklist items and not appear in queries or get a done date set.</p><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/global-filter/">documentation</a>.</p>')).addText(n=>{let i=H();n.setPlaceholder("e.g. #task or TODO").setValue(i.globalFilter).onChange(s=>B(this,null,function*(){bt({globalFilter:s}),yield this.plugin.saveSettings()}))}),new Et.Setting(t).setName("Remove global filter from description").setDesc("Enabling this removes the string that you set as global filter from the task description when displaying a task.").addToggle(n=>{let i=H();n.setValue(i.removeGlobalFilter).onChange(s=>B(this,null,function*(){bt({removeGlobalFilter:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Date Settings"}),new Et.Setting(t).setName("Set done date on every completed task").setDesc("Enabling this will add a timestamp \u2705 YYYY-MM-DD at the end when a task is toggled to done").addToggle(n=>{let i=H();n.setValue(i.setDoneDate).onChange(s=>B(this,null,function*(){bt({setDoneDate:s}),yield this.plugin.saveSettings()}))}),new Et.Setting(t).setName("Use filename as Scheduled date for undated tasks").setDesc(Gn.createFragmentWithHTML('Save time entering Scheduled (\u23F3) dates.</br>If this option is enabled, any undated tasks will be given a default Scheduled date extracted from their file name.</br>The date in the file name must be in one of <code>YYYY-MM-DD</code> or <code>YYYYMMDD</code> formats.</br>Undated tasks have none of Due (\u{1F4C5} ), Scheduled (\u23F3) and Start (\u{1F6EB}) dates.</br><p>See the <a href="https://obsidian-tasks-group.github.io/obsidian-tasks/getting-started/use-filename-as-default-date/">documentation</a>.</p>')).addToggle(n=>{let i=H();n.setValue(i.useFilenameAsScheduledDate).onChange(s=>B(this,null,function*(){bt({useFilenameAsScheduledDate:s}),yield this.plugin.saveSettings()}))}),new Et.Setting(t).setName("Folders with default Scheduled dates").setDesc("Leave empty if you want to use default Scheduled dates everywhere, or enter a comma-separated list of folders.").addText(n=>B(this,null,function*(){let i=H();yield this.plugin.saveSettings(),n.setValue(Gn.renderFolderArray(i.filenameAsDateFolders)).onChange(s=>B(this,null,function*(){let a=Gn.parseCommaSeparatedFolders(s);bt({filenameAsDateFolders:a}),yield this.plugin.saveSettings()}))})),t.createEl("h4",{text:"Auto-suggest Settings"}),new Et.Setting(t).setName("Auto-suggest task content").setDesc("Enabling this will open an intelligent suggest menu while typing inside a recognized task line.").addToggle(n=>{let i=H();n.setValue(i.autoSuggestInEditor).onChange(s=>B(this,null,function*(){bt({autoSuggestInEditor:s}),yield this.plugin.saveSettings()}))}),new Et.Setting(t).setName("Minimum match length for auto-suggest").setDesc("If higher than 0, auto-suggest will be triggered only when the beginning of any supported keywords is recognized.").addSlider(n=>{let i=H();n.setLimits(0,3,1).setValue(i.autoSuggestMinMatch).setDynamicTooltip().onChange(s=>B(this,null,function*(){bt({autoSuggestMinMatch:s}),yield this.plugin.saveSettings()}))}),new Et.Setting(t).setName("Maximum number of auto-suggestions to show").setDesc('How many suggestions should be shown when an auto-suggest menu pops up (including the "\u23CE" option).').addSlider(n=>{let i=H();n.setLimits(3,12,1).setValue(i.autoSuggestMaxItems).setDynamicTooltip().onChange(s=>B(this,null,function*(){bt({autoSuggestMaxItems:s}),yield this.plugin.saveSettings()}))}),t.createEl("h4",{text:"Dialog Settings"}),new Et.Setting(t).setName("Provide access keys in dialogs").setDesc("If the access keys (keyboard shortcuts) for various controls in dialog boxes conflict with system keyboard shortcuts or assistive technology functionality that is important for you, you may want to deactivate them here.").addToggle(n=>{let i=H();n.setValue(i.provideAccessKeys).onChange(s=>B(this,null,function*(){bt({provideAccessKeys:s}),yield this.plugin.saveSettings()}))})}static parseCommaSeparatedFolders(t){return t.split(",").map(n=>n.trim()).map(n=>n.replace(/^\/|\/$/g,"")).filter(n=>n!=="")}static renderFolderArray(t){return t.join(",")}},_s=Gn;_s.createFragmentWithHTML=t=>createFragment(n=>n.createDiv().innerHTML=t);var C_=require("obsidian");var _k=`${Nt}${Ct}${xt}`;function N_(r,e,t){let n=[];n=n.concat(vk(r,e,t)),n=n.concat(Ek(r,e,t));let i=bk(r,t),s=$d(r,/([a-zA-Z'_-]*)/g,e),a=!1;if(s&&s.length>0){let o=s[0];if(o.length>=Math.max(1,t.autoSuggestMinMatch)){let u=i.filter(l=>l.displayText.toLowerCase().includes(o.toLowerCase()));for(let l of u)n.push({suggestionType:"match",displayText:l.displayText,appendText:l.appendText,insertAt:s.index,insertSkip:o.length}),a=!0}}return!a&&t.autoSuggestMinMatch===0&&(n=n.concat(i)),n.length>0&&!n.some(o=>o.suggestionType==="match")&&n.unshift({suggestionType:"empty",displayText:"\u23CE",appendText:`
`}),n=n.slice(0,t.autoSuggestMaxItems),n}function Tk(r){if(Object.values(Re).some(e=>e.length>0&&r.includes(e)))return!0}function bk(r,e){let t=[];return r.includes(xt)||t.push({displayText:`${xt} due date`,appendText:`${xt} `}),r.includes(Nt)||t.push({displayText:`${Nt} start date`,appendText:`${Nt} `}),r.includes(Ct)||t.push({displayText:`${Ct} scheduled date`,appendText:`${Ct} `}),Tk(r)||(t.push({displayText:`${Re.High} high priority`,appendText:`${Re.High} `}),t.push({displayText:`${Re.Medium} medium priority`,appendText:`${Re.Medium} `}),t.push({displayText:`${Re.Low} low priority`,appendText:`${Re.Low} `})),r.includes(St)||t.push({displayText:`${St} recurring (repeat)`,appendText:`${St} `}),t}function vk(r,e,t){let n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"],i=[],s=new RegExp(`([${_k}])\\s*([0-9a-zA-Z ]*)`,"ug"),a=$d(r,s,e);if(a&&a.length>=2){let o=a[1],u=a[2];if(u.length<t.autoSuggestMinMatch)return[];let l=u&&u.length>1?ar.parseDate(An(u),!0):null;l&&l.isValid()&&i.push({displayText:`${l.format(D.dateFormat)}`,appendText:`${o} ${l.format(D.dateFormat)} `,insertAt:a.index,insertSkip:a[0].length});let c=1,d=5,f=n.filter(h=>u&&u.length>=c&&h.toLowerCase().includes(u.toLowerCase())).slice(0,d);f.length===0&&(f=n.slice(0,d));for(let h of f){let m=`${ar.parseDate(h,!0).format(D.dateFormat)}`;i.push({suggestionType:"match",displayText:`${h} (${m})`,appendText:`${o} ${m} `,insertAt:a.index,insertSkip:a[0].length})}}return i}function Ek(r,e,t){var o;let n=["every","every day","every week","every month","every month on the","every year","every week on Sunday","every week on Monday","every week on Tuesday","every week on Wednesday","every week on Thursday","every week on Friday","every week on Saturday"],i=[],s=new RegExp(`(${St})\\s*([0-9a-zA-Z ]*)`,"ug"),a=$d(r,s,e);if(a&&a.length>=2){let u=a[1],l=a[2];if(l.length<t.autoSuggestMinMatch)return[];if(l.length>0){let h=(o=Ce.fromText({recurrenceRuleText:l,startDate:null,scheduledDate:null,dueDate:null}))==null?void 0:o.toText();if(h){let _=`${u} ${h} `;if(i.push({suggestionType:"match",displayText:`\u2705 ${h}`,appendText:_,insertAt:a.index,insertSkip:a[0].length}),a[0]==_)return[]}}let c=1,d=t.autoSuggestMaxItems/2,f=n.filter(h=>l&&l.length>=c&&h.toLowerCase().includes(l.toLowerCase())).slice(0,d);f.length===0&&l.trim().length===0&&(f=n.slice(0,d));for(let h of f)i.push({suggestionType:"match",displayText:`${h}`,appendText:`${u} ${h} `,insertAt:a.index,insertSkip:a[0].length})}return i}function $d(r,e,t){let n=r.matchAll(e);for(let i of n)if((i==null?void 0:i.index)&&i.index<=t&&t<=i.index+i[0].length)return i;return[]}var so=class extends C_.EditorSuggest{constructor(t,n){super(t);this.settings=n}onTrigger(t,n,i){if(!this.settings.autoSuggestInEditor)return null;let s=n.getLine(t.line);return s.contains(this.settings.globalFilter)&&s.match(D.taskRegex)?{start:{line:t.line,ch:0},end:{line:t.line,ch:s.length},query:s}:null}getSuggestions(t){let n=t.query,i=t.editor.getCursor(),s=N_(n,i.ch,this.settings),a=[];for(let o of s)a.push(ct(Me({},o),{context:t}));return a}renderSuggestion(t,n){n.setText(t.displayText)}selectSuggestion(t,n){var u,l,c;let i=t.context.editor;if(t.suggestionType==="empty"){this.close();let d=new KeyboardEvent("keydown",{code:"Enter",key:"Enter"});(l=(u=i==null?void 0:i.cm)==null?void 0:u.contentDOM)==null||l.dispatchEvent(d);return}let s=t.context.editor.getCursor(),a={line:s.line,ch:(c=t.insertAt)!=null?c:s.ch},o=t.insertSkip?{line:s.line,ch:a.ch+t.insertSkip}:void 0;t.context.editor.replaceRange(t.appendText,a,o),t.context.editor.setCursor({line:s.line,ch:a.ch+t.appendText.length})}};var ao=class extends x_.Plugin{onload(){return B(this,null,function*(){console.log('loading plugin "tasks"'),yield this.loadSettings(),this.addSettingTab(new _s({plugin:this})),Gg({metadataCache:this.app.metadataCache,vault:this.app.vault});let t=new Ua({obsidianEvents:this.app.workspace});this.cache=new Or({metadataCache:this.app.metadataCache,vault:this.app.vault,events:t}),this.inlineRenderer=new qa({plugin:this}),this.queryRenderer=new no({plugin:this,events:t}),this.registerEditorExtension(y_()),this.registerEditorSuggest(new so(this.app,H())),new Fa({plugin:this})})}onunload(){var t;console.log('unloading plugin "tasks"'),(t=this.cache)==null||t.unload()}loadSettings(){return B(this,null,function*(){let t=yield this.loadData();bt(t)})}saveSettings(){return B(this,null,function*(){yield this.saveData(H())})}};
